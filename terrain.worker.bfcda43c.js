!function(t){this.webpackChunk=function(e,r){for(var n in r)t[n]=r[n];for(;e.length;)i[e.pop()]=1};var e={},i={0:1},r={};var n={20:function(){return{"./index_bg.js":{__wbg_log_db2a6fddbe33ea55:function(t,i){return e[19].exports.f(t,i)},__wbindgen_object_drop_ref:function(t){return e[19].exports.n(t)},__wbg_new_59cb74e423758ede:function(){return e[19].exports.g()},__wbg_stack_558ba5917b466edd:function(t,i){return e[19].exports.l(t,i)},__wbg_error_4bb6c2a97407129a:function(t,i){return e[19].exports.e(t,i)},__wbg_new_a938277eeb06668d:function(){return e[19].exports.h()},__wbg_push_2bfc5fcfa4d4389d:function(t,i){return e[19].exports.k(t,i)},__wbg_buffer_985803c87989344b:function(t){return e[19].exports.d(t)},__wbg_newwithbyteoffsetandlength_09cdf5567e13277f:function(t,i,r){return e[19].exports.i(t,i,r)},__wbg_newwithbyteoffsetandlength_3c83a6445776097f:function(t,i,r){return e[19].exports.j(t,i,r)},__wbindgen_throw:function(t,i){return e[19].exports.o(t,i)},__wbindgen_memory:function(){return e[19].exports.m()}}}}};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[];return e.push(Promise.resolve().then((function(){i[t]||importScripts(s.p+""+t+".terrain.worker."+{1:"31c10d02"}[t]+".js")}))),({1:[20]}[t]||[]).forEach((function(t){var i=r[t];if(i)e.push(i);else{var a,o=n[t](),h=fetch(s.p+""+{20:"811e856d8ba478fac82a"}[t]+".module.wasm");if(o instanceof Promise&&"function"===typeof WebAssembly.compileStreaming)a=Promise.all([WebAssembly.compileStreaming(h),o]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"===typeof WebAssembly.instantiateStreaming)a=WebAssembly.instantiateStreaming(h,o);else{a=h.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,o)}))}e.push(r[t]=a.then((function(e){return s.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="./",s.w={},s(s.s=18)}([function(t,e,i){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var r in i)n(i,r)&&(t[r]=i[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,r,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+r),n);else for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){var e,i,r,n,s,a;for(r=0,e=0,i=t.length;e<i;e++)r+=t[e].length;for(a=new Uint8Array(r),n=0,e=0,i=t.length;e<i;e++)s=t[e],a.set(s,n),n+=s.length;return a}},a={arraySet:function(t,e,i,r,n){for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){(function(e){!function(){var e={};t.exports=e,function(t,e){t.toRGBA8=function(e){var i=e.width,r=e.height;if(null==e.tabs.acTL)return[t.toRGBA8.decodeImage(e.data,i,r,e).buffer];var n=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var s,a=new Uint8Array(i*r*4),o=0;o<e.frames.length;o++){var h=e.frames[o],u=h.rect.x,l=h.rect.y,c=h.rect.width,f=h.rect.height,d=t.toRGBA8.decodeImage(h.data,c,f,e);if(0==o?s=d:0==h.blend?t._copyTile(d,c,f,s,i,r,u,l,0):1==h.blend&&t._copyTile(d,c,f,s,i,r,u,l,1),n.push(s.buffer),s=s.slice(0),0==h.dispose);else if(1==h.dispose)t._copyTile(a,c,f,s,i,r,u,l,0);else if(2==h.dispose){for(var m=o-1;2==e.frames[m].dispose;)m--;s=new Uint8Array(n[m]).slice(0)}}return n},t.toRGBA8.decodeImage=function(e,i,r,n){var s=i*r,a=t.decode._getBPP(n),o=Math.ceil(i*a/8),h=new Uint8Array(4*s),u=new Uint32Array(h.buffer),l=n.ctype,c=n.depth,f=t._bin.readUshort;if(6==l){var d=s<<2;if(8==c)for(var m=0;m<d;m++)h[m]=e[m];if(16==c)for(m=0;m<d;m++)h[m]=e[m<<1]}else if(2==l){var p=n.tabs.tRNS,g=-1,y=-1,v=-1;if(p&&(g=p[0],y=p[1],v=p[2]),8==c)for(m=0;m<s;m++){var x=3*m;h[A=m<<2]=e[x],h[A+1]=e[x+1],h[A+2]=e[x+2],h[A+3]=255,-1!=g&&e[x]==g&&e[x+1]==y&&e[x+2]==v&&(h[A+3]=0)}if(16==c)for(m=0;m<s;m++){x=6*m;h[A=m<<2]=e[x],h[A+1]=e[x+2],h[A+2]=e[x+4],h[A+3]=255,-1!=g&&f(e,x)==g&&f(e,x+2)==y&&f(e,x+4)==v&&(h[A+3]=0)}}else if(3==l){var _=n.tabs.PLTE,b=n.tabs.tRNS,w=b?b.length:0;if(1==c)for(var z=0;z<r;z++){var M=z*o,k=z*i;for(m=0;m<i;m++){var A=k+m<<2,S=3*(B=e[M+(m>>3)]>>7-((7&m)<<0)&1);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=B<w?b[B]:255}}if(2==c)for(z=0;z<r;z++)for(M=z*o,k=z*i,m=0;m<i;m++){A=k+m<<2,S=3*(B=e[M+(m>>2)]>>6-((3&m)<<1)&3);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=B<w?b[B]:255}if(4==c)for(z=0;z<r;z++)for(M=z*o,k=z*i,m=0;m<i;m++){A=k+m<<2,S=3*(B=e[M+(m>>1)]>>4-((1&m)<<2)&15);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=B<w?b[B]:255}if(8==c)for(m=0;m<s;m++){var B;A=m<<2,S=3*(B=e[m]);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=B<w?b[B]:255}}else if(4==l){if(8==c)for(m=0;m<s;m++){A=m<<2;var E=e[N=m<<1];h[A]=E,h[A+1]=E,h[A+2]=E,h[A+3]=e[N+1]}if(16==c)for(m=0;m<s;m++){var N;A=m<<2,E=e[N=m<<2];h[A]=E,h[A+1]=E,h[A+2]=E,h[A+3]=e[N+2]}}else if(0==l){g=n.tabs.tRNS?n.tabs.tRNS:-1;if(1==c)for(m=0;m<s;m++){var U=(E=255*(e[m>>3]>>7-(7&m)&1))==255*g?0:255;u[m]=U<<24|E<<16|E<<8|E}if(2==c)for(m=0;m<s;m++){U=(E=85*(e[m>>2]>>6-((3&m)<<1)&3))==85*g?0:255;u[m]=U<<24|E<<16|E<<8|E}if(4==c)for(m=0;m<s;m++){U=(E=17*(e[m>>1]>>4-((1&m)<<2)&15))==17*g?0:255;u[m]=U<<24|E<<16|E<<8|E}if(8==c)for(m=0;m<s;m++){U=(E=e[m])==g?0:255;u[m]=U<<24|E<<16|E<<8|E}if(16==c)for(m=0;m<s;m++){E=e[m<<1],U=f(e,m<<1)==g?0:255;u[m]=U<<24|E<<16|E<<8|E}}return h},t.decode=function(e){for(var i,r=new Uint8Array(e),n=8,s=t._bin,a=s.readUshort,o=s.readUint,h={tabs:{},frames:[]},u=new Uint8Array(r.length),l=0,c=0,f=[137,80,78,71,13,10,26,10],d=0;d<8;d++)if(r[d]!=f[d])throw"The input is not a PNG file!";for(;n<r.length;){var m=s.readUint(r,n);n+=4;var p=s.readASCII(r,n,4);if(n+=4,"IHDR"==p)t.decode._IHDR(r,n,h);else if("IDAT"==p){for(d=0;d<m;d++)u[l+d]=r[n+d];l+=m}else if("acTL"==p)h.tabs[p]={num_frames:o(r,n),num_plays:o(r,n+4)},i=new Uint8Array(r.length);else if("fcTL"==p){if(0!=c)(M=h.frames[h.frames.length-1]).data=t.decode._decompress(h,i.slice(0,c),M.rect.width,M.rect.height),c=0;var g={x:o(r,n+12),y:o(r,n+16),width:o(r,n+4),height:o(r,n+8)},y=a(r,n+22);y=a(r,n+20)/(0==y?100:y);var v={rect:g,delay:Math.round(1e3*y),dispose:r[n+24],blend:r[n+25]};h.frames.push(v)}else if("fdAT"==p){for(d=0;d<m-4;d++)i[c+d]=r[n+d+4];c+=m-4}else if("pHYs"==p)h.tabs[p]=[s.readUint(r,n),s.readUint(r,n+4),r[n+8]];else if("cHRM"==p){h.tabs[p]=[];for(d=0;d<8;d++)h.tabs[p].push(s.readUint(r,n+4*d))}else if("tEXt"==p){null==h.tabs[p]&&(h.tabs[p]={});var x=s.nextZero(r,n),_=s.readASCII(r,n,x-n),b=s.readASCII(r,x+1,n+m-x-1);h.tabs[p][_]=b}else if("iTXt"==p){null==h.tabs[p]&&(h.tabs[p]={});x=0;var w=n;x=s.nextZero(r,w);_=s.readASCII(r,w,x-w),r[w=x+1],r[w+1];w+=2,x=s.nextZero(r,w);s.readASCII(r,w,x-w);w=x+1,x=s.nextZero(r,w);s.readUTF8(r,w,x-w);w=x+1;b=s.readUTF8(r,w,m-(w-n));h.tabs[p][_]=b}else if("PLTE"==p)h.tabs[p]=s.readBytes(r,n,m);else if("hIST"==p){var z=h.tabs.PLTE.length/3;h.tabs[p]=[];for(d=0;d<z;d++)h.tabs[p].push(a(r,n+2*d))}else if("tRNS"==p)3==h.ctype?h.tabs[p]=s.readBytes(r,n,m):0==h.ctype?h.tabs[p]=a(r,n):2==h.ctype&&(h.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]);else if("gAMA"==p)h.tabs[p]=s.readUint(r,n)/1e5;else if("sRGB"==p)h.tabs[p]=r[n];else if("bKGD"==p)0==h.ctype||4==h.ctype?h.tabs[p]=[a(r,n)]:2==h.ctype||6==h.ctype?h.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]:3==h.ctype&&(h.tabs[p]=r[n]);else if("IEND"==p){var M;if(0!=c)(M=h.frames[h.frames.length-1]).data=t.decode._decompress(h,i.slice(0,c),M.rect.width,M.rect.height),c=0;h.data=t.decode._decompress(h,u,h.width,h.height);break}n+=m;s.readUint(r,n);n+=4}return delete h.compress,delete h.interlace,delete h.filter,h},t.decode._decompress=function(e,i,r,n){return 0==e.compress&&(i=t.decode._inflate(i)),0==e.interlace?i=t.decode._filterZero(i,e,0,r,n):1==e.interlace&&(i=t.decode._readInterlace(i,e)),i},t.decode._inflate=function(t){return e.inflate(t)},t.decode._readInterlace=function(e,i){for(var r=i.width,n=i.height,s=t.decode._getBPP(i),a=s>>3,o=Math.ceil(r*s/8),h=new Uint8Array(n*o),u=0,l=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],m=0;m<7;){for(var p=f[m],g=d[m],y=0,v=0,x=l[m];x<n;)x+=p,v++;for(var _=c[m];_<r;)_+=g,y++;var b=Math.ceil(y*s/8);t.decode._filterZero(e,i,u,y,v);for(var w=0,z=l[m];z<n;){for(var M=c[m],k=u+w*b<<3;M<r;){var A;if(1==s)A=(A=e[k>>3])>>7-(7&k)&1,h[z*o+(M>>3)]|=A<<7-((3&M)<<0);if(2==s)A=(A=e[k>>3])>>6-(7&k)&3,h[z*o+(M>>2)]|=A<<6-((3&M)<<1);if(4==s)A=(A=e[k>>3])>>4-(7&k)&15,h[z*o+(M>>1)]|=A<<4-((1&M)<<2);if(s>=8)for(var S=z*o+M*a,B=0;B<a;B++)h[S+B]=e[(k>>3)+B];k+=s,M+=g}w++,z+=p}y*v!=0&&(u+=v*(1+b)),m+=1}return h},t.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},t.decode._filterZero=function(e,i,r,n,s){var a=t.decode._getBPP(i),o=Math.ceil(n*a/8),h=t.decode._paeth;a=Math.ceil(a/8);for(var u=0;u<s;u++){var l=r+u*o,c=l+u+1,f=e[c-1];if(0==f)for(var d=0;d<o;d++)e[l+d]=e[c+d];else if(1==f){for(d=0;d<a;d++)e[l+d]=e[c+d];for(d=a;d<o;d++)e[l+d]=e[c+d]+e[l+d-a]&255}else if(0==u){for(d=0;d<a;d++)e[l+d]=e[c+d];if(2==f)for(d=a;d<o;d++)e[l+d]=255&e[c+d];if(3==f)for(d=a;d<o;d++)e[l+d]=e[c+d]+(e[l+d-a]>>1)&255;if(4==f)for(d=a;d<o;d++)e[l+d]=e[c+d]+h(e[l+d-a],0,0)&255}else{if(2==f)for(d=0;d<o;d++)e[l+d]=e[c+d]+e[l+d-o]&255;if(3==f){for(d=0;d<a;d++)e[l+d]=e[c+d]+(e[l+d-o]>>1)&255;for(d=a;d<o;d++)e[l+d]=e[c+d]+(e[l+d-o]+e[l+d-a]>>1)&255}if(4==f){for(d=0;d<a;d++)e[l+d]=e[c+d]+h(0,e[l+d-o],0)&255;for(d=a;d<o;d++)e[l+d]=e[c+d]+h(e[l+d-a],e[l+d-o],e[l+d-a-o])&255}}}return e},t.decode._paeth=function(t,e,i){var r=t+e-i,n=Math.abs(r-t),s=Math.abs(r-e),a=Math.abs(r-i);return n<=s&&n<=a?t:s<=a?e:i},t.decode._IHDR=function(e,i,r){var n=t._bin;r.width=n.readUint(e,i),i+=4,r.height=n.readUint(e,i),i+=4,r.depth=e[i],i++,r.ctype=e[i],i++,r.compress=e[i],i++,r.filter=e[i],i++,r.interlace=e[i],i++},t._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,i){t[e]=i>>8&255,t[e+1]=255&i},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},readASCII:function(t,e,i){for(var r="",n=0;n<i;n++)r+=String.fromCharCode(t[e+n]);return r},writeASCII:function(t,e,i){for(var r=0;r<i.length;r++)t[e+r]=i.charCodeAt(r)},readBytes:function(t,e,i){for(var r=[],n=0;n<i;n++)r.push(t[e+n]);return r},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(e,i,r){for(var n,s="",a=0;a<r;a++)s+="%"+t._bin.pad(e[i+a].toString(16));try{n=decodeURIComponent(s)}catch(o){return t._bin.readASCII(e,i,r)}return n}},t._copyTile=function(t,e,i,r,n,s,a,o,h){for(var u=Math.min(e,n),l=Math.min(i,s),c=0,f=0,d=0;d<l;d++)for(var m=0;m<u;m++)if(a>=0&&o>=0?(c=d*e+m<<2,f=(o+d)*n+a+m<<2):(c=(-o+d)*e-a+m<<2,f=d*n+m<<2),0==h)r[f]=t[c],r[f+1]=t[c+1],r[f+2]=t[c+2],r[f+3]=t[c+3];else if(1==h){var p=t[c+3]*(1/255),g=t[c]*p,y=t[c+1]*p,v=t[c+2]*p,x=r[f+3]*(1/255),_=r[f]*x,b=r[f+1]*x,w=r[f+2]*x,z=1-p,M=p+x*z,k=0==M?0:1/M;r[f+3]=255*M,r[f+0]=(g+_*z)*k,r[f+1]=(y+b*z)*k,r[f+2]=(v+w*z)*k}else if(2==h){p=t[c+3],g=t[c],y=t[c+1],v=t[c+2],x=r[f+3],_=r[f],b=r[f+1],w=r[f+2];p==x&&g==_&&y==b&&v==w?(r[f]=0,r[f+1]=0,r[f+2]=0,r[f+3]=0):(r[f]=g,r[f+1]=y,r[f+2]=v,r[f+3]=p)}else if(3==h){p=t[c+3],g=t[c],y=t[c+1],v=t[c+2],x=r[f+3],_=r[f],b=r[f+1],w=r[f+2];if(p==x&&g==_&&y==b&&v==w)continue;if(p<220&&x>20)return!1}return!0},t.encode=function(e,i,r,n,s,a){null==n&&(n=0),null==a&&(a=!1);for(var o=new Uint8Array(e[0].byteLength*e.length+100),h=[137,80,78,71,13,10,26,10],u=0;u<8;u++)o[u]=h[u];var l=8,c=t._bin,f=t.crc.crc,d=c.writeUint,m=c.writeUshort,p=c.writeASCII,g=t.encode.compressPNG(e,i,r,n,a);d(o,l,13),p(o,l+=4,"IHDR"),d(o,l+=4,i),d(o,l+=4,r),o[l+=4]=g.depth,o[++l]=g.ctype,o[++l]=0,o[++l]=0,o[++l]=0,d(o,++l,f(o,l-17,17)),d(o,l+=4,1),p(o,l+=4,"sRGB"),o[l+=4]=1,d(o,++l,f(o,l-5,5)),l+=4;var y=e.length>1;if(y&&(d(o,l,8),p(o,l+=4,"acTL"),d(o,l+=4,e.length),d(o,l+=4,0),d(o,l+=4,f(o,l-12,12)),l+=4),3==g.ctype){d(o,l,3*(A=g.plte.length)),p(o,l+=4,"PLTE"),l+=4;for(u=0;u<A;u++){var v=3*u,x=g.plte[u],_=255&x,b=x>>8&255,w=x>>16&255;o[l+v+0]=_,o[l+v+1]=b,o[l+v+2]=w}if(d(o,l+=3*A,f(o,l-3*A-4,3*A+4)),l+=4,g.gotAlpha){d(o,l,A),p(o,l+=4,"tRNS"),l+=4;for(u=0;u<A;u++)o[l+u]=g.plte[u]>>24&255;d(o,l+=A,f(o,l-A-4,A+4)),l+=4}}for(var z=0,M=0;M<g.frames.length;M++){var k=g.frames[M];y&&(d(o,l,26),p(o,l+=4,"fcTL"),d(o,l+=4,z++),d(o,l+=4,k.rect.width),d(o,l+=4,k.rect.height),d(o,l+=4,k.rect.x),d(o,l+=4,k.rect.y),m(o,l+=4,s[M]),m(o,l+=2,1e3),o[l+=2]=k.dispose,o[++l]=k.blend,d(o,++l,f(o,l-30,30)),l+=4);var A,S=k.cimg;d(o,l,(A=S.length)+(0==M?0:4));var B=l+=4;p(o,l,0==M?"IDAT":"fdAT"),l+=4,0!=M&&(d(o,l,z++),l+=4);for(u=0;u<A;u++)o[l+u]=S[u];d(o,l+=A,f(o,B,l-B)),l+=4}return d(o,l,0),p(o,l+=4,"IEND"),d(o,l+=4,f(o,l-4,4)),l+=4,o.buffer.slice(0,l)},t.encode.compressPNG=function(e,i,r,n,s){for(var a=t.encode.compress(e,i,r,n,!1,s),o=0;o<e.length;o++){var h=a.frames[o],u=(h.rect.width,h.rect.height),l=h.bpl,c=h.bpp,f=new Uint8Array(u*l+u);h.cimg=t.encode._filterZero(h.img,u,c,l,f)}return a},t.encode.compress=function(e,i,r,n,s,a){null==a&&(a=!1);for(var o=6,h=8,u=4,l=255,c=0;c<e.length;c++)for(var f=new Uint8Array(e[c]),d=f.length,m=0;m<d;m+=4)l&=f[m+3];var p=255!=l,g={},y=[];if(0!=e.length&&(g[0]=0,y.push(0),0!=n&&n--),0!=n){var v=t.quantize(e,n,s);e=v.bufs;for(m=0;m<v.plte.length;m++){null==g[_=v.plte[m].est.rgba]&&(g[_]=y.length,y.push(_))}}else for(c=0;c<e.length;c++){var x=new Uint32Array(e[c]);for(d=x.length,m=0;m<d;m++){var _=x[m];if((m<i||_!=x[m-1]&&_!=x[m-i])&&null==g[_]&&(g[_]=y.length,y.push(_),y.length>=300))break}}var b=!!p&&s,w=y.length;w<=256&&0==a&&(h=w<=2?1:w<=4?2:w<=16?4:8,s&&(h=8),p=!0);var z=[];for(c=0;c<e.length;c++){var M=new Uint8Array(e[c]),k=new Uint32Array(M.buffer),A=0,S=0,B=i,E=r,N=0;if(0!=c&&!b){for(var U=s||1==c||2==z[z.length-2].dispose?1:2,T=0,R=1e9,C=0;C<U;C++){for(var O=new Uint8Array(e[c-1-C]),I=new Uint32Array(e[c-1-C]),V=i,Z=r,F=-1,q=-1,D=0;D<r;D++)for(var P=0;P<i;P++){k[m=D*i+P]!=I[m]&&(P<V&&(V=P),P>F&&(F=P),D<Z&&(Z=D),D>q&&(q=D))}var j=-1==F?1:(F-V+1)*(q-Z+1);j<R&&(R=j,T=C,-1==F?(A=S=0,B=E=1):(A=V,S=Z,B=F-V+1,E=q-Z+1))}O=new Uint8Array(e[c-1-T]);1==T&&(z[z.length-1].dispose=2);var H=new Uint8Array(B*E*4);new Uint32Array(H.buffer);t._copyTile(O,i,r,H,B,E,-A,-S,0),t._copyTile(M,i,r,H,B,E,-A,-S,3)?(t._copyTile(M,i,r,H,B,E,-A,-S,2),N=1):(t._copyTile(M,i,r,H,B,E,-A,-S,0),N=0),M=H,k=new Uint32Array(M.buffer)}var L=4*B;if(w<=256&&0==a){L=Math.ceil(h*B/8);for(H=new Uint8Array(L*E),D=0;D<E;D++){m=D*L;var X=D*B;if(8==h)for(P=0;P<B;P++)H[m+P]=g[k[X+P]];else if(4==h)for(P=0;P<B;P++)H[m+(P>>1)]|=g[k[X+P]]<<4-4*(1&P);else if(2==h)for(P=0;P<B;P++)H[m+(P>>2)]|=g[k[X+P]]<<6-2*(3&P);else if(1==h)for(P=0;P<B;P++)H[m+(P>>3)]|=g[k[X+P]]<<7-1*(7&P)}M=H,o=3,u=1}else if(0==p&&1==e.length){H=new Uint8Array(B*E*3);var G=B*E;for(m=0;m<G;m++){var Y=3*m,W=4*m;H[Y]=M[W],H[Y+1]=M[W+1],H[Y+2]=M[W+2]}M=H,o=2,u=3,L=3*B}z.push({rect:{x:A,y:S,width:B,height:E},img:M,bpl:L,bpp:u,blend:N,dispose:b?1:0})}return{ctype:o,depth:h,plte:y,gotAlpha:p,frames:z}},t.encode._filterZero=function(i,r,n,s,a){for(var o=[],h=0;h<5;h++)if(!(r*s>5e5)||2!=h&&3!=h&&4!=h){for(var u=0;u<r;u++)t.encode._filterLine(a,i,u,s,n,h);if(o.push(e.deflate(a)),1==n)break}for(var l,c=1e9,f=0;f<o.length;f++)o[f].length<c&&(l=f,c=o[f].length);return o[l]},t.encode._filterLine=function(e,i,r,n,s,a){var o=r*n,h=o+r,u=t.decode._paeth;if(e[h]=a,h++,0==a)for(var l=0;l<n;l++)e[h+l]=i[o+l];else if(1==a){for(l=0;l<s;l++)e[h+l]=i[o+l];for(l=s;l<n;l++)e[h+l]=i[o+l]-i[o+l-s]+256&255}else if(0==r){for(l=0;l<s;l++)e[h+l]=i[o+l];if(2==a)for(l=s;l<n;l++)e[h+l]=i[o+l];if(3==a)for(l=s;l<n;l++)e[h+l]=i[o+l]-(i[o+l-s]>>1)+256&255;if(4==a)for(l=s;l<n;l++)e[h+l]=i[o+l]-u(i[o+l-s],0,0)+256&255}else{if(2==a)for(l=0;l<n;l++)e[h+l]=i[o+l]+256-i[o+l-n]&255;if(3==a){for(l=0;l<s;l++)e[h+l]=i[o+l]+256-(i[o+l-n]>>1)&255;for(l=s;l<n;l++)e[h+l]=i[o+l]+256-(i[o+l-n]+i[o+l-s]>>1)&255}if(4==a){for(l=0;l<s;l++)e[h+l]=i[o+l]+256-u(0,i[o+l-n],0)&255;for(l=s;l<n;l++)e[h+l]=i[o+l]+256-u(i[o+l-s],i[o+l-n],i[o+l-s-n])&255}}},t.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,r=0;r<8;r++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(e,i,r,n){for(var s=0;s<n;s++)e=t.crc.table[255&(e^i[r+s])]^e>>>8;return e},crc:function(e,i,r){return 4294967295^t.crc.update(4294967295,e,i,r)}},t.quantize=function(e,i,r){for(var n=[],s=0,a=0;a<e.length;a++)n.push(t.encode.alphaMul(new Uint8Array(e[a]),r)),s+=e[a].byteLength;var o=new Uint8Array(s),h=new Uint32Array(o.buffer),u=0;for(a=0;a<n.length;a++){for(var l=n[a],c=l.length,f=0;f<c;f++)o[u+f]=l[f];u+=c}var d={i0:0,i1:o.length,bst:null,est:null,tdst:0,left:null,right:null};d.bst=t.quantize.stats(o,d.i0,d.i1),d.est=t.quantize.estats(d.bst);for(var m=[d];m.length<i;){var p=0,g=0;for(a=0;a<m.length;a++)m[a].est.L>p&&(p=m[a].est.L,g=a);if(p<.001)break;var y=m[g],v=t.quantize.splitPixels(o,h,y.i0,y.i1,y.est.e,y.est.eMq255),x={i0:y.i0,i1:v,bst:null,est:null,tdst:0,left:null,right:null};x.bst=t.quantize.stats(o,x.i0,x.i1),x.est=t.quantize.estats(x.bst);var _={i0:v,i1:y.i1,bst:null,est:null,tdst:0,left:null,right:null};_.bst={R:[],m:[],N:y.bst.N-x.bst.N};for(a=0;a<16;a++)_.bst.R[a]=y.bst.R[a]-x.bst.R[a];for(a=0;a<4;a++)_.bst.m[a]=y.bst.m[a]-x.bst.m[a];_.est=t.quantize.estats(_.bst),y.left=x,y.right=_,m[g]=x,m.push(_)}m.sort((function(t,e){return e.bst.N-t.bst.N}));for(var b=0;b<n.length;b++){var w=t.quantize.planeDst,z=new Uint8Array(n[b].buffer),M=new Uint32Array(n[b].buffer),k=z.length;for(a=0;a<k;a+=4){for(var A=z[a]*(1/255),S=z[a+1]*(1/255),B=z[a+2]*(1/255),E=z[a+3]*(1/255),N=d;N.left;)N=w(N.est,A,S,B,E)<=0?N.left:N.right;M[a>>2]=N.est.rgba}n[b]=M.buffer}return{bufs:n,plte:m}},t.quantize.getNearest=function(e,i,r,n,s){if(null==e.left)return e.tdst=t.quantize.dist(e.est.q,i,r,n,s),e;var a=t.quantize.planeDst(e.est,i,r,n,s),o=e.left,h=e.right;a>0&&(o=e.right,h=e.left);var u=t.quantize.getNearest(o,i,r,n,s);if(u.tdst<=a*a)return u;var l=t.quantize.getNearest(h,i,r,n,s);return l.tdst<u.tdst?l:u},t.quantize.planeDst=function(t,e,i,r,n){var s=t.e;return s[0]*e+s[1]*i+s[2]*r+s[3]*n-t.eMq},t.quantize.dist=function(t,e,i,r,n){var s=e-t[0],a=i-t[1],o=r-t[2],h=n-t[3];return s*s+a*a+o*o+h*h},t.quantize.splitPixels=function(e,i,r,n,s,a){var o=t.quantize.vecDot;n-=4;for(;r<n;){for(;o(e,r,s)<=a;)r+=4;for(;o(e,n,s)>a;)n-=4;if(r>=n)break;var h=i[r>>2];i[r>>2]=i[n>>2],i[n>>2]=h,r+=4,n-=4}for(;o(e,r,s)>a;)r-=4;return r+4},t.quantize.vecDot=function(t,e,i){return t[e]*i[0]+t[e+1]*i[1]+t[e+2]*i[2]+t[e+3]*i[3]},t.quantize.stats=function(t,e,i){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],s=i-e>>2,a=e;a<i;a+=4){var o=t[a]*(1/255),h=t[a+1]*(1/255),u=t[a+2]*(1/255),l=t[a+3]*(1/255);n[0]+=o,n[1]+=h,n[2]+=u,n[3]+=l,r[0]+=o*o,r[1]+=o*h,r[2]+=o*u,r[3]+=o*l,r[5]+=h*h,r[6]+=h*u,r[7]+=h*l,r[10]+=u*u,r[11]+=u*l,r[15]+=l*l}return r[4]=r[1],r[8]=r[2],r[12]=r[3],r[9]=r[6],r[13]=r[7],r[14]=r[11],{R:r,m:n,N:s}},t.quantize.estats=function(e){var i=e.R,r=e.m,n=e.N,s=r[0],a=r[1],o=r[2],h=r[3],u=0==n?0:1/n,l=[i[0]-s*s*u,i[1]-s*a*u,i[2]-s*o*u,i[3]-s*h*u,i[4]-a*s*u,i[5]-a*a*u,i[6]-a*o*u,i[7]-a*h*u,i[8]-o*s*u,i[9]-o*a*u,i[10]-o*o*u,i[11]-o*h*u,i[12]-h*s*u,i[13]-h*a*u,i[14]-h*o*u,i[15]-h*h*u],c=l,f=t.M4,d=[.5,.5,.5,.5],m=0,p=0;if(0!=n)for(var g=0;g<10&&(d=f.multVec(c,d),p=Math.sqrt(f.dot(d,d)),d=f.sml(1/p,d),!(Math.abs(p-m)<1e-9));g++)m=p;var y=[s*u,a*u,o*u,h*u],v=f.dot(f.sml(255,y),d),x=y[3]<.001?0:1/y[3];return{Cov:l,q:y,e:d,L:m,eMq255:v,eMq:f.dot(d,y),rgba:(Math.round(255*y[3])<<24|Math.round(255*y[2]*x)<<16|Math.round(255*y[1]*x)<<8|Math.round(255*y[0]*x)<<0)>>>0}},t.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},t.encode.alphaMul=function(t,e){for(var i=new Uint8Array(t.length),r=t.length>>2,n=0;n<r;n++){var s=n<<2,a=t[s+3];e&&(a=a<128?0:255);var o=a*(1/255);i[s+0]=t[s+0]*o,i[s+1]=t[s+1]*o,i[s+2]=t[s+2]*o,i[s+3]=a}return i}}(e,i(9))}()}).call(this,i(8))},function(t,e,i){"use strict";t.exports=function(t,e,i,r){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{s=s+(n=n+e[r++]|0)|0}while(--a);n%=65521,s%=65521}return n|s<<16|0}},function(t,e,i){"use strict";var r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,n){var s=r,a=n+i;t^=-1;for(var o=n;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},function(t,e,i){"use strict";var r=i(0),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(u){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){s=!1}for(var a=new r.Buf8(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",a=0;a<e;a++)i+=String.fromCharCode(t[a]);return i}a[254]=a[254]=1,e.string2buf=function(t){var e,i,n,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296===(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320===(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new r.Buf8(h),a=0,s=0;a<h;s++)55296===(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320===(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[a++]=i:i<2048?(e[a++]=192|i>>>6,e[a++]=128|63&i):i<65536?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,r,n,s,o=e||t.length,u=new Array(2*o);for(r=0,i=0;i<o;)if((n=t[i++])<128)u[r++]=n;else if((s=a[n])>4)u[r++]=65533,i+=s-1;else{for(n&=2===s?31:3===s?15:7;s>1&&i<o;)n=n<<6|63&t[i++],s--;s>1?u[r++]=65533:n<65536?u[r++]=n:(n-=65536,u[r++]=55296|n>>10&1023,u[r++]=56320|1023&n)}return h(u,r)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return i<0||0===i?e:i+a[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"===typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=o(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||l||o(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var r={};(0,i(0).assign)(r,i(10),i(13),i(7)),t.exports=r},function(t,e,i){"use strict";var r=i(11),n=i(0),s=i(5),a=i(1),o=i(6),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==i)throw new Error(a[i]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"===typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(i=r.deflateSetDictionary(this.strm,l)))throw new Error(a[i]);this._dict_set=!0}}function l(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}u.prototype.push=function(t,e){var i,a,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"===typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new n.Buf8(u),o.next_out=0,o.avail_out=u),1!==(i=r.deflate(o,a))&&0!==i)return this.onEnd(i),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(n.shrinkBuf(o.output,o.next_out))):this.onData(n.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==i);return 4===a?(i=r.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==a||(this.onEnd(0),o.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=l,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},function(t,e,i){"use strict";var r,n=i(0),s=i(12),a=i(3),o=i(4),h=i(1);function u(t,e){return t.msg=h[e],e}function l(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function d(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function m(t,e){t.pending_buf[t.pending++]=e}function p(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function g(t,e,i,r){var s=t.avail_in;return s>r&&(s=r),0===s?0:(t.avail_in-=s,n.arraySet(e,t.input,t.next_in,s,i),1===t.state.wrap?t.adler=a(t.adler,e,s,i):2===t.state.wrap&&(t.adler=o(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)}function y(t,e){var i,r,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+258,d=u[s+a-1],m=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(i=e)+a]===m&&u[i+a-1]===d&&u[i]===u[s]&&u[++i]===u[s+1]){s+=2,i++;do{}while(u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&s<f);if(r=258-(f-s),s=f-258,r>a){if(t.match_start=e,a=r,r>=o)break;d=u[s+a-1],m=u[s+a]}}}while((e=c[e&l])>h&&0!==--n);return a<=t.lookahead?a:t.lookahead}function v(t){var e,i,r,s,a,o=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-262)){n.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=i=t.hash_size;do{r=t.head[--e],t.head[e]=r>=o?r-o:0}while(--i);e=i=o;do{r=t.prev[--e],t.prev[e]=r>=o?r-o:0}while(--i);s+=o}if(0===t.strm.avail_in)break;if(i=g(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=3)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+3-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function x(t,e){for(var i,r;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=y(t,i)),t.match_length>=3)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var i,r,n;;){if(t.lookahead<262){if(v(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=y(t,i),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,i,r,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=n}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):u(t,-2)}function M(t){var e,i=z(t);return 0===i&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i}function k(t,e,i,r,s,a){if(!t)return-2;var o=1;if(-1===e&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>9||8!==i||r<8||r>15||e<0||e>9||a<0||a>4)return u(t,-2);8===r&&(r=9);var h=new w;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new n.Buf8(2*h.w_size),h.head=new n.Buf16(h.hash_size),h.prev=new n.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new n.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=i,M(t)}r=[new b(0,0,0,0,(function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,x),new b(4,5,16,8,x),new b(4,6,32,32,x),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],e.deflateInit=function(t,e){return k(t,e,8,15,8,0)},e.deflateInit2=k,e.deflateReset=M,e.deflateResetKeep=z,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var i,n,a,h;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(n.strm=t,i=n.last_flush,n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,m(n,31),m(n,139),m(n,8),n.gzhead?(m(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),m(n,255&n.gzhead.time),m(n,n.gzhead.time>>8&255),m(n,n.gzhead.time>>16&255),m(n,n.gzhead.time>>24&255),m(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),m(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(m(n,255&n.gzhead.extra.length),m(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=o(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(m(n,0),m(n,0),m(n,0),m(n,0),m(n,0),m(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),m(n,3),n.status=113);else{var g=8+(n.w_bits-8<<4)<<8;g|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(g|=32),g+=31-g%31,n.status=113,p(n,g),0!==n.strstart&&(p(n,t.adler>>>16),p(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),f(t),a=n.pending,n.pending!==n.pending_buf_size));)m(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),f(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,m(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),f(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,m(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&f(t),n.pending+2<=n.pending_buf_size&&(m(n,255&t.adler),m(n,t.adler>>8&255),t.adler=0,n.status=113)):n.status=113),0!==n.pending){if(f(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&l(e)<=l(i)&&4!==e)return u(t,-5);if(666===n.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==e&&666!==n.status){var y=2===n.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(n,e):3===n.strategy?function(t,e){for(var i,r,n,a,o=t.window;;){if(t.lookahead<=258){if(v(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=o[n=t.strstart-1])===o[++n]&&r===o[++n]&&r===o[++n]){a=t.strstart+258;do{}while(r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&n<a);t.match_length=258-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(n,e):r[n.level].func(n,e);if(3!==y&&4!==y||(n.status=666),1===y||3===y)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===y&&(1===e?s._tr_align(n):5!==e&&(s._tr_stored_block(n,0,0,!1),3===e&&(c(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),f(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==e?0:n.wrap<=0?1:(2===n.wrap?(m(n,255&t.adler),m(n,t.adler>>8&255),m(n,t.adler>>16&255),m(n,t.adler>>24&255),m(n,255&t.total_in),m(n,t.total_in>>8&255),m(n,t.total_in>>16&255),m(n,t.total_in>>24&255)):(p(n,t.adler>>>16),p(n,65535&t.adler)),f(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var i,r,s,o,h,u,l,f,d=e.length;if(!t||!t.state)return-2;if(2===(o=(i=t.state).wrap)||1===o&&42!==i.status||i.lookahead)return-2;for(1===o&&(t.adler=a(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===o&&(c(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new n.Buf8(i.w_size),n.arraySet(f,e,d-i.w_size,i.w_size,0),e=f,d=i.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,v(i);i.lookahead>=3;){r=i.strstart,s=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+3-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--s);i.strstart=r,i.lookahead=2,v(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,i.wrap=o,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var r=i(0);function n(t){for(var e=t.length;--e>=0;)t[e]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);n(u);var l=new Array(60);n(l);var c=new Array(512);n(c);var f=new Array(256);n(f);var d=new Array(29);n(d);var m,p,g,y=new Array(30);function v(t,e,i,r,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=t&&t.length}function x(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function _(t){return t<256?c[t]:c[256+(t>>>7)]}function b(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function w(t,e,i){t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function z(t,e,i){w(t,i[2*e],i[2*e+1])}function M(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function k(t,e,i){var r,n,s=new Array(16),a=0;for(r=1;r<=15;r++)s[r]=a=a+i[r-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=M(s[o]++,o))}}function A(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function S(t){t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function B(t,e,i,r){var n=2*e,s=2*i;return t[n]<t[s]||t[n]===t[s]&&r[e]<=r[i]}function E(t,e,i){for(var r=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&B(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!B(e,r,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=r}function N(t,e,i){var r,n,o,h,u=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],n=t.pending_buf[t.l_buf+u],u++,0===r?z(t,n,e):(z(t,(o=f[n])+256+1,e),0!==(h=s[o])&&w(t,n-=d[o],h),z(t,o=_(--r),i),0!==(h=a[o])&&w(t,r-=y[o],h))}while(u<t.last_lit);z(t,256,e)}function U(t,e){var i,r,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)E(t,s,i);n=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,s[2*n]=s[2*i]+s[2*r],t.depth[n]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,s[2*i+1]=s[2*r+1]=n,t.heap[1]=n++,E(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,r,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(s=h[2*h[2*(r=t.heap[i])+1]+1]+1)>m&&(s=m,p++),h[2*r+1]=s,r>u||(t.bl_count[s]++,a=0,r>=d&&(a=f[r-d]),o=h[2*r],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(l[2*r+1]+a)));if(0!==p){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(s=m;0!==s;s--)for(r=t.bl_count[s];0!==r;)(n=t.heap[--i])>u||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),r--)}}(t,e),k(s,u,t.bl_count)}function T(t,e,i){var r,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)n=a,a=e[2*(r+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===a?(h=138,u=3):n===a?(h=6,u=3):(h=7,u=4))}function R(t,e,i){var r,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),r=0;r<=i;r++)if(n=a,a=e[2*(r+1)+1],!(++o<h&&n===a)){if(o<u)do{z(t,n,t.bl_tree)}while(0!==--o);else 0!==n?(n!==s&&(z(t,n,t.bl_tree),o--),z(t,16,t.bl_tree),w(t,o-3,2)):o<=10?(z(t,17,t.bl_tree),w(t,o-3,3)):(z(t,18,t.bl_tree),w(t,o-11,7));o=0,s=n,0===a?(h=138,u=3):n===a?(h=6,u=3):(h=7,u=4)}}n(y);var C=!1;function O(t,e,i,n){w(t,0+(n?1:0),3),function(t,e,i,n){S(t),n&&(b(t,i),b(t,~i)),r.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){C||(!function(){var t,e,i,r,n,h=new Array(16);for(i=0,r=0;r<28;r++)for(d[r]=i,t=0;t<1<<s[r];t++)f[i++]=r;for(f[i-1]=r,n=0,r=0;r<16;r++)for(y[r]=n,t=0;t<1<<a[r];t++)c[n++]=r;for(n>>=7;r<30;r++)for(y[r]=n<<7,t=0;t<1<<a[r]-7;t++)c[256+n++]=r;for(e=0;e<=15;e++)h[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,h[8]++;for(;t<=255;)u[2*t+1]=9,t++,h[9]++;for(;t<=279;)u[2*t+1]=7,t++,h[7]++;for(;t<=287;)u[2*t+1]=8,t++,h[8]++;for(k(u,287,h),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=M(t,5);m=new v(u,s,257,286,15),p=new v(l,a,0,30,15),g=new v(new Array(0),o,0,19,7)}(),C=!0),t.l_desc=new x(t.dyn_ltree,m),t.d_desc=new x(t.dyn_dtree,p),t.bl_desc=new x(t.bl_tree,g),t.bi_buf=0,t.bi_valid=0,A(t)},e._tr_stored_block=O,e._tr_flush_block=function(t,e,i,r){var n,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),U(t,t.l_desc),U(t,t.d_desc),a=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),U(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=i+5,i+4<=n&&-1!==e?O(t,e,i,r):4===t.strategy||s===n?(w(t,2+(r?1:0),3),N(t,u,l)):(w(t,4+(r?1:0),3),function(t,e,i,r){var n;for(w(t,e-257,5),w(t,i-1,5),w(t,r-4,4),n=0;n<r;n++)w(t,t.bl_tree[2*h[n]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),N(t,t.dyn_ltree,t.dyn_dtree)),A(t),r&&S(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(f[i]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){w(t,2,3),z(t,256,u),function(t){16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var r=i(14),n=i(0),s=i(5),a=i(7),o=i(1),h=i(6),u=i(17),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,e.windowBits);if(i!==a.Z_OK)throw new Error(o[i]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=r.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(o[i])}function f(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}c.prototype.push=function(t,e){var i,o,h,u,c,f=this.strm,d=this.options.chunkSize,m=this.options.dictionary,p=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"===typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new n.Buf8(d),f.next_out=0,f.avail_out=d),(i=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(i=r.inflateSetDictionary(this.strm,m)),i===a.Z_BUF_ERROR&&!0===p&&(i=a.Z_OK,p=!1),i!==a.Z_STREAM_END&&i!==a.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(f.output,f.next_out),u=f.next_out-h,c=s.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&n.arraySet(f.output,f.output,h,u,0),this.onData(c)):this.onData(n.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==a.Z_STREAM_END);return i===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,i){"use strict";var r=i(0),n=i(3),s=i(4),a=i(15),o=i(16);function h(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):-2}function f(t,e){var i,r;return t&&t.state?(r=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,c(t))):-2}function d(t,e){var i,r;return t?(r=new u,t.state=r,r.window=null,0!==(i=f(t,e))&&(t.state=null),i):-2}var m,p,g=!0;function y(t){if(g){var e;for(m=new r.Buf32(512),p=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,p,0,t.work,{bits:5}),g=!1}t.lencode=m,t.lenbits=9,t.distcode=p,t.distbits=5}function v(t,e,i,n){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),n>=a.wsize?(r.arraySet(a.window,e,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>n&&(s=n),r.arraySet(a.window,e,i-n,s,a.wnext),(n-=s)?(r.arraySet(a.window,e,i-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}e.inflateReset=c,e.inflateReset2=f,e.inflateResetKeep=l,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var i,u,l,c,f,d,m,p,g,x,_,b,w,z,M,k,A,S,B,E,N,U,T,R,C=0,O=new r.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(i=t.state).mode&&(i.mode=13),f=t.next_out,l=t.output,m=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,p=i.hold,g=i.bits,x=d,_=m,U=0;t:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;g<16;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(2&i.wrap&&35615===p){i.check=0,O[0]=255&p,O[1]=p>>>8&255,i.check=s(i.check,O,2,0),p=0,g=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&p)<<8)+(p>>8))%31){t.msg="incorrect header check",i.mode=30;break}if(8!==(15&p)){t.msg="unknown compression method",i.mode=30;break}if(g-=4,N=8+(15&(p>>>=4)),0===i.wbits)i.wbits=N;else if(N>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<N,t.adler=i.check=1,i.mode=512&p?10:12,p=0,g=0;break;case 2:for(;g<16;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(i.flags=p,8!==(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=p>>8&1),512&i.flags&&(O[0]=255&p,O[1]=p>>>8&255,i.check=s(i.check,O,2,0)),p=0,g=0,i.mode=3;case 3:for(;g<32;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.head&&(i.head.time=p),512&i.flags&&(O[0]=255&p,O[1]=p>>>8&255,O[2]=p>>>16&255,O[3]=p>>>24&255,i.check=s(i.check,O,4,0)),p=0,g=0,i.mode=4;case 4:for(;g<16;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.head&&(i.head.xflags=255&p,i.head.os=p>>8),512&i.flags&&(O[0]=255&p,O[1]=p>>>8&255,i.check=s(i.check,O,2,0)),p=0,g=0,i.mode=5;case 5:if(1024&i.flags){for(;g<16;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.length=p,i.head&&(i.head.extra_len=p),512&i.flags&&(O[0]=255&p,O[1]=p>>>8&255,i.check=s(i.check,O,2,0)),p=0,g=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((b=i.length)>d&&(b=d),b&&(i.head&&(N=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,u,c,b,N)),512&i.flags&&(i.check=s(i.check,u,b,c)),d-=b,c+=b,i.length-=b),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===d)break t;b=0;do{N=u[c+b++],i.head&&N&&i.length<65536&&(i.head.name+=String.fromCharCode(N))}while(N&&b<d);if(512&i.flags&&(i.check=s(i.check,u,b,c)),d-=b,c+=b,N)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===d)break t;b=0;do{N=u[c+b++],i.head&&N&&i.length<65536&&(i.head.comment+=String.fromCharCode(N))}while(N&&b<d);if(512&i.flags&&(i.check=s(i.check,u,b,c)),d-=b,c+=b,N)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;g<16;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(p!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}p=0,g=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;g<32;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}t.adler=i.check=h(p),p=0,g=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=f,t.avail_out=m,t.next_in=c,t.avail_in=d,i.hold=p,i.bits=g,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last){p>>>=7&g,g-=7&g,i.mode=27;break}for(;g<3;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}switch(i.last=1&p,g-=1,3&(p>>>=1)){case 0:i.mode=14;break;case 1:if(y(i),i.mode=20,6===e){p>>>=2,g-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}p>>>=2,g-=2;break;case 14:for(p>>>=7&g,g-=7&g;g<32;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if((65535&p)!==(p>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&p,p=0,g=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(b=i.length){if(b>d&&(b=d),b>m&&(b=m),0===b)break t;r.arraySet(l,u,c,b,f),d-=b,c+=b,m-=b,f+=b,i.length-=b;break}i.mode=12;break;case 17:for(;g<14;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(i.nlen=257+(31&p),p>>>=5,g-=5,i.ndist=1+(31&p),p>>>=5,g-=5,i.ncode=4+(15&p),p>>>=4,g-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;g<3;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.lens[I[i.have++]]=7&p,p>>>=3,g-=3}for(;i.have<19;)i.lens[I[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,T={bits:i.lenbits},U=o(0,i.lens,0,19,i.lencode,0,i.work,T),i.lenbits=T.bits,U){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;k=(C=i.lencode[p&(1<<i.lenbits)-1])>>>16&255,A=65535&C,!((M=C>>>24)<=g);){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(A<16)p>>>=M,g-=M,i.lens[i.have++]=A;else{if(16===A){for(R=M+2;g<R;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(p>>>=M,g-=M,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}N=i.lens[i.have-1],b=3+(3&p),p>>>=2,g-=2}else if(17===A){for(R=M+3;g<R;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}g-=M,N=0,b=3+(7&(p>>>=M)),p>>>=3,g-=3}else{for(R=M+7;g<R;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}g-=M,N=0,b=11+(127&(p>>>=M)),p>>>=7,g-=7}if(i.have+b>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;b--;)i.lens[i.have++]=N}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,T={bits:i.lenbits},U=o(1,i.lens,0,i.nlen,i.lencode,0,i.work,T),i.lenbits=T.bits,U){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,T={bits:i.distbits},U=o(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,T),i.distbits=T.bits,U){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(d>=6&&m>=258){t.next_out=f,t.avail_out=m,t.next_in=c,t.avail_in=d,i.hold=p,i.bits=g,a(t,_),f=t.next_out,l=t.output,m=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,p=i.hold,g=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;k=(C=i.lencode[p&(1<<i.lenbits)-1])>>>16&255,A=65535&C,!((M=C>>>24)<=g);){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(k&&0===(240&k)){for(S=M,B=k,E=A;k=(C=i.lencode[E+((p&(1<<S+B)-1)>>S)])>>>16&255,A=65535&C,!(S+(M=C>>>24)<=g);){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}p>>>=S,g-=S,i.back+=S}if(p>>>=M,g-=M,i.back+=M,i.length=A,0===k){i.mode=26;break}if(32&k){i.back=-1,i.mode=12;break}if(64&k){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&k,i.mode=22;case 22:if(i.extra){for(R=i.extra;g<R;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.length+=p&(1<<i.extra)-1,p>>>=i.extra,g-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;k=(C=i.distcode[p&(1<<i.distbits)-1])>>>16&255,A=65535&C,!((M=C>>>24)<=g);){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(0===(240&k)){for(S=M,B=k,E=A;k=(C=i.distcode[E+((p&(1<<S+B)-1)>>S)])>>>16&255,A=65535&C,!(S+(M=C>>>24)<=g);){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}p>>>=S,g-=S,i.back+=S}if(p>>>=M,g-=M,i.back+=M,64&k){t.msg="invalid distance code",i.mode=30;break}i.offset=A,i.extra=15&k,i.mode=24;case 24:if(i.extra){for(R=i.extra;g<R;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}i.offset+=p&(1<<i.extra)-1,p>>>=i.extra,g-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===m)break t;if(b=_-m,i.offset>b){if((b=i.offset-b)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}b>i.wnext?(b-=i.wnext,w=i.wsize-b):w=i.wnext-b,b>i.length&&(b=i.length),z=i.window}else z=l,w=f-i.offset,b=i.length;b>m&&(b=m),m-=b,i.length-=b;do{l[f++]=z[w++]}while(--b);0===i.length&&(i.mode=21);break;case 26:if(0===m)break t;l[f++]=i.length,m--,i.mode=21;break;case 27:if(i.wrap){for(;g<32;){if(0===d)break t;d--,p|=u[c++]<<g,g+=8}if(_-=m,t.total_out+=_,i.total+=_,_&&(t.adler=i.check=i.flags?s(i.check,l,_,f-_):n(i.check,l,_,f-_)),_=m,(i.flags?p:h(p))!==i.check){t.msg="incorrect data check",i.mode=30;break}p=0,g=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;g<32;){if(0===d)break t;d--,p+=u[c++]<<g,g+=8}if(p!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}p=0,g=0}i.mode=29;case 29:U=1;break t;case 30:U=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=m,t.next_in=c,t.avail_in=d,i.hold=p,i.bits=g,(i.wsize||_!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&v(t,t.output,t.next_out,_-t.avail_out)?(i.mode=31,-4):(x-=t.avail_in,_-=t.avail_out,t.total_in+=x,t.total_out+=_,i.total+=_,i.wrap&&_&&(t.adler=i.check=i.flags?s(i.check,l,_,t.next_out-_):n(i.check,l,_,t.next_out-_)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===x&&0===_||4===e)&&0===U&&(U=-5),U)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0===(2&(i=t.state).wrap)?-2:(i.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var i,r=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?-2:11===i.mode&&n(1,e,r,0)!==i.check?-3:v(t,e,r,r)?(i.mode=31,-4):(i.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,r,n,s,a,o,h,u,l,c,f,d,m,p,g,y,v,x,_,b,w,z,M,k,A;i=t.state,r=t.next_in,k=t.input,n=r+(t.avail_in-5),s=t.next_out,A=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=i.dmax,u=i.wsize,l=i.whave,c=i.wnext,f=i.window,d=i.hold,m=i.bits,p=i.lencode,g=i.distcode,y=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{m<15&&(d+=k[r++]<<m,m+=8,d+=k[r++]<<m,m+=8),x=p[d&y];e:for(;;){if(d>>>=_=x>>>24,m-=_,0===(_=x>>>16&255))A[s++]=65535&x;else{if(!(16&_)){if(0===(64&_)){x=p[(65535&x)+(d&(1<<_)-1)];continue e}if(32&_){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}b=65535&x,(_&=15)&&(m<_&&(d+=k[r++]<<m,m+=8),b+=d&(1<<_)-1,d>>>=_,m-=_),m<15&&(d+=k[r++]<<m,m+=8,d+=k[r++]<<m,m+=8),x=g[d&v];i:for(;;){if(d>>>=_=x>>>24,m-=_,!(16&(_=x>>>16&255))){if(0===(64&_)){x=g[(65535&x)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(w=65535&x,m<(_&=15)&&(d+=k[r++]<<m,(m+=8)<_&&(d+=k[r++]<<m,m+=8)),(w+=d&(1<<_)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=_,m-=_,w>(_=s-a)){if((_=w-_)>l&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(z=0,M=f,0===c){if(z+=u-_,_<b){b-=_;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}}else if(c<_){if(z+=u+c-_,(_-=c)<b){b-=_;do{A[s++]=f[z++]}while(--_);if(z=0,c<b){b-=_=c;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}}}else if(z+=c-_,_<b){b-=_;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}for(;b>2;)A[s++]=M[z++],A[s++]=M[z++],A[s++]=M[z++],b-=3;b&&(A[s++]=M[z++],b>1&&(A[s++]=M[z++]))}else{z=s-w;do{A[s++]=A[z++],A[s++]=A[z++],A[s++]=A[z++],b-=3}while(b>2);b&&(A[s++]=A[z++],b>1&&(A[s++]=A[z++]))}break}}break}}while(r<n&&s<o);r-=b=m>>3,d&=(1<<(m-=b<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<o?o-s+257:257-(s-o),i.hold=d,i.bits=m}},function(t,e,i){"use strict";var r=i(0),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,u,l,c,f){var d,m,p,g,y,v,x,_,b,w=f.bits,z=0,M=0,k=0,A=0,S=0,B=0,E=0,N=0,U=0,T=0,R=null,C=0,O=new r.Buf16(16),I=new r.Buf16(16),V=null,Z=0;for(z=0;z<=15;z++)O[z]=0;for(M=0;M<h;M++)O[e[i+M]]++;for(S=w,A=15;A>=1&&0===O[A];A--);if(S>A&&(S=A),0===A)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(k=1;k<A&&0===O[k];k++);for(S<k&&(S=k),N=1,z=1;z<=15;z++)if(N<<=1,(N-=O[z])<0)return-1;if(N>0&&(0===t||1!==A))return-1;for(I[1]=0,z=1;z<15;z++)I[z+1]=I[z]+O[z];for(M=0;M<h;M++)0!==e[i+M]&&(c[I[e[i+M]]++]=M);if(0===t?(R=V=c,v=19):1===t?(R=n,C-=257,V=s,Z-=257,v=256):(R=a,V=o,v=-1),T=0,M=0,z=k,y=l,B=S,E=0,p=-1,g=(U=1<<S)-1,1===t&&U>852||2===t&&U>592)return 1;for(;;){x=z-E,c[M]<v?(_=0,b=c[M]):c[M]>v?(_=V[Z+c[M]],b=R[C+c[M]]):(_=96,b=0),d=1<<z-E,k=m=1<<B;do{u[y+(T>>E)+(m-=d)]=x<<24|_<<16|b|0}while(0!==m);for(d=1<<z-1;T&d;)d>>=1;if(0!==d?(T&=d-1,T+=d):T=0,M++,0===--O[z]){if(z===A)break;z=e[i+c[M]]}if(z>S&&(T&g)!==p){for(0===E&&(E=S),y+=k,N=1<<(B=z-E);B+E<A&&!((N-=O[B+E])<=0);)B++,N<<=1;if(U+=1<<B,1===t&&U>852||2===t&&U>592)return 1;u[p=T&g]=S<<24|B<<16|y-l|0}}return 0!==T&&(u[y+T]=z-E<<24|64<<16|0),f.bits=S,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,i){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],r=!0,n=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(h){n=!0,s=h}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return i}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i.r(e);for(var s=i(2),a=i.n(s),o=[],h=0;h<256;h++)o[h]=(h<16?"0":"")+h.toString(16);var u={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+"-"+o[255&e]+o[e>>8&255]+"-"+o[e>>16&15|64]+o[e>>24&255]+"-"+o[63&i|128]+o[i>>8&255]+"-"+o[i>>16&255]+o[i>>24&255]+o[255&r]+o[r>>8&255]+o[r>>16&255]+o[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*u.DEG2RAD},radToDeg:function(t){return t*u.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var s=Math.cos,a=Math.sin,o=s(i/2),h=a(i/2),u=s((e+r)/2),l=a((e+r)/2),c=s((e-r)/2),f=a((e-r)/2),d=s((r-e)/2),m=a((r-e)/2);switch(n){case"XYX":t.set(o*l,h*c,h*f,o*u);break;case"YZY":t.set(h*f,o*l,h*c,o*u);break;case"ZXZ":t.set(h*c,h*f,o*l,o*u);break;case"XZX":t.set(o*l,h*m,h*d,o*u);break;case"YXY":t.set(h*d,o*l,h*m,o*u);break;case"ZYZ":t.set(h*m,h*d,o*l,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}};function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._x=t,this._y=e,this._z=i,this._w=r}Object.assign(l,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,s,a){var o=i[r+0],h=i[r+1],u=i[r+2],l=i[r+3],c=n[s+0],f=n[s+1],d=n[s+2],m=n[s+3];if(l!==m||o!==c||h!==f||u!==d){var p=1-a,g=o*c+h*f+u*d+l*m,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var x=Math.sqrt(v),_=Math.atan2(x,g*y);p=Math.sin(p*_)/x,a=Math.sin(a*_)/x}var b=a*y;if(o=o*p+c*b,h=h*p+f*b,u=u*p+d*b,l=l*p+m*b,p===1-a){var w=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=w,h*=w,u*=w,l*=w}}t[e]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l},multiplyQuaternionsFlat:function(t,e,i,r,n,s){var a=i[r],o=i[r+1],h=i[r+2],u=i[r+3],l=n[s],c=n[s+1],f=n[s+2],d=n[s+3];return t[e]=a*d+u*l+o*f-h*c,t[e+1]=o*d+u*c+h*l-a*f,t[e+2]=h*d+u*f+a*c-o*l,t[e+3]=u*d-a*l-o*c-h*f,t}}),Object.defineProperties(l.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(l.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,r=t._y,n=t._z,s=t.order,a=Math.cos,o=Math.sin,h=a(i/2),u=a(r/2),l=a(n/2),c=o(i/2),f=o(r/2),d=o(n/2);switch(s){case"XYZ":this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d;break;case"YXZ":this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d;break;case"ZXY":this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d;break;case"ZYX":this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d;break;case"YZX":this._x=c*u*l+h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l-c*f*d;break;case"XZY":this._x=c*u*l-h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l+c*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0],r=e[4],n=e[8],s=e[1],a=e[5],o=e[9],h=e[2],u=e[6],l=e[10],c=i+a+l;if(c>0){var f=.5/Math.sqrt(c+1);this._w=.25/f,this._x=(u-o)*f,this._y=(n-h)*f,this._z=(s-r)*f}else if(i>a&&i>l){var d=2*Math.sqrt(1+i-a-l);this._w=(u-o)/d,this._x=.25*d,this._y=(r+s)/d,this._z=(n+h)/d}else if(a>l){var m=2*Math.sqrt(1+a-i-l);this._w=(n-h)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(o+u)/m}else{var p=2*Math.sqrt(1+l-i-a);this._w=(s-r)/p,this._x=(n+h)/p,this._y=(o+u)/p,this._z=.25*p}return this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(u.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);if(0===i)return this;var r=Math.min(1,e/i);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=i*u+s*a+r*h-n*o,this._y=r*u+s*o+n*a-i*h,this._z=n*u+s*h+i*o-r*a,this._w=s*u-i*a-r*o-n*h,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,n=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var o=1-a*a;if(o<=Number.EPSILON){var h=1-e;return this._w=h*s+e*this._w,this._x=h*i+e*this._x,this._y=h*r+e*this._y,this._z=h*n+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),l=Math.atan2(u,a),c=Math.sin((1-e)*l)/u,f=Math.sin(e*l)/u;return this._w=s*c+this._w*f,this._x=i*c+this._x*f,this._y=r*c+this._y*f,this._z=n*c+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var c=new d,f=new l;function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=t,this.y=e,this.z=i}Object.assign(d.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(f.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(f.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*r-a*i,u=o*i+a*e-n*r,l=o*r+n*i-s*e,c=-n*e-s*i-a*r;return this.x=h*o+c*-n+u*-a-l*-s,this.y=u*o+c*-s+l*-n-h*-a,this.z=l*o+c*-a+h*-s-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)},projectOnPlane:function(t){return c.copy(this).projectOnVector(t),this.sub(c)},reflect:function(t){return this.sub(c.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var i=this.dot(t)/e;return Math.acos(u.clamp(i,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var m=[new d,new d,new d,new d,new d,new d,new d,new d],p=new d,g=new S,y=new d,v=new d,x=new d,_=new d,b=new d,w=new d,z=new d,M=new d,k=new d,A=new d;function S(t,e){this.min=void 0!==t?t:new d(1/0,1/0,1/0),this.max=void 0!==e?e:new d(-1/0,-1/0,-1/0)}function B(t,e,i,r,n){for(var s=0,a=t.length-3;s<=a;s+=3){A.fromArray(t,s);var o=n.x*Math.abs(A.x)+n.y*Math.abs(A.y)+n.z*Math.abs(A.z),h=e.dot(A),u=i.dot(A),l=r.dot(A);if(Math.max(-Math.max(h,u,l),Math.min(h,u,l))>o)return!1}return!0}function E(){}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.x=t,this.y=e,this.z=i,this.w=r}function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e}Object.assign(S.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0,o=0,h=t.length;o<h;o+=3){var u=t[o],l=t[o+1],c=t[o+2];u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>n&&(n=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(n,s,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0,o=0,h=t.count;o<h;o++){var u=t.getX(o),l=t.getY(o),c=t.getZ(o);u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>n&&(n=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(n,s,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var i=p.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new d),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new d),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),g.copy(e.boundingBox),g.applyMatrix4(t.matrixWorld),this.union(g));for(var i=t.children,r=0,n=i.length;r<n;r++)this.expandByObject(i[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new d),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,p),p.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(z),M.subVectors(this.max,z),y.subVectors(t.a,z),v.subVectors(t.b,z),x.subVectors(t.c,z),_.subVectors(v,y),b.subVectors(x,v),w.subVectors(y,x);var e=[0,-_.z,_.y,0,-b.z,b.y,0,-w.z,w.y,_.z,0,-_.x,b.z,0,-b.x,w.z,0,-w.x,-_.y,_.x,0,-b.y,b.x,0,-w.y,w.x,0];return!!B(e,y,v,x,M)&&(!!B(e=[1,0,0,0,1,0,0,0,1],y,v,x,M)&&(k.crossVectors(_,b),B(e=[k.x,k.y,k.z],y,v,x,M)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new d),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return p.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(p).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(m[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),m[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),m[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),m[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),m[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),m[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),m[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),m[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(m)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(E.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}}),Object.defineProperties(N.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(N.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,s=t.elements,a=s[0],o=s[4],h=s[8],u=s[1],l=s[5],c=s[9],f=s[2],d=s[6],m=s[10];if(Math.abs(o-u)<.01&&Math.abs(h-f)<.01&&Math.abs(c-d)<.01){if(Math.abs(o+u)<.1&&Math.abs(h+f)<.1&&Math.abs(c+d)<.1&&Math.abs(a+l+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var p=(a+1)/2,g=(l+1)/2,y=(m+1)/2,v=(o+u)/4,x=(h+f)/4,_=(c+d)/4;return p>g&&p>y?p<.01?(i=0,r=.707106781,n=.707106781):(r=v/(i=Math.sqrt(p)),n=x/i):g>y?g<.01?(i=.707106781,r=0,n=.707106781):(i=v/(r=Math.sqrt(g)),n=_/r):y<.01?(i=.707106781,r=.707106781,n=0):(i=x/(n=Math.sqrt(y)),r=_/n),this.set(i,r,n,e),this}var b=Math.sqrt((d-c)*(d-c)+(h-f)*(h-f)+(u-o)*(u-o));return Math.abs(b)<.001&&(b=1),this.x=(d-c)/b,this.y=(h-f)/b,this.z=(u-o)/b,this.w=Math.acos((a+l+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),Object.defineProperties(U.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(U.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*i-s*r+t.x,this.y=n*r+s*i+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});var T={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},R={h:0,s:0,l:0},C={h:0,s:0,l:0};function O(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function I(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function V(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Z(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Object.assign(O.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(t=u.euclideanModulo(t,1),e=u.clamp(e,0,1),i=u.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+e):i+e-i*e,n=2*i-r;this.r=I(n,r,t+1/3),this.g=I(n,r,t),this.b=I(n,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,n=i[1],s=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,h=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,o,h)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var u=i[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=T[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=V(t.r),this.g=V(t.g),this.b=V(t.b),this},copyLinearToSRGB:function(t){return this.r=Z(t.r),this.g=Z(t.g),this.b=Z(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,r=this.r,n=this.g,s=this.b,a=Math.max(r,n,s),o=Math.min(r,n,s),h=(o+a)/2;if(o===a)e=0,i=0;else{var u=a-o;switch(i=h<=.5?u/(a+o):u/(2-a-o),a){case r:e=(n-s)/u+(n<s?6:0);break;case n:e=(s-r)/u+2;break;case s:e=(r-n)/u+4}e/=6}return t.h=e,t.s=i,t.l=h,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(R),R.h+=t,R.s+=e,R.l+=i,this.setHSL(R.h,R.s,R.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(R),t.getHSL(C);var i=u.lerp(R.h,C.h,e),r=u.lerp(R.s,C.s,e),n=u.lerp(R.l,C.l,e);return this.setHSL(i,r,n),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},fromBufferAttribute:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),O.NAMES=T;var F=new d,q=new U;function D(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function P(t,e,i){D.call(this,new Int8Array(t),e,i)}function j(t,e,i){D.call(this,new Uint8Array(t),e,i)}function H(t,e,i){D.call(this,new Uint8ClampedArray(t),e,i)}function L(t,e,i){D.call(this,new Int16Array(t),e,i)}function X(t,e,i){D.call(this,new Uint16Array(t),e,i)}function G(t,e,i){D.call(this,new Int32Array(t),e,i)}function Y(t,e,i){D.call(this,new Uint32Array(t),e,i)}function W(t,e,i){D.call(this,new Float32Array(t),e,i)}function Q(t,e,i){D.call(this,new Float64Array(t),e,i)}Object.defineProperty(D.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(D.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new O),e[i++]=s.r,e[i++]=s.g,e[i++]=s.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new U),e[i++]=s.x,e[i++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new d),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new N),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z,e[i++]=s.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,i=this.count;e<i;e++)q.fromBufferAttribute(this,e),q.applyMatrix3(t),this.setXY(e,q.x,q.y);else if(3===this.itemSize)for(var r=0,n=this.count;r<n;r++)F.fromBufferAttribute(this,r),F.applyMatrix3(t),this.setXYZ(r,F.x,F.y,F.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)F.x=this.getX(e),F.y=this.getY(e),F.z=this.getZ(e),F.applyMatrix4(t),this.setXYZ(e,F.x,F.y,F.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)F.x=this.getX(e),F.y=this.getY(e),F.z=this.getZ(e),F.applyNormalMatrix(t),this.setXYZ(e,F.x,F.y,F.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)F.x=this.getX(e),F.y=this.getY(e),F.z=this.getZ(e),F.transformDirection(t),this.setXYZ(e,F.x,F.y,F.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),P.prototype=Object.create(D.prototype),P.prototype.constructor=P,j.prototype=Object.create(D.prototype),j.prototype.constructor=j,H.prototype=Object.create(D.prototype),H.prototype.constructor=H,L.prototype=Object.create(D.prototype),L.prototype.constructor=L,X.prototype=Object.create(D.prototype),X.prototype.constructor=X,G.prototype=Object.create(D.prototype),G.prototype.constructor=G,Y.prototype=Object.create(D.prototype),Y.prototype.constructor=Y,W.prototype=Object.create(D.prototype),W.prototype.constructor=W,Q.prototype=Object.create(D.prototype),Q.prototype.constructor=Q;var J=new S;function K(t,e){this.center=void 0!==t?t:new d,this.radius=void 0!==e?e:-1}function $(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(K.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var i=this.center;void 0!==e?i.copy(e):J.setFromPoints(t).getCenter(i);for(var r=0,n=0,s=t.length;n<s;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new d),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new S),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign($.prototype,{computeGroups:function(t){var e,i,r=[],n=void 0,s=t.faces;for(i=0;i<s.length;i++){var a=s[i];a.materialIndex!==n&&(n=a.materialIndex,void 0!==e&&(e.count=3*i-e.start,r.push(e)),e={start:3*i,materialIndex:n})}void 0!==e&&(e.count=3*i-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,n=t.faceVertexUvs,s=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,o=t.morphTargets,h=o.length;if(h>0){e=[];for(var u=0;u<h;u++)e[u]={name:o[u].name,data:[]};this.morphTargets.position=e}var l,c=t.morphNormals,f=c.length;if(f>0){l=[];for(var d=0;d<f;d++)l[d]={name:c[d].name,data:[]};this.morphTargets.normal=l}var m=t.skinIndices,p=t.skinWeights,g=m.length===r.length,y=p.length===r.length;r.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var v=0;v<i.length;v++){var x=i[v];this.vertices.push(r[x.a],r[x.b],r[x.c]);var _=x.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=x.normal;this.normals.push(b,b,b)}var w=x.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var z=x.color;this.colors.push(z,z,z)}if(!0===s){var M=n[0][v];void 0!==M?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new U,new U,new U))}if(!0===a){var k=n[1][v];void 0!==k?this.uvs2.push(k[0],k[1],k[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new U,new U,new U))}for(var A=0;A<h;A++){var S=o[A].vertices;e[A].data.push(S[x.a],S[x.b],S[x.c])}for(var B=0;B<f;B++){var E=c[B].vertexNormals[v];l[B].data.push(E.a,E.b,E.c)}g&&this.skinIndices.push(m[x.a],m[x.b],m[x.c]),y&&this.skinWeights.push(p[x.a],p[x.b],p[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var tt=new d,et=new ot,it=new d(0,0,0),rt=new d(1,1,1),nt=new d,st=new d,at=new d;function ot(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(ot.prototype,{isMatrix4:!0,set:function(t,e,i,r,n,s,a,o,h,u,l,c,f,d,m,p){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=h,g[6]=u,g[10]=l,g[14]=c,g[3]=f,g[7]=d,g[11]=m,g[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new ot).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,i=t.elements,r=1/tt.setFromMatrixColumn(t,0).length(),n=1/tt.setFromMatrixColumn(t,1).length(),s=1/tt.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),u=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){var c=s*u,f=s*l,d=a*u,m=a*l;e[0]=o*u,e[4]=-o*l,e[8]=h,e[1]=f+d*h,e[5]=c-m*h,e[9]=-a*o,e[2]=m-c*h,e[6]=d+f*h,e[10]=s*o}else if("YXZ"===t.order){var p=o*u,g=o*l,y=h*u,v=h*l;e[0]=p+v*a,e[4]=y*a-g,e[8]=s*h,e[1]=s*l,e[5]=s*u,e[9]=-a,e[2]=g*a-y,e[6]=v+p*a,e[10]=s*o}else if("ZXY"===t.order){var x=o*u,_=o*l,b=h*u,w=h*l;e[0]=x-w*a,e[4]=-s*l,e[8]=b+_*a,e[1]=_+b*a,e[5]=s*u,e[9]=w-x*a,e[2]=-s*h,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){var z=s*u,M=s*l,k=a*u,A=a*l;e[0]=o*u,e[4]=k*h-M,e[8]=z*h+A,e[1]=o*l,e[5]=A*h+z,e[9]=M*h-k,e[2]=-h,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var S=s*o,B=s*h,E=a*o,N=a*h;e[0]=o*u,e[4]=N-S*l,e[8]=E*l+B,e[1]=l,e[5]=s*u,e[9]=-a*u,e[2]=-h*u,e[6]=B*l+E,e[10]=S-N*l}else if("XZY"===t.order){var U=s*o,T=s*h,R=a*o,C=a*h;e[0]=o*u,e[4]=-l,e[8]=h*u,e[1]=U*l+C,e[5]=s*u,e[9]=T*l-R,e[2]=R*l-T,e[6]=a*u,e[10]=C*l+U}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(it,t,rt)},lookAt:function(t,e,i){var r=this.elements;return at.subVectors(t,e),0===at.lengthSq()&&(at.z=1),at.normalize(),nt.crossVectors(i,at),0===nt.lengthSq()&&(1===Math.abs(i.z)?at.x+=1e-4:at.z+=1e-4,at.normalize(),nt.crossVectors(i,at)),nt.normalize(),st.crossVectors(at,nt),r[0]=nt.x,r[4]=st.x,r[8]=at.x,r[1]=nt.y,r[5]=st.y,r[9]=at.y,r[2]=nt.z,r[6]=st.z,r[10]=at.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[4],o=i[8],h=i[12],u=i[1],l=i[5],c=i[9],f=i[13],d=i[2],m=i[6],p=i[10],g=i[14],y=i[3],v=i[7],x=i[11],_=i[15],b=r[0],w=r[4],z=r[8],M=r[12],k=r[1],A=r[5],S=r[9],B=r[13],E=r[2],N=r[6],U=r[10],T=r[14],R=r[3],C=r[7],O=r[11],I=r[15];return n[0]=s*b+a*k+o*E+h*R,n[4]=s*w+a*A+o*N+h*C,n[8]=s*z+a*S+o*U+h*O,n[12]=s*M+a*B+o*T+h*I,n[1]=u*b+l*k+c*E+f*R,n[5]=u*w+l*A+c*N+f*C,n[9]=u*z+l*S+c*U+f*O,n[13]=u*M+l*B+c*T+f*I,n[2]=d*b+m*k+p*E+g*R,n[6]=d*w+m*A+p*N+g*C,n[10]=d*z+m*S+p*U+g*O,n[14]=d*M+m*B+p*T+g*I,n[3]=y*b+v*k+x*E+_*R,n[7]=y*w+v*A+x*N+_*C,n[11]=y*z+v*S+x*U+_*O,n[15]=y*M+v*B+x*T+_*I,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*o*l-r*h*l-n*a*c+i*h*c+r*a*f-i*o*f)+t[7]*(+e*o*f-e*h*c+n*s*c-r*s*f+r*h*u-n*o*u)+t[11]*(+e*h*l-e*a*f-n*s*l+i*s*f+n*a*u-i*h*u)+t[15]*(-r*a*u-e*o*l+e*a*c+r*s*l-i*s*c+i*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var i=this.elements,r=t.elements,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],u=r[5],l=r[6],c=r[7],f=r[8],d=r[9],m=r[10],p=r[11],g=r[12],y=r[13],v=r[14],x=r[15],_=d*v*c-y*m*c+y*l*p-u*v*p-d*l*x+u*m*x,b=g*m*c-f*v*c-g*l*p+h*v*p+f*l*x-h*m*x,w=f*y*c-g*d*c+g*u*p-h*y*p-f*u*x+h*d*x,z=g*d*l-f*y*l-g*u*m+h*y*m+f*u*v-h*d*v,M=n*_+s*b+a*w+o*z;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var k=1/M;return i[0]=_*k,i[1]=(y*m*o-d*v*o-y*a*p+s*v*p+d*a*x-s*m*x)*k,i[2]=(u*v*o-y*l*o+y*a*c-s*v*c-u*a*x+s*l*x)*k,i[3]=(d*l*o-u*m*o-d*a*c+s*m*c+u*a*p-s*l*p)*k,i[4]=b*k,i[5]=(f*v*o-g*m*o+g*a*p-n*v*p-f*a*x+n*m*x)*k,i[6]=(g*l*o-h*v*o-g*a*c+n*v*c+h*a*x-n*l*x)*k,i[7]=(h*m*o-f*l*o+f*a*c-n*m*c-h*a*p+n*l*p)*k,i[8]=w*k,i[9]=(g*d*o-f*y*o-g*s*p+n*y*p+f*s*x-n*d*x)*k,i[10]=(h*y*o-g*u*o+g*s*c-n*y*c-h*s*x+n*u*x)*k,i[11]=(f*u*o-h*d*o-f*s*c+n*d*c+h*s*p-n*u*p)*k,i[12]=z*k,i[13]=(f*y*a-g*d*a+g*s*m-n*y*m-f*s*v+n*d*v)*k,i[14]=(g*u*a-h*y*a-g*s*l+n*y*l+h*s*v-n*u*v)*k,i[15]=(h*d*a-f*u*a+f*s*l-n*d*l-h*s*m+n*u*m)*k,this},scale:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,a=t.y,o=t.z,h=n*s,u=n*a;return this.set(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*s,0,h*o-r*a,u*o+r*s,n*o*o+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,h=n+n,u=s+s,l=a+a,c=n*h,f=n*u,d=n*l,m=s*u,p=s*l,g=a*l,y=o*h,v=o*u,x=o*l,_=i.x,b=i.y,w=i.z;return r[0]=(1-(m+g))*_,r[1]=(f+x)*_,r[2]=(d-v)*_,r[3]=0,r[4]=(f-x)*b,r[5]=(1-(c+g))*b,r[6]=(p+y)*b,r[7]=0,r[8]=(d+v)*w,r[9]=(p-y)*w,r[10]=(1-(c+m))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,i){var r=this.elements,n=tt.set(r[0],r[1],r[2]).length(),s=tt.set(r[4],r[5],r[6]).length(),a=tt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],et.copy(this);var o=1/n,h=1/s,u=1/a;return et.elements[0]*=o,et.elements[1]*=o,et.elements[2]*=o,et.elements[4]*=h,et.elements[5]*=h,et.elements[6]*=h,et.elements[8]*=u,et.elements[9]*=u,et.elements[10]*=u,e.setFromRotationMatrix(et),i.x=n,i.y=s,i.z=a,this},makePerspective:function(t,e,i,r,n,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*n/(e-t),h=2*n/(i-r),u=(e+t)/(e-t),l=(i+r)/(i-r),c=-(s+n)/(s-n),f=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,r,n,s){var a=this.elements,o=1/(e-t),h=1/(i-r),u=1/(s-n),l=(e+t)*o,c=(i+r)*h,f=(s+n)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var ht=new ot,ut=new l;function lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lt.DefaultOrder;this._x=t,this._y=e,this._z=i,this._order=r}function ct(){this.mask=1}function ft(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}lt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],lt.DefaultOrder="XYZ",Object.defineProperties(lt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(lt.prototype,{isEuler:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=u.clamp,n=t.elements,s=n[0],a=n[4],o=n[8],h=n[1],l=n[5],c=n[9],f=n[2],d=n[6],m=n[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,i){return ht.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ht,e,i)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return ut.setFromEuler(this),this.setFromQuaternion(ut,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new d(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(ct.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}}),Object.assign(ft.prototype,{isMatrix3:!0,set:function(t,e,i,r,n,s,a,o,h){var u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=n,u[5]=o,u[6]=i,u[7]=s,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},extractBasis:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[3],o=i[6],h=i[1],u=i[4],l=i[7],c=i[2],f=i[5],d=i[8],m=r[0],p=r[3],g=r[6],y=r[1],v=r[4],x=r[7],_=r[2],b=r[5],w=r[8];return n[0]=s*m+a*y+o*_,n[3]=s*p+a*v+o*b,n[6]=s*g+a*x+o*w,n[1]=h*m+u*y+l*_,n[4]=h*p+u*v+l*b,n[7]=h*g+u*x+l*w,n[2]=c*m+f*y+d*_,n[5]=c*p+f*v+d*b,n[8]=c*g+f*x+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*s*u-e*a*h-i*n*u+i*a*o+r*n*h-r*s*o},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var i=t.elements,r=this.elements,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],l=i[6],c=i[7],f=i[8],d=f*h-u*c,m=u*l-f*o,p=c*o-h*l,g=n*d+s*m+a*p;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);var y=1/g;return r[0]=d*y,r[1]=(a*c-f*s)*y,r[2]=(u*s-a*h)*y,r[3]=m*y,r[4]=(f*n-a*l)*y,r[5]=(a*o-u*n)*y,r[6]=p*y,r[7]=(s*l-c*n)*y,r[8]=(h*n-s*o)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,n,s,a){var o=Math.cos(n),h=Math.sin(n);this.set(i*o,i*h,-i*(o*s+h*a)+s+t,-r*h,r*o,-r*(-h*s+o*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=this.elements,n=r[0],s=r[3],a=r[6],o=r[1],h=r[4],u=r[7];return r[0]=e*n+i*o,r[3]=e*s+i*h,r[6]=e*a+i*u,r[1]=-i*n+e*o,r[4]=-i*s+e*h,r[7]=-i*a+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var dt=0,mt=new d,pt=new l,gt=new ot,yt=new d,vt=new d,xt=new d,_t=new l,bt=new d(1,0,0),wt=new d(0,1,0),zt=new d(0,0,1),Mt={type:"added"},kt={type:"removed"};function At(){Object.defineProperty(this,"id",{value:dt++}),this.uuid=u.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=At.DefaultUp.clone();var t=new d,e=new lt,i=new l,r=new d(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ot},normalMatrix:{value:new ft}}),this.matrix=new ot,this.matrixWorld=new ot,this.matrixAutoUpdate=At.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ct,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}At.DefaultUp=new d(0,1,0),At.DefaultMatrixAutoUpdate=!0,At.prototype=Object.assign(Object.create(E.prototype),{constructor:At,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return pt.setFromAxisAngle(t,e),this.quaternion.multiply(pt),this},rotateOnWorldAxis:function(t,e){return pt.setFromAxisAngle(t,e),this.quaternion.premultiply(pt),this},rotateX:function(t){return this.rotateOnAxis(bt,t)},rotateY:function(t){return this.rotateOnAxis(wt,t)},rotateZ:function(t){return this.rotateOnAxis(zt,t)},translateOnAxis:function(t,e){return mt.copy(t).applyQuaternion(this.quaternion),this.position.add(mt.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(bt,t)},translateY:function(t){return this.translateOnAxis(wt,t)},translateZ:function(t){return this.translateOnAxis(zt,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(gt.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?yt.copy(t):yt.set(t,e,i);var r=this.parent;this.updateWorldMatrix(!0,!1),vt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gt.lookAt(vt,yt,this.up):gt.lookAt(yt,vt,this.up),this.quaternion.setFromRotationMatrix(gt),r&&(gt.extractRotation(r.matrixWorld),pt.setFromRotationMatrix(gt),this.quaternion.premultiply(pt.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Mt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(kt)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),gt.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),gt.multiply(t.parent.matrixWorld)),t.applyMatrix4(gt),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new d),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(vt,t,xt),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new d),this.updateMatrixWorld(!0),this.matrixWorld.decompose(vt,_t,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new d),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=n(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,h=a.length;o<h;o++){var u=a[o];n(t.shapes,u)}else n(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],c=0,f=this.material.length;c<f;c++)l.push(n(t.materials,this.material[c]));r.material=l}else r.material=n(t.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(t).object)}if(e){var m=x(t.geometries),p=x(t.materials),g=x(t.textures),y=x(t.images),v=x(t.shapes);m.length>0&&(i.geometries=m),p.length>0&&(i.materials=p),g.length>0&&(i.textures=g),y.length>0&&(i.images=y),v.length>0&&(i.shapes=v)}return i.object=r,i;function x(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var St=1,Bt=new ot,Et=new At,Nt=new d,Ut=new S,Tt=new S,Rt=new d;function Ct(){Object.defineProperty(this,"id",{value:St+=2}),this.uuid=u.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ot(t,e,i,r,n,s){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new d,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new O,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==s?s:0}Ct.prototype=Object.assign(Object.create(E.prototype),{constructor:Ct,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)>65535?Y:X)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var r=(new ft).getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}var n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Bt.makeRotationX(t),this.applyMatrix4(Bt),this},rotateY:function(t){return Bt.makeRotationY(t),this.applyMatrix4(Bt),this},rotateZ:function(t){return Bt.makeRotationZ(t),this.applyMatrix4(Bt),this},translate:function(t,e,i){return Bt.makeTranslation(t,e,i),this.applyMatrix4(Bt),this},scale:function(t,e,i){return Bt.makeScale(t,e,i),this.applyMatrix4(Bt),this},lookAt:function(t){return Et.lookAt(t),Et.updateMatrix(),this.applyMatrix4(Et.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nt).negate(),this.translate(Nt.x,Nt.y,Nt.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new W(3*e.vertices.length,3),r=new W(3*e.colors.length,3);if(this.setAttribute("position",i.copyVector3sArray(e.vertices)),this.setAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var n=new W(e.lineDistances.length,1);this.setAttribute("lineDistance",n.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new W(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}if(!0===e.verticesNeedUpdate){var r=this.attributes.position;void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){var n=this.attributes.normal;void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){var s=this.attributes.color;void 0!==s&&(s.copyColorsArray(e.colors),s.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var a=this.attributes.uv;void 0!==a&&(a.copyVector2sArray(e.uvs),a.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var o=this.attributes.lineDistance;void 0!==o&&(o.copyArray(e.lineDistances),o.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new $).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new D(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.setAttribute("normal",new D(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.setAttribute("color",new D(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var n=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new D(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new D(s,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var o=[],h=t.morphTargets[a],u=0,l=h.length;u<l;u++){var c=h[u],f=new W(3*c.data.length,3);f.name=c.name,o.push(f.copyVector3sArray(c.data))}this.morphAttributes[a]=o}if(t.skinIndices.length>0){var d=new W(4*t.skinIndices.length,4);this.setAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new W(4*t.skinWeights.length,4);this.setAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new S);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];Ut.setFromBufferAttribute(n),this.morphTargetsRelative?(Rt.addVectors(this.boundingBox.min,Ut.min),this.boundingBox.expandByPoint(Rt),Rt.addVectors(this.boundingBox.max,Ut.max),this.boundingBox.expandByPoint(Rt)):(this.boundingBox.expandByPoint(Ut.min),this.boundingBox.expandByPoint(Ut.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new K);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var i=this.boundingSphere.center;if(Ut.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var s=e[r];Tt.setFromBufferAttribute(s),this.morphTargetsRelative?(Rt.addVectors(Ut.min,Tt.min),Ut.expandByPoint(Rt),Rt.addVectors(Ut.max,Tt.max),Ut.expandByPoint(Rt)):(Ut.expandByPoint(Tt.min),Ut.expandByPoint(Tt.max))}Ut.getCenter(i);for(var a=0,o=0,h=t.count;o<h;o++)Rt.fromBufferAttribute(t,o),a=Math.max(a,i.distanceToSquared(Rt));if(e)for(var u=0,l=e.length;u<l;u++)for(var c=e[u],f=this.morphTargetsRelative,d=0,m=c.count;d<m;d++)Rt.fromBufferAttribute(c,d),f&&(Nt.fromBufferAttribute(t,d),Rt.add(Nt)),a=Math.max(a,i.distanceToSquared(Rt));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var i=this.getAttribute("normal");if(void 0===i)i=new D(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(var r=0,n=i.count;r<n;r++)i.setXYZ(r,0,0,0);var s=new d,a=new d,o=new d,h=new d,u=new d,l=new d,c=new d,f=new d;if(t)for(var m=0,p=t.count;m<p;m+=3){var g=t.getX(m+0),y=t.getX(m+1),v=t.getX(m+2);s.fromBufferAttribute(e,g),a.fromBufferAttribute(e,y),o.fromBufferAttribute(e,v),c.subVectors(o,a),f.subVectors(s,a),c.cross(f),h.fromBufferAttribute(i,g),u.fromBufferAttribute(i,y),l.fromBufferAttribute(i,v),h.add(c),u.add(c),l.add(c),i.setXYZ(g,h.x,h.y,h.z),i.setXYZ(y,u.x,u.y,u.z),i.setXYZ(v,l.x,l.y,l.z)}else for(var x=0,_=e.count;x<_;x+=3)s.fromBufferAttribute(e,x+0),a.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),c.subVectors(o,a),f.subVectors(s,a),c.cross(f),i.setXYZ(x+0,c.x,c.y,c.z),i.setXYZ(x+1,c.x,c.y,c.z),i.setXYZ(x+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var r in i)if(void 0!==t.attributes[r])for(var n=i[r].array,s=t.attributes[r],a=s.array,o=s.itemSize*e,h=Math.min(a.length,n.length-o),u=0,l=o;u<h;u++,l++)n[l]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Rt.fromBufferAttribute(t,e),Rt.normalize(),t.setXYZ(e,Rt.x,Rt.y,Rt.z)},toNonIndexed:function(){function t(t,e){for(var i=t.array,r=t.itemSize,n=t.normalized,s=new i.constructor(e.length*r),a=0,o=0,h=0,u=e.length;h<u;h++){a=e[h]*r;for(var l=0;l<r;l++)s[o++]=i[a++]}return new D(s,r,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ct,i=this.index.array,r=this.attributes;for(var n in r){var s=t(r[n],i);e.setAttribute(n,s)}var a=this.morphAttributes;for(var o in a){for(var h=[],u=a[o],l=0,c=u.length;l<c;l++){var f=t(u[l],i);h.push(f)}e.morphAttributes[o]=h}e.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,m=0,p=d.length;m<p;m++){var g=d[m];e.addGroup(g.start,g.count,g.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var n=this.attributes;for(var s in n){var a=n[s],o=a.toJSON(t.data);""!==a.name&&(o.name=a.name),t.data.attributes[s]=o}var h={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],f=[],d=0,m=c.length;d<m;d++){var p=c[d],g=p.toJSON(t.data);""!==p.name&&(g.name=p.name),f.push(g)}f.length>0&&(h[l]=f,u=!0)}u&&(t.data.morphAttributes=h,t.data.morphTargetsRelative=this.morphTargetsRelative);var y=this.groups;y.length>0&&(t.data.groups=JSON.parse(JSON.stringify(y)));var v=this.boundingSphere;return null!==v&&(t.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),t},clone:function(){return(new Ct).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone(e));var r=t.attributes;for(var n in r){var s=r[n];this.setAttribute(n,s.clone(e))}var a=t.morphAttributes;for(var o in a){for(var h=[],u=a[o],l=0,c=u.length;l<c;l++)h.push(u[l].clone(e));this.morphAttributes[o]=h}this.morphTargetsRelative=t.morphTargetsRelative;for(var f=t.groups,d=0,m=f.length;d<m;d++){var p=f[d];this.addGroup(p.start,p.count,p.materialIndex)}var g=t.boundingBox;null!==g&&(this.boundingBox=g.clone());var y=t.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ot.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var r=0,n=t.vertexColors.length;r<n;r++)this.vertexColors[r]=t.vertexColors[r].clone();return this}});var It=0,Vt=new ot,Zt=new At,Ft=new d;function qt(){Object.defineProperty(this,"id",{value:It+=2}),this.uuid=u.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Dt(t,e,i,r){qt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new Pt(t,e,i,r)),this.mergeVertices()}function Pt(t,e,i,r){Ct.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};for(var n=(t=t||1)/2,s=(e=e||1)/2,a=Math.floor(i)||1,o=Math.floor(r)||1,h=a+1,u=o+1,l=t/a,c=e/o,f=[],d=[],m=[],p=[],g=0;g<u;g++)for(var y=g*c-s,v=0;v<h;v++){var x=v*l-n;d.push(x,-y,0),m.push(0,0,1),p.push(v/a),p.push(1-g/o)}for(var _=0;_<o;_++)for(var b=0;b<a;b++){var w=b+h*_,z=b+h*(_+1),M=b+1+h*(_+1),k=b+1+h*_;f.push(w,z,k),f.push(z,M,k)}this.setIndex(f),this.setAttribute("position",new W(d,3)),this.setAttribute("normal",new W(m,3)),this.setAttribute("uv",new W(p,2))}qt.prototype=Object.assign(Object.create(E.prototype),{constructor:qt,isGeometry:!0,applyMatrix4:function(t){for(var e=(new ft).getNormalMatrix(t),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(t)}for(var n=0,s=this.faces.length;n<s;n++){var a=this.faces[n];a.normal.applyMatrix3(e).normalize();for(var o=0,h=a.vertexNormals.length;o<h;o++)a.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Vt.makeRotationX(t),this.applyMatrix4(Vt),this},rotateY:function(t){return Vt.makeRotationY(t),this.applyMatrix4(Vt),this},rotateZ:function(t){return Vt.makeRotationZ(t),this.applyMatrix4(Vt),this},translate:function(t,e,i){return Vt.makeTranslation(t,e,i),this.applyMatrix4(Vt),this},scale:function(t,e,i){return Vt.makeScale(t,e,i),this.applyMatrix4(Vt),this},lookAt:function(t){return Zt.lookAt(t),Zt.updateMatrix(),this.applyMatrix4(Zt.matrix),this},fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var n=r.position,s=r.normal,a=r.color,o=r.uv,h=r.uv2;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var u=0;u<n.count;u++)e.vertices.push((new d).fromBufferAttribute(n,u)),void 0!==a&&e.colors.push((new O).fromBufferAttribute(a,u));function l(t,i,r,n){var u=void 0===a?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()],l=new Ot(t,i,r,void 0===s?[]:[(new d).fromBufferAttribute(s,t),(new d).fromBufferAttribute(s,i),(new d).fromBufferAttribute(s,r)],u,n);e.faces.push(l),void 0!==o&&e.faceVertexUvs[0].push([(new U).fromBufferAttribute(o,t),(new U).fromBufferAttribute(o,i),(new U).fromBufferAttribute(o,r)]),void 0!==h&&e.faceVertexUvs[1].push([(new U).fromBufferAttribute(h,t),(new U).fromBufferAttribute(h,i),(new U).fromBufferAttribute(h,r)])}var c=t.groups;if(c.length>0)for(var f=0;f<c.length;f++)for(var m=c[f],p=m.start,g=p,y=p+m.count;g<y;g+=3)void 0!==i?l(i.getX(g),i.getX(g+1),i.getX(g+2),m.materialIndex):l(g,g+1,g+2,m.materialIndex);else if(void 0!==i)for(var v=0;v<i.count;v+=3)l(i.getX(v),i.getX(v+1),i.getX(v+2));else for(var x=0;x<n.count;x+=3)l(x,x+1,x+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ft).negate(),this.translate(Ft.x,Ft.y,Ft.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,r=new ot;return r.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var t=new d,e=new d,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];t.subVectors(o,a),e.subVectors(s,a),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),i=0,r=this.vertices.length;i<r;i++)e[i]=new d;if(t)for(var n=new d,s=new d,a=0,o=this.faces.length;a<o;a++){var h=this.faces[a],u=this.vertices[h.a],l=this.vertices[h.b],c=this.vertices[h.c];n.subVectors(c,l),s.subVectors(u,l),n.cross(s),e[h.a].add(n),e[h.b].add(n),e[h.c].add(n)}else{this.computeFaceNormals();for(var f=0,m=this.faces.length;f<m;f++){var p=this.faces[f];e[p.a].add(p.normal),e[p.b].add(p.normal),e[p.c].add(p.normal)}}for(var g=0,y=this.vertices.length;g<y;g++)e[g].normalize();for(var v=0,x=this.faces.length;v<x;v++){var _=this.faces[v],b=_.vertexNormals;3===b.length?(b[0].copy(e[_.a]),b[1].copy(e[_.b]),b[2].copy(e[_.c])):(b[0]=e[_.a].clone(),b[1]=e[_.b].clone(),b[2]=e[_.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t],r=i.vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(var r=0,n=i.vertexNormals.length;r<n;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}var s=new qt;s.faces=this.faces;for(var a=0,o=this.morphTargets.length;a<o;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];for(var h=this.morphNormals[a].faceNormals,u=this.morphNormals[a].vertexNormals,l=0,c=this.faces.length;l<c;l++){var f=new d,m={a:new d,b:new d,c:new d};h.push(f),u.push(m)}}var p=this.morphNormals[a];s.vertices=this.morphTargets[a].vertices,s.computeFaceNormals(),s.computeVertexNormals();for(var g=0,y=this.faces.length;g<y;g++){var v=this.faces[g],x=p.faceNormals[g],_=p.vertexNormals[g];x.copy(v.normal),_.a.copy(v.vertexNormals[0]),_.b.copy(v.vertexNormals[1]),_.c.copy(v.vertexNormals[2])}}for(var b=0,w=this.faces.length;b<w;b++){var z=this.faces[b];z.normal=z.__originalFaceNormal,z.vertexNormals=z.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new S),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new K),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var r,n=this.vertices.length,s=this.vertices,a=t.vertices,o=this.faces,h=t.faces,u=this.colors,l=t.colors;void 0===i&&(i=0),void 0!==e&&(r=(new ft).getNormalMatrix(e));for(var c=0,f=a.length;c<f;c++){var d=a[c].clone();void 0!==e&&d.applyMatrix4(e),s.push(d)}for(var m=0,p=l.length;m<p;m++)u.push(l[m].clone());for(var g=0,y=h.length;g<y;g++){var v=h[g],x=void 0,_=void 0,b=void 0,w=v.vertexNormals,z=v.vertexColors;(x=new Ot(v.a+n,v.b+n,v.c+n)).normal.copy(v.normal),void 0!==r&&x.normal.applyMatrix3(r).normalize();for(var M=0,k=w.length;M<k;M++)_=w[M].clone(),void 0!==r&&_.applyMatrix3(r).normalize(),x.vertexNormals.push(_);x.color.copy(v.color);for(var A=0,S=z.length;A<S;A++)b=z[A],x.vertexColors.push(b.clone());x.materialIndex=v.materialIndex+i,o.push(x)}for(var B=0,E=t.faceVertexUvs.length;B<E;B++){var N=t.faceVertexUvs[B];void 0===this.faceVertexUvs[B]&&(this.faceVertexUvs[B]=[]);for(var U=0,T=N.length;U<T;U++){for(var R=N[U],C=[],O=0,I=R.length;O<I;O++)C.push(R[O].clone());this.faceVertexUvs[B].push(C)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){for(var t={},e=[],i=[],r=Math.pow(10,4),n=0,s=this.vertices.length;n<s;n++){var a=this.vertices[n],o=Math.round(a.x*r)+"_"+Math.round(a.y*r)+"_"+Math.round(a.z*r);void 0===t[o]?(t[o]=n,e.push(this.vertices[n]),i[n]=e.length-1):i[n]=i[t[o]]}for(var h=[],u=0,l=this.faces.length;u<l;u++){var c=this.faces[u];c.a=i[c.a],c.b=i[c.b],c.c=i[c.c];for(var f=[c.a,c.b,c.c],d=0;d<3;d++)if(f[d]===f[(d+1)%3]){h.push(u);break}}for(var m=h.length-1;m>=0;m--){var p=h[m];this.faces.splice(p,1);for(var g=0,y=this.faceVertexUvs.length;g<y;g++)this.faceVertexUvs[g].splice(p,1)}var v=this.vertices.length-e.length;return this.vertices=e,v},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];this.vertices.push(new d(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,n,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===e&&(r=[]),a&&a.length===e&&(n=[]);for(var o=0;o<e;o++){var h=t[o]._id;r&&r.push(s[h]),n&&n.push(a[h])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}for(var r=[],n=0;n<this.vertices.length;n++){var s=this.vertices[n];r.push(s.x,s.y,s.z)}for(var a=[],o=[],h={},u=[],l={},c=[],f={},d=0;d<this.faces.length;d++){var m=this.faces[d],p=void 0!==this.faceVertexUvs[0][d],g=m.normal.length()>0,y=m.vertexNormals.length>0,v=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=m.vertexColors.length>0,_=0;if(_=M(_,0,0),_=M(_,1,!0),_=M(_,2,!1),_=M(_,3,p),_=M(_,4,g),_=M(_,5,y),_=M(_,6,v),_=M(_,7,x),a.push(_),a.push(m.a,m.b,m.c),a.push(m.materialIndex),p){var b=this.faceVertexUvs[0][d];a.push(S(b[0]),S(b[1]),S(b[2]))}if(g&&a.push(k(m.normal)),y){var w=m.vertexNormals;a.push(k(w[0]),k(w[1]),k(w[2]))}if(v&&a.push(A(m.color)),x){var z=m.vertexColors;a.push(A(z[0]),A(z[1]),A(z[2]))}}function M(t,e,i){return i?t|1<<e:t&~(1<<e)}function k(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]||(h[e]=o.length/3,o.push(t.x,t.y,t.z)),h[e]}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]||(l[e]=u.length,u.push(t.getHex())),l[e]}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]||(f[e]=c.length/2,c.push(t.x,t.y)),f[e]}return t.data={},t.data.vertices=r,t.data.normals=o,u.length>0&&(t.data.colors=u),c.length>0&&(t.data.uvs=[c]),t.data.faces=a,t},clone:function(){return(new qt).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,i=0,r=e.length;i<r;i++)this.vertices.push(e[i].clone());for(var n=t.colors,s=0,a=n.length;s<a;s++)this.colors.push(n[s].clone());for(var o=t.faces,h=0,u=o.length;h<u;h++)this.faces.push(o[h].clone());for(var l=0,c=t.faceVertexUvs.length;l<c;l++){var f=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var d=0,m=f.length;d<m;d++){for(var p=f[d],g=[],y=0,v=p.length;y<v;y++){var x=p[y];g.push(x.clone())}this.faceVertexUvs[l].push(g)}}for(var _=t.morphTargets,b=0,w=_.length;b<w;b++){var z={};if(z.name=_[b].name,void 0!==_[b].vertices){z.vertices=[];for(var M=0,k=_[b].vertices.length;M<k;M++)z.vertices.push(_[b].vertices[M].clone())}if(void 0!==_[b].normals){z.normals=[];for(var A=0,S=_[b].normals.length;A<S;A++)z.normals.push(_[b].normals[A].clone())}this.morphTargets.push(z)}for(var B=t.morphNormals,E=0,N=B.length;E<N;E++){var U={};if(void 0!==B[E].vertexNormals){U.vertexNormals=[];for(var T=0,R=B[E].vertexNormals.length;T<R;T++){var C=B[E].vertexNormals[T],O={};O.a=C.a.clone(),O.b=C.b.clone(),O.c=C.c.clone(),U.vertexNormals.push(O)}}if(void 0!==B[E].faceNormals){U.faceNormals=[];for(var I=0,V=B[E].faceNormals.length;I<V;I++)U.faceNormals.push(B[E].faceNormals[I].clone())}this.morphNormals.push(U)}for(var Z=t.skinWeights,F=0,q=Z.length;F<q;F++)this.skinWeights.push(Z[F].clone());for(var D=t.skinIndices,P=0,j=D.length;P<j;P++)this.skinIndices.push(D[P].clone());for(var H=t.lineDistances,L=0,X=H.length;L<X;L++)this.lineDistances.push(H[L]);var G=t.boundingBox;null!==G&&(this.boundingBox=G.clone());var Y=t.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Dt.prototype=Object.create(qt.prototype),Dt.prototype.constructor=Dt,Pt.prototype=Object.create(Ct.prototype),Pt.prototype.constructor=Pt;var jt,Ht=function(t){return t.reduce((function(t,e){return t+e}),0)/t.length},Lt=[];onmessage=function(t){return Lt.push(t)},i.e(1).then(i.bind(null,22)).then((function(t){(jt=t).init(),onmessage=function(t){var e=n(t.data,6),i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],h=e[5];te(i,r,s,a,o,h,t.data.toString())},Lt.forEach((function(t){return onmessage(t)}))}));var Xt,Gt=function(t,e,i){var r=n(function(t,e,i){var r=Math.pow(2,t),n=$t(t),s=Math.floor(e+n.x),a=Math.floor(i+n.y);if(e=Math.abs(s%r),i=Math.abs(a%r),isNaN(t)||isNaN(e)||isNaN(i))throw new Error("cannot fetch tile ".concat(t,"/").concat(e,"/").concat(i,".png"));return[t,e,i]}(t,e,i),3);t=r[0],e=r[1],i=r[2];var s="".concat("https://s3.amazonaws.com/elevation-tiles-prod/terrarium","/").concat(t,"/").concat(e,"/").concat(i,".png");return fetch(s).then((function(t){return t.arrayBuffer()})).then((function(t){return new Uint8Array(t)}))},Yt=function(t){for(var e=new Uint8Array(a.a.toRGBA8(a.a.decode(t))[0]),i=new Float32Array(65536),r=0;r<256;r++)for(var n=0;n<256;n++){var s=r+256*n,o=4*s;i[s]=256*e[o]+e[o+1]+e[o+2]/256-32768}return i},Wt=function(t,e,i,r){var n=r?jt.png2elevation:Yt;performance.mark("png2height-start");var s=n(t);performance.mark("png2height-end"),performance.measure("png-time","png2height-start","png2height-end"),performance.getEntriesByName("png-time");var a=performance.getEntriesByName("png-time");1===a.length&&console.log("First PNG decoded: ".concat(Math.round(a[0].duration),"ms")),12===a.length&&(console.log("".concat(a.length," PNG decoded: "),"".concat(Math.round(Ht(a.map((function(t){return t.duration})))),"ms on average")),console.log("Last PNG decoded: ".concat(Math.round(a[11].duration),"ms")));for(var o,h,u=new Pt(e,e,i+2,i+2),l=Math.sqrt(u.attributes.position.count),c=Math.sqrt(s.length),f=c/l,d=l;d<u.attributes.position.count-l;d++)d%l!==0&&d%l!==l-1&&(o=Math.floor(d/l),h=d%l,u.attributes.position.setZ(d,.075*s[Math.round(Math.round(o*f)*c+h*f)]));var m=u.attributes.position.array[2];u.center();var p=m-u.attributes.position.array[2];return u.translate(0,0,p),function(t){var e=t.parameters.widthSegments+1,i=t.parameters.heightSegments+1;if(!(e<4||i<4)){for(var r=.1*Math.sqrt(t.parameters.width*t.parameters.height)*255/Math.sqrt(e*i),n=1;n<e-1;n++)t.attributes.position.setZ(n,t.attributes.position.getZ(e+n));for(var s=1;s<e-1;s++)t.attributes.position.setZ((i-1)*e+s,t.attributes.position.getZ((i-2)*e+s));for(var a=0,o=0;o<i;o++)t.attributes.position.setZ(o*e,t.attributes.position.getZ(1+o*e));a=e;for(var h=0;h<i;h++)t.attributes.position.setZ(h*e+a-1,t.attributes.position.getZ(h*e+a-2));t.computeVertexNormals();for(var u=1;u<e-1;u++)t.attributes.position.setXYZ(u,t.attributes.position.getX(e+u),t.attributes.position.getY(e+u),t.attributes.position.getZ(e+u)-r);for(var l=1;l<e-1;l++)t.attributes.position.setXYZ((i-1)*e+l,t.attributes.position.getX((i-2)*e+l),t.attributes.position.getY((i-2)*e+l),t.attributes.position.getZ((i-2)*e+l)-r);a=0;for(var c=0;c<i;c++)t.attributes.position.setXYZ(c*e,t.attributes.position.getX(1+c*e),t.attributes.position.getY(1+c*e),t.attributes.position.getZ(1+c*e)-r);a=e;for(var f=0;f<i;f++)t.attributes.position.setXYZ(f*e+a-1,t.attributes.position.getX(f*e+a-2),t.attributes.position.getY(f*e+a-2),t.attributes.position.getZ(f*e+a-2)-r);t.scale((e-1)/(e-3),(i-1)/(i-3),1)}}(u),u},Qt=45.8671,Jt=(Xt=10,(7.3087+180)/360*Math.pow(2,Xt)),Kt=function(t,e){return(1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e)}(Qt,10),$t=function(t){return{x:Jt/Math.pow(2,10-t),y:Kt/Math.pow(2,10-t)}},te=function(t,e,i,r,n,s,a){Gt(t,e,i).then((function(t){!function(t,e,i,r){var n=function(t,e,i){return Wt(t,e,i,!0)}(t,e,i),s=n.attributes.position.array.buffer,a=n.attributes.normal.array.buffer,o=n.index.array.buffer,h=n.attributes.uv.array.buffer;postMessage({key:r,positions:s,normals:a,indices:o,uvs:h,bpe:{positions:n.attributes.position.array.BYTES_PER_ELEMENT,normals:n.attributes.normal.array.BYTES_PER_ELEMENT,indices:n.index.array.BYTES_PER_ELEMENT}},[s,a,o,h])}(t,s,r,a)}))}}]);
//# sourceMappingURL=terrain.worker.bfcda43c.js.map