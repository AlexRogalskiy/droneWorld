!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=18)}([function(t,e,i){"use strict";var r="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==typeof i)throw new TypeError(i+"must be non-object");for(var r in i)n(i,r)&&(t[r]=i[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,i,r,n){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+r),n);else for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){var e,i,r,n,s,a;for(r=0,e=0,i=t.length;e<i;e++)r+=t[e].length;for(a=new Uint8Array(r),n=0,e=0,i=t.length;e<i;e++)s=t[e],a.set(s,n),n+=s.length;return a}},a={arraySet:function(t,e,i,r,n){for(var s=0;s<r;s++)t[n+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){(function(e){!function(){var e={};t.exports=e,function(t,e){t.toRGBA8=function(e){var i=e.width,r=e.height;if(null==e.tabs.acTL)return[t.toRGBA8.decodeImage(e.data,i,r,e).buffer];var n=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var s,a=new Uint8Array(i*r*4),o=0;o<e.frames.length;o++){var h=e.frames[o],u=h.rect.x,l=h.rect.y,c=h.rect.width,f=h.rect.height,d=t.toRGBA8.decodeImage(h.data,c,f,e);if(0==o?s=d:0==h.blend?t._copyTile(d,c,f,s,i,r,u,l,0):1==h.blend&&t._copyTile(d,c,f,s,i,r,u,l,1),n.push(s.buffer),s=s.slice(0),0==h.dispose);else if(1==h.dispose)t._copyTile(a,c,f,s,i,r,u,l,0);else if(2==h.dispose){for(var m=o-1;2==e.frames[m].dispose;)m--;s=new Uint8Array(n[m]).slice(0)}}return n},t.toRGBA8.decodeImage=function(e,i,r,n){var s=i*r,a=t.decode._getBPP(n),o=Math.ceil(i*a/8),h=new Uint8Array(4*s),u=new Uint32Array(h.buffer),l=n.ctype,c=n.depth,f=t._bin.readUshort;if(6==l){var d=s<<2;if(8==c)for(var m=0;m<d;m++)h[m]=e[m];if(16==c)for(m=0;m<d;m++)h[m]=e[m<<1]}else if(2==l){var p=n.tabs.tRNS,y=-1,g=-1,v=-1;if(p&&(y=p[0],g=p[1],v=p[2]),8==c)for(m=0;m<s;m++){var x=3*m;h[A=m<<2]=e[x],h[A+1]=e[x+1],h[A+2]=e[x+2],h[A+3]=255,-1!=y&&e[x]==y&&e[x+1]==g&&e[x+2]==v&&(h[A+3]=0)}if(16==c)for(m=0;m<s;m++){x=6*m;h[A=m<<2]=e[x],h[A+1]=e[x+2],h[A+2]=e[x+4],h[A+3]=255,-1!=y&&f(e,x)==y&&f(e,x+2)==g&&f(e,x+4)==v&&(h[A+3]=0)}}else if(3==l){var _=n.tabs.PLTE,b=n.tabs.tRNS,w=b?b.length:0;if(1==c)for(var z=0;z<r;z++){var M=z*o,k=z*i;for(m=0;m<i;m++){var A=k+m<<2,S=3*(E=e[M+(m>>3)]>>7-((7&m)<<0)&1);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=E<w?b[E]:255}}if(2==c)for(z=0;z<r;z++)for(M=z*o,k=z*i,m=0;m<i;m++){A=k+m<<2,S=3*(E=e[M+(m>>2)]>>6-((3&m)<<1)&3);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=E<w?b[E]:255}if(4==c)for(z=0;z<r;z++)for(M=z*o,k=z*i,m=0;m<i;m++){A=k+m<<2,S=3*(E=e[M+(m>>1)]>>4-((1&m)<<2)&15);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=E<w?b[E]:255}if(8==c)for(m=0;m<s;m++){var E;A=m<<2,S=3*(E=e[m]);h[A]=_[S],h[A+1]=_[S+1],h[A+2]=_[S+2],h[A+3]=E<w?b[E]:255}}else if(4==l){if(8==c)for(m=0;m<s;m++){A=m<<2;var N=e[B=m<<1];h[A]=N,h[A+1]=N,h[A+2]=N,h[A+3]=e[B+1]}if(16==c)for(m=0;m<s;m++){var B;A=m<<2,N=e[B=m<<2];h[A]=N,h[A+1]=N,h[A+2]=N,h[A+3]=e[B+2]}}else if(0==l){y=n.tabs.tRNS?n.tabs.tRNS:-1;if(1==c)for(m=0;m<s;m++){var U=(N=255*(e[m>>3]>>7-(7&m)&1))==255*y?0:255;u[m]=U<<24|N<<16|N<<8|N}if(2==c)for(m=0;m<s;m++){U=(N=85*(e[m>>2]>>6-((3&m)<<1)&3))==85*y?0:255;u[m]=U<<24|N<<16|N<<8|N}if(4==c)for(m=0;m<s;m++){U=(N=17*(e[m>>1]>>4-((1&m)<<2)&15))==17*y?0:255;u[m]=U<<24|N<<16|N<<8|N}if(8==c)for(m=0;m<s;m++){U=(N=e[m])==y?0:255;u[m]=U<<24|N<<16|N<<8|N}if(16==c)for(m=0;m<s;m++){N=e[m<<1],U=f(e,m<<1)==y?0:255;u[m]=U<<24|N<<16|N<<8|N}}return h},t.decode=function(e){for(var i,r=new Uint8Array(e),n=8,s=t._bin,a=s.readUshort,o=s.readUint,h={tabs:{},frames:[]},u=new Uint8Array(r.length),l=0,c=0,f=[137,80,78,71,13,10,26,10],d=0;d<8;d++)if(r[d]!=f[d])throw"The input is not a PNG file!";for(;n<r.length;){var m=s.readUint(r,n);n+=4;var p=s.readASCII(r,n,4);if(n+=4,"IHDR"==p)t.decode._IHDR(r,n,h);else if("IDAT"==p){for(d=0;d<m;d++)u[l+d]=r[n+d];l+=m}else if("acTL"==p)h.tabs[p]={num_frames:o(r,n),num_plays:o(r,n+4)},i=new Uint8Array(r.length);else if("fcTL"==p){if(0!=c)(M=h.frames[h.frames.length-1]).data=t.decode._decompress(h,i.slice(0,c),M.rect.width,M.rect.height),c=0;var y={x:o(r,n+12),y:o(r,n+16),width:o(r,n+4),height:o(r,n+8)},g=a(r,n+22);g=a(r,n+20)/(0==g?100:g);var v={rect:y,delay:Math.round(1e3*g),dispose:r[n+24],blend:r[n+25]};h.frames.push(v)}else if("fdAT"==p){for(d=0;d<m-4;d++)i[c+d]=r[n+d+4];c+=m-4}else if("pHYs"==p)h.tabs[p]=[s.readUint(r,n),s.readUint(r,n+4),r[n+8]];else if("cHRM"==p){h.tabs[p]=[];for(d=0;d<8;d++)h.tabs[p].push(s.readUint(r,n+4*d))}else if("tEXt"==p){null==h.tabs[p]&&(h.tabs[p]={});var x=s.nextZero(r,n),_=s.readASCII(r,n,x-n),b=s.readASCII(r,x+1,n+m-x-1);h.tabs[p][_]=b}else if("iTXt"==p){null==h.tabs[p]&&(h.tabs[p]={});x=0;var w=n;x=s.nextZero(r,w);_=s.readASCII(r,w,x-w),r[w=x+1],r[w+1];w+=2,x=s.nextZero(r,w);s.readASCII(r,w,x-w);w=x+1,x=s.nextZero(r,w);s.readUTF8(r,w,x-w);w=x+1;b=s.readUTF8(r,w,m-(w-n));h.tabs[p][_]=b}else if("PLTE"==p)h.tabs[p]=s.readBytes(r,n,m);else if("hIST"==p){var z=h.tabs.PLTE.length/3;h.tabs[p]=[];for(d=0;d<z;d++)h.tabs[p].push(a(r,n+2*d))}else if("tRNS"==p)3==h.ctype?h.tabs[p]=s.readBytes(r,n,m):0==h.ctype?h.tabs[p]=a(r,n):2==h.ctype&&(h.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]);else if("gAMA"==p)h.tabs[p]=s.readUint(r,n)/1e5;else if("sRGB"==p)h.tabs[p]=r[n];else if("bKGD"==p)0==h.ctype||4==h.ctype?h.tabs[p]=[a(r,n)]:2==h.ctype||6==h.ctype?h.tabs[p]=[a(r,n),a(r,n+2),a(r,n+4)]:3==h.ctype&&(h.tabs[p]=r[n]);else if("IEND"==p){var M;if(0!=c)(M=h.frames[h.frames.length-1]).data=t.decode._decompress(h,i.slice(0,c),M.rect.width,M.rect.height),c=0;h.data=t.decode._decompress(h,u,h.width,h.height);break}n+=m;s.readUint(r,n);n+=4}return delete h.compress,delete h.interlace,delete h.filter,h},t.decode._decompress=function(e,i,r,n){return 0==e.compress&&(i=t.decode._inflate(i)),0==e.interlace?i=t.decode._filterZero(i,e,0,r,n):1==e.interlace&&(i=t.decode._readInterlace(i,e)),i},t.decode._inflate=function(t){return e.inflate(t)},t.decode._readInterlace=function(e,i){for(var r=i.width,n=i.height,s=t.decode._getBPP(i),a=s>>3,o=Math.ceil(r*s/8),h=new Uint8Array(n*o),u=0,l=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],m=0;m<7;){for(var p=f[m],y=d[m],g=0,v=0,x=l[m];x<n;)x+=p,v++;for(var _=c[m];_<r;)_+=y,g++;var b=Math.ceil(g*s/8);t.decode._filterZero(e,i,u,g,v);for(var w=0,z=l[m];z<n;){for(var M=c[m],k=u+w*b<<3;M<r;){var A;if(1==s)A=(A=e[k>>3])>>7-(7&k)&1,h[z*o+(M>>3)]|=A<<7-((3&M)<<0);if(2==s)A=(A=e[k>>3])>>6-(7&k)&3,h[z*o+(M>>2)]|=A<<6-((3&M)<<1);if(4==s)A=(A=e[k>>3])>>4-(7&k)&15,h[z*o+(M>>1)]|=A<<4-((1&M)<<2);if(s>=8)for(var S=z*o+M*a,E=0;E<a;E++)h[S+E]=e[(k>>3)+E];k+=s,M+=y}w++,z+=p}g*v!=0&&(u+=v*(1+b)),m+=1}return h},t.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},t.decode._filterZero=function(e,i,r,n,s){var a=t.decode._getBPP(i),o=Math.ceil(n*a/8),h=t.decode._paeth;a=Math.ceil(a/8);for(var u=0;u<s;u++){var l=r+u*o,c=l+u+1,f=e[c-1];if(0==f)for(var d=0;d<o;d++)e[l+d]=e[c+d];else if(1==f){for(d=0;d<a;d++)e[l+d]=e[c+d];for(d=a;d<o;d++)e[l+d]=e[c+d]+e[l+d-a]&255}else if(0==u){for(d=0;d<a;d++)e[l+d]=e[c+d];if(2==f)for(d=a;d<o;d++)e[l+d]=255&e[c+d];if(3==f)for(d=a;d<o;d++)e[l+d]=e[c+d]+(e[l+d-a]>>1)&255;if(4==f)for(d=a;d<o;d++)e[l+d]=e[c+d]+h(e[l+d-a],0,0)&255}else{if(2==f)for(d=0;d<o;d++)e[l+d]=e[c+d]+e[l+d-o]&255;if(3==f){for(d=0;d<a;d++)e[l+d]=e[c+d]+(e[l+d-o]>>1)&255;for(d=a;d<o;d++)e[l+d]=e[c+d]+(e[l+d-o]+e[l+d-a]>>1)&255}if(4==f){for(d=0;d<a;d++)e[l+d]=e[c+d]+h(0,e[l+d-o],0)&255;for(d=a;d<o;d++)e[l+d]=e[c+d]+h(e[l+d-a],e[l+d-o],e[l+d-a-o])&255}}}return e},t.decode._paeth=function(t,e,i){var r=t+e-i,n=Math.abs(r-t),s=Math.abs(r-e),a=Math.abs(r-i);return n<=s&&n<=a?t:s<=a?e:i},t.decode._IHDR=function(e,i,r){var n=t._bin;r.width=n.readUint(e,i),i+=4,r.height=n.readUint(e,i),i+=4,r.depth=e[i],i++,r.ctype=e[i],i++,r.compress=e[i],i++,r.filter=e[i],i++,r.interlace=e[i],i++},t._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,i){t[e]=i>>8&255,t[e+1]=255&i},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},readASCII:function(t,e,i){for(var r="",n=0;n<i;n++)r+=String.fromCharCode(t[e+n]);return r},writeASCII:function(t,e,i){for(var r=0;r<i.length;r++)t[e+r]=i.charCodeAt(r)},readBytes:function(t,e,i){for(var r=[],n=0;n<i;n++)r.push(t[e+n]);return r},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(e,i,r){for(var n,s="",a=0;a<r;a++)s+="%"+t._bin.pad(e[i+a].toString(16));try{n=decodeURIComponent(s)}catch(o){return t._bin.readASCII(e,i,r)}return n}},t._copyTile=function(t,e,i,r,n,s,a,o,h){for(var u=Math.min(e,n),l=Math.min(i,s),c=0,f=0,d=0;d<l;d++)for(var m=0;m<u;m++)if(a>=0&&o>=0?(c=d*e+m<<2,f=(o+d)*n+a+m<<2):(c=(-o+d)*e-a+m<<2,f=d*n+m<<2),0==h)r[f]=t[c],r[f+1]=t[c+1],r[f+2]=t[c+2],r[f+3]=t[c+3];else if(1==h){var p=t[c+3]*(1/255),y=t[c]*p,g=t[c+1]*p,v=t[c+2]*p,x=r[f+3]*(1/255),_=r[f]*x,b=r[f+1]*x,w=r[f+2]*x,z=1-p,M=p+x*z,k=0==M?0:1/M;r[f+3]=255*M,r[f+0]=(y+_*z)*k,r[f+1]=(g+b*z)*k,r[f+2]=(v+w*z)*k}else if(2==h){p=t[c+3],y=t[c],g=t[c+1],v=t[c+2],x=r[f+3],_=r[f],b=r[f+1],w=r[f+2];p==x&&y==_&&g==b&&v==w?(r[f]=0,r[f+1]=0,r[f+2]=0,r[f+3]=0):(r[f]=y,r[f+1]=g,r[f+2]=v,r[f+3]=p)}else if(3==h){p=t[c+3],y=t[c],g=t[c+1],v=t[c+2],x=r[f+3],_=r[f],b=r[f+1],w=r[f+2];if(p==x&&y==_&&g==b&&v==w)continue;if(p<220&&x>20)return!1}return!0},t.encode=function(e,i,r,n,s,a){null==n&&(n=0),null==a&&(a=!1);for(var o=new Uint8Array(e[0].byteLength*e.length+100),h=[137,80,78,71,13,10,26,10],u=0;u<8;u++)o[u]=h[u];var l=8,c=t._bin,f=t.crc.crc,d=c.writeUint,m=c.writeUshort,p=c.writeASCII,y=t.encode.compressPNG(e,i,r,n,a);d(o,l,13),p(o,l+=4,"IHDR"),d(o,l+=4,i),d(o,l+=4,r),o[l+=4]=y.depth,o[++l]=y.ctype,o[++l]=0,o[++l]=0,o[++l]=0,d(o,++l,f(o,l-17,17)),d(o,l+=4,1),p(o,l+=4,"sRGB"),o[l+=4]=1,d(o,++l,f(o,l-5,5)),l+=4;var g=e.length>1;if(g&&(d(o,l,8),p(o,l+=4,"acTL"),d(o,l+=4,e.length),d(o,l+=4,0),d(o,l+=4,f(o,l-12,12)),l+=4),3==y.ctype){d(o,l,3*(A=y.plte.length)),p(o,l+=4,"PLTE"),l+=4;for(u=0;u<A;u++){var v=3*u,x=y.plte[u],_=255&x,b=x>>8&255,w=x>>16&255;o[l+v+0]=_,o[l+v+1]=b,o[l+v+2]=w}if(d(o,l+=3*A,f(o,l-3*A-4,3*A+4)),l+=4,y.gotAlpha){d(o,l,A),p(o,l+=4,"tRNS"),l+=4;for(u=0;u<A;u++)o[l+u]=y.plte[u]>>24&255;d(o,l+=A,f(o,l-A-4,A+4)),l+=4}}for(var z=0,M=0;M<y.frames.length;M++){var k=y.frames[M];g&&(d(o,l,26),p(o,l+=4,"fcTL"),d(o,l+=4,z++),d(o,l+=4,k.rect.width),d(o,l+=4,k.rect.height),d(o,l+=4,k.rect.x),d(o,l+=4,k.rect.y),m(o,l+=4,s[M]),m(o,l+=2,1e3),o[l+=2]=k.dispose,o[++l]=k.blend,d(o,++l,f(o,l-30,30)),l+=4);var A,S=k.cimg;d(o,l,(A=S.length)+(0==M?0:4));var E=l+=4;p(o,l,0==M?"IDAT":"fdAT"),l+=4,0!=M&&(d(o,l,z++),l+=4);for(u=0;u<A;u++)o[l+u]=S[u];d(o,l+=A,f(o,E,l-E)),l+=4}return d(o,l,0),p(o,l+=4,"IEND"),d(o,l+=4,f(o,l-4,4)),l+=4,o.buffer.slice(0,l)},t.encode.compressPNG=function(e,i,r,n,s){for(var a=t.encode.compress(e,i,r,n,!1,s),o=0;o<e.length;o++){var h=a.frames[o],u=(h.rect.width,h.rect.height),l=h.bpl,c=h.bpp,f=new Uint8Array(u*l+u);h.cimg=t.encode._filterZero(h.img,u,c,l,f)}return a},t.encode.compress=function(e,i,r,n,s,a){null==a&&(a=!1);for(var o=6,h=8,u=4,l=255,c=0;c<e.length;c++)for(var f=new Uint8Array(e[c]),d=f.length,m=0;m<d;m+=4)l&=f[m+3];var p=255!=l,y={},g=[];if(0!=e.length&&(y[0]=0,g.push(0),0!=n&&n--),0!=n){var v=t.quantize(e,n,s);e=v.bufs;for(m=0;m<v.plte.length;m++){null==y[_=v.plte[m].est.rgba]&&(y[_]=g.length,g.push(_))}}else for(c=0;c<e.length;c++){var x=new Uint32Array(e[c]);for(d=x.length,m=0;m<d;m++){var _=x[m];if((m<i||_!=x[m-1]&&_!=x[m-i])&&null==y[_]&&(y[_]=g.length,g.push(_),g.length>=300))break}}var b=!!p&&s,w=g.length;w<=256&&0==a&&(h=w<=2?1:w<=4?2:w<=16?4:8,s&&(h=8),p=!0);var z=[];for(c=0;c<e.length;c++){var M=new Uint8Array(e[c]),k=new Uint32Array(M.buffer),A=0,S=0,E=i,N=r,B=0;if(0!=c&&!b){for(var U=s||1==c||2==z[z.length-2].dispose?1:2,T=0,R=1e9,C=0;C<U;C++){for(var O=new Uint8Array(e[c-1-C]),I=new Uint32Array(e[c-1-C]),V=i,F=r,Z=-1,q=-1,D=0;D<r;D++)for(var H=0;H<i;H++){k[m=D*i+H]!=I[m]&&(H<V&&(V=H),H>Z&&(Z=H),D<F&&(F=D),D>q&&(q=D))}var P=-1==Z?1:(Z-V+1)*(q-F+1);P<R&&(R=P,T=C,-1==Z?(A=S=0,E=N=1):(A=V,S=F,E=Z-V+1,N=q-F+1))}O=new Uint8Array(e[c-1-T]);1==T&&(z[z.length-1].dispose=2);var j=new Uint8Array(E*N*4);new Uint32Array(j.buffer);t._copyTile(O,i,r,j,E,N,-A,-S,0),t._copyTile(M,i,r,j,E,N,-A,-S,3)?(t._copyTile(M,i,r,j,E,N,-A,-S,2),B=1):(t._copyTile(M,i,r,j,E,N,-A,-S,0),B=0),M=j,k=new Uint32Array(M.buffer)}var L=4*E;if(w<=256&&0==a){L=Math.ceil(h*E/8);for(j=new Uint8Array(L*N),D=0;D<N;D++){m=D*L;var G=D*E;if(8==h)for(H=0;H<E;H++)j[m+H]=y[k[G+H]];else if(4==h)for(H=0;H<E;H++)j[m+(H>>1)]|=y[k[G+H]]<<4-4*(1&H);else if(2==h)for(H=0;H<E;H++)j[m+(H>>2)]|=y[k[G+H]]<<6-2*(3&H);else if(1==h)for(H=0;H<E;H++)j[m+(H>>3)]|=y[k[G+H]]<<7-1*(7&H)}M=j,o=3,u=1}else if(0==p&&1==e.length){j=new Uint8Array(E*N*3);var W=E*N;for(m=0;m<W;m++){var Y=3*m,X=4*m;j[Y]=M[X],j[Y+1]=M[X+1],j[Y+2]=M[X+2]}M=j,o=2,u=3,L=3*E}z.push({rect:{x:A,y:S,width:E,height:N},img:M,bpl:L,bpp:u,blend:B,dispose:b?1:0})}return{ctype:o,depth:h,plte:g,gotAlpha:p,frames:z}},t.encode._filterZero=function(i,r,n,s,a){for(var o=[],h=0;h<5;h++)if(!(r*s>5e5)||2!=h&&3!=h&&4!=h){for(var u=0;u<r;u++)t.encode._filterLine(a,i,u,s,n,h);if(o.push(e.deflate(a)),1==n)break}for(var l,c=1e9,f=0;f<o.length;f++)o[f].length<c&&(l=f,c=o[f].length);return o[l]},t.encode._filterLine=function(e,i,r,n,s,a){var o=r*n,h=o+r,u=t.decode._paeth;if(e[h]=a,h++,0==a)for(var l=0;l<n;l++)e[h+l]=i[o+l];else if(1==a){for(l=0;l<s;l++)e[h+l]=i[o+l];for(l=s;l<n;l++)e[h+l]=i[o+l]-i[o+l-s]+256&255}else if(0==r){for(l=0;l<s;l++)e[h+l]=i[o+l];if(2==a)for(l=s;l<n;l++)e[h+l]=i[o+l];if(3==a)for(l=s;l<n;l++)e[h+l]=i[o+l]-(i[o+l-s]>>1)+256&255;if(4==a)for(l=s;l<n;l++)e[h+l]=i[o+l]-u(i[o+l-s],0,0)+256&255}else{if(2==a)for(l=0;l<n;l++)e[h+l]=i[o+l]+256-i[o+l-n]&255;if(3==a){for(l=0;l<s;l++)e[h+l]=i[o+l]+256-(i[o+l-n]>>1)&255;for(l=s;l<n;l++)e[h+l]=i[o+l]+256-(i[o+l-n]+i[o+l-s]>>1)&255}if(4==a){for(l=0;l<s;l++)e[h+l]=i[o+l]+256-u(0,i[o+l-n],0)&255;for(l=s;l<n;l++)e[h+l]=i[o+l]+256-u(i[o+l-s],i[o+l-n],i[o+l-s-n])&255}}},t.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,r=0;r<8;r++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(e,i,r,n){for(var s=0;s<n;s++)e=t.crc.table[255&(e^i[r+s])]^e>>>8;return e},crc:function(e,i,r){return 4294967295^t.crc.update(4294967295,e,i,r)}},t.quantize=function(e,i,r){for(var n=[],s=0,a=0;a<e.length;a++)n.push(t.encode.alphaMul(new Uint8Array(e[a]),r)),s+=e[a].byteLength;var o=new Uint8Array(s),h=new Uint32Array(o.buffer),u=0;for(a=0;a<n.length;a++){for(var l=n[a],c=l.length,f=0;f<c;f++)o[u+f]=l[f];u+=c}var d={i0:0,i1:o.length,bst:null,est:null,tdst:0,left:null,right:null};d.bst=t.quantize.stats(o,d.i0,d.i1),d.est=t.quantize.estats(d.bst);for(var m=[d];m.length<i;){var p=0,y=0;for(a=0;a<m.length;a++)m[a].est.L>p&&(p=m[a].est.L,y=a);if(p<.001)break;var g=m[y],v=t.quantize.splitPixels(o,h,g.i0,g.i1,g.est.e,g.est.eMq255),x={i0:g.i0,i1:v,bst:null,est:null,tdst:0,left:null,right:null};x.bst=t.quantize.stats(o,x.i0,x.i1),x.est=t.quantize.estats(x.bst);var _={i0:v,i1:g.i1,bst:null,est:null,tdst:0,left:null,right:null};_.bst={R:[],m:[],N:g.bst.N-x.bst.N};for(a=0;a<16;a++)_.bst.R[a]=g.bst.R[a]-x.bst.R[a];for(a=0;a<4;a++)_.bst.m[a]=g.bst.m[a]-x.bst.m[a];_.est=t.quantize.estats(_.bst),g.left=x,g.right=_,m[y]=x,m.push(_)}m.sort(function(t,e){return e.bst.N-t.bst.N});for(var b=0;b<n.length;b++){var w=t.quantize.planeDst,z=new Uint8Array(n[b].buffer),M=new Uint32Array(n[b].buffer),k=z.length;for(a=0;a<k;a+=4){for(var A=z[a]*(1/255),S=z[a+1]*(1/255),E=z[a+2]*(1/255),N=z[a+3]*(1/255),B=d;B.left;)B=w(B.est,A,S,E,N)<=0?B.left:B.right;M[a>>2]=B.est.rgba}n[b]=M.buffer}return{bufs:n,plte:m}},t.quantize.getNearest=function(e,i,r,n,s){if(null==e.left)return e.tdst=t.quantize.dist(e.est.q,i,r,n,s),e;var a=t.quantize.planeDst(e.est,i,r,n,s),o=e.left,h=e.right;a>0&&(o=e.right,h=e.left);var u=t.quantize.getNearest(o,i,r,n,s);if(u.tdst<=a*a)return u;var l=t.quantize.getNearest(h,i,r,n,s);return l.tdst<u.tdst?l:u},t.quantize.planeDst=function(t,e,i,r,n){var s=t.e;return s[0]*e+s[1]*i+s[2]*r+s[3]*n-t.eMq},t.quantize.dist=function(t,e,i,r,n){var s=e-t[0],a=i-t[1],o=r-t[2],h=n-t[3];return s*s+a*a+o*o+h*h},t.quantize.splitPixels=function(e,i,r,n,s,a){var o=t.quantize.vecDot;n-=4;for(;r<n;){for(;o(e,r,s)<=a;)r+=4;for(;o(e,n,s)>a;)n-=4;if(r>=n)break;var h=i[r>>2];i[r>>2]=i[n>>2],i[n>>2]=h,r+=4,n-=4}for(;o(e,r,s)>a;)r-=4;return r+4},t.quantize.vecDot=function(t,e,i){return t[e]*i[0]+t[e+1]*i[1]+t[e+2]*i[2]+t[e+3]*i[3]},t.quantize.stats=function(t,e,i){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],s=i-e>>2,a=e;a<i;a+=4){var o=t[a]*(1/255),h=t[a+1]*(1/255),u=t[a+2]*(1/255),l=t[a+3]*(1/255);n[0]+=o,n[1]+=h,n[2]+=u,n[3]+=l,r[0]+=o*o,r[1]+=o*h,r[2]+=o*u,r[3]+=o*l,r[5]+=h*h,r[6]+=h*u,r[7]+=h*l,r[10]+=u*u,r[11]+=u*l,r[15]+=l*l}return r[4]=r[1],r[8]=r[2],r[12]=r[3],r[9]=r[6],r[13]=r[7],r[14]=r[11],{R:r,m:n,N:s}},t.quantize.estats=function(e){var i=e.R,r=e.m,n=e.N,s=r[0],a=r[1],o=r[2],h=r[3],u=0==n?0:1/n,l=[i[0]-s*s*u,i[1]-s*a*u,i[2]-s*o*u,i[3]-s*h*u,i[4]-a*s*u,i[5]-a*a*u,i[6]-a*o*u,i[7]-a*h*u,i[8]-o*s*u,i[9]-o*a*u,i[10]-o*o*u,i[11]-o*h*u,i[12]-h*s*u,i[13]-h*a*u,i[14]-h*o*u,i[15]-h*h*u],c=l,f=t.M4,d=[.5,.5,.5,.5],m=0,p=0;if(0!=n)for(var y=0;y<10&&(d=f.multVec(c,d),p=Math.sqrt(f.dot(d,d)),d=f.sml(1/p,d),!(Math.abs(p-m)<1e-9));y++)m=p;var g=[s*u,a*u,o*u,h*u],v=f.dot(f.sml(255,g),d),x=g[3]<.001?0:1/g[3];return{Cov:l,q:g,e:d,L:m,eMq255:v,eMq:f.dot(d,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2]*x)<<16|Math.round(255*g[1]*x)<<8|Math.round(255*g[0]*x)<<0)>>>0}},t.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},t.encode.alphaMul=function(t,e){for(var i=new Uint8Array(t.length),r=t.length>>2,n=0;n<r;n++){var s=n<<2,a=t[s+3];e&&(a=a<128?0:255);var o=a*(1/255);i[s+0]=t[s+0]*o,i[s+1]=t[s+1]*o,i[s+2]=t[s+2]*o,i[s+3]=a}return i}}(e,i(9))}()}).call(this,i(8))},function(t,e,i){"use strict";t.exports=function(t,e,i,r){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{s=s+(n=n+e[r++]|0)|0}while(--a);n%=65521,s%=65521}return n|s<<16|0}},function(t,e,i){"use strict";var r=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,n){var s=r,a=n+i;t^=-1;for(var o=n;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},function(t,e,i){"use strict";var r=i(0),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(u){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){s=!1}for(var a=new r.Buf8(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",a=0;a<e;a++)i+=String.fromCharCode(t[a]);return i}a[254]=a[254]=1,e.string2buf=function(t){var e,i,n,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296===(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320===(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new r.Buf8(h),a=0,s=0;a<h;s++)55296===(64512&(i=t.charCodeAt(s)))&&s+1<o&&56320===(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[a++]=i:i<2048?(e[a++]=192|i>>>6,e[a++]=128|63&i):i<65536?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,r,n,s,o=e||t.length,u=new Array(2*o);for(r=0,i=0;i<o;)if((n=t[i++])<128)u[r++]=n;else if((s=a[n])>4)u[r++]=65533,i+=s-1;else{for(n&=2===s?31:3===s?15:7;s>1&&i<o;)n=n<<6|63&t[i++],s--;s>1?u[r++]=65533:n<65536?u[r++]=n:(n-=65536,u[r++]=55296|n>>10&1023,u[r++]=56320|1023&n)}return h(u,r)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return i<0?e:0===i?e:i+a[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"===typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var h,u=[],l=!1,c=-1;function f(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&d())}function d(){if(!l){var t=o(f);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||l||o(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var r={};(0,i(0).assign)(r,i(10),i(13),i(7)),t.exports=r},function(t,e,i){"use strict";var r=i(11),n=i(0),s=i(5),a=i(1),o=i(6),h=Object.prototype.toString,u=0,l=-1,c=0,f=8;function d(t){if(!(this instanceof d))return new d(t);this.options=n.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==u)throw new Error(a[i]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var m;if(m="string"===typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=r.deflateSetDictionary(this.strm,m))!==u)throw new Error(a[i]);this._dict_set=!0}}function m(t,e){var i=new d(e);if(i.push(t,!0),i.err)throw i.msg||a[i.err];return i.result}d.prototype.push=function(t,e){var i,a,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"===typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new n.Buf8(l),o.next_out=0,o.avail_out=l),1!==(i=r.deflate(o,a))&&i!==u)return this.onEnd(i),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(n.shrinkBuf(o.output,o.next_out))):this.onData(n.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==i);return 4===a?(i=r.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u):2!==a||(this.onEnd(u),o.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=m,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,m(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,m(t,e)}},function(t,e,i){"use strict";var r,n=i(0),s=i(12),a=i(3),o=i(4),h=i(1),u=0,l=1,c=3,f=4,d=5,m=0,p=1,y=-2,g=-3,v=-5,x=-1,_=1,b=2,w=3,z=4,M=0,k=2,A=8,S=9,E=15,N=8,B=286,U=30,T=19,R=2*B+1,C=15,O=3,I=258,V=I+O+1,F=32,Z=42,q=69,D=73,H=91,P=103,j=113,L=666,G=1,W=2,Y=3,X=4,Q=3;function J(t,e){return t.msg=h[e],e}function K(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(n.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function rt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function nt(t,e,i,r){var s=t.avail_in;return s>r&&(s=r),0===s?0:(t.avail_in-=s,n.arraySet(e,t.input,t.next_in,s,i),1===t.state.wrap?t.adler=a(t.adler,e,s,i):2===t.state.wrap&&(t.adler=o(t.adler,e,s,i)),t.next_in+=s,t.total_in+=s,s)}function st(t,e){var i,r,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+I,d=u[s+a-1],m=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(i=e)+a]===m&&u[i+a-1]===d&&u[i]===u[s]&&u[++i]===u[s+1]){s+=2,i++;do{}while(u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&s<f);if(r=I-(f-s),s=f-I,r>a){if(t.match_start=e,a=r,r>=o)break;d=u[s+a-1],m=u[s+a]}}}while((e=c[e&l])>h&&0!==--n);return a<=t.lookahead?a:t.lookahead}function at(t){var e,i,r,s,a,o=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-V)){n.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=i=t.hash_size;do{r=t.head[--e],t.head[e]=r>=o?r-o:0}while(--i);e=i=o;do{r=t.prev[--e],t.prev[e]=r>=o?r-o:0}while(--i);s+=o}if(0===t.strm.avail_in)break;if(i=nt(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=O)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+O-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<V&&0!==t.strm.avail_in)}function ot(t,e){for(var i,r;;){if(t.lookahead<V){if(at(t),t.lookahead<V&&e===u)return G;if(0===t.lookahead)break}if(i=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-V&&(t.match_length=st(t,i)),t.match_length>=O)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=t.strstart<O-1?t.strstart:O-1,e===f?(et(t,!0),0===t.strm.avail_out?Y:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function ht(t,e){for(var i,r,n;;){if(t.lookahead<V){if(at(t),t.lookahead<V&&e===u)return G;if(0===t.lookahead)break}if(i=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-V&&(t.match_length=st(t,i),t.match_length<=5&&(t.strategy===_||t.match_length===O&&t.strstart-t.match_start>4096)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-O,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=O-1,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return G}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return G}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,e===f?(et(t,!0),0===t.strm.avail_out?Y:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function ut(t,e,i,r,n){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=r,this.func=n}function lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*R),this.dyn_dtree=new n.Buf16(2*(2*U+1)),this.bl_tree=new n.Buf16(2*(2*T+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(C+1),this.heap=new n.Buf16(2*B+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*B+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=k,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Z:j,t.adler=2===e.wrap?0:1,e.last_flush=u,s._tr_init(e),m):J(t,y)}function ft(t){var e,i=ct(t);return i===m&&((e=t.state).window_size=2*e.w_size,$(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=O-1,e.match_available=0,e.ins_h=0),i}function dt(t,e,i,r,s,a){if(!t)return y;var o=1;if(e===x&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>S||i!==A||r<8||r>15||e<0||e>9||a<0||a>z)return J(t,y);8===r&&(r=9);var h=new lt;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+O-1)/O),h.window=new n.Buf8(2*h.w_size),h.head=new n.Buf16(h.hash_size),h.prev=new n.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new n.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=i,ft(t)}r=[new ut(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),0===t.lookahead&&e===u)return G;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,et(t,!1),0===t.strm.avail_out))return G;if(t.strstart-t.block_start>=t.w_size-V&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:X):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),G)}),new ut(4,4,8,4,ot),new ut(4,5,16,8,ot),new ut(4,6,32,32,ot),new ut(4,4,16,16,ht),new ut(8,16,32,32,ht),new ut(8,16,128,128,ht),new ut(8,32,128,256,ht),new ut(32,128,258,1024,ht),new ut(32,258,258,4096,ht)],e.deflateInit=function(t,e){return dt(t,e,A,E,N,M)},e.deflateInit2=dt,e.deflateReset=ft,e.deflateResetKeep=ct,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?y:(t.state.gzhead=e,m):y},e.deflate=function(t,e){var i,n,a,h;if(!t||!t.state||e>d||e<0)return t?J(t,y):y;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===L&&e!==f)return J(t,0===t.avail_out?v:y);if(n.strm=t,i=n.last_flush,n.last_flush=e,n.status===Z)if(2===n.wrap)t.adler=0,it(n,31),it(n,139),it(n,8),n.gzhead?(it(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),it(n,255&n.gzhead.time),it(n,n.gzhead.time>>8&255),it(n,n.gzhead.time>>16&255),it(n,n.gzhead.time>>24&255),it(n,9===n.level?2:n.strategy>=b||n.level<2?4:0),it(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(it(n,255&n.gzhead.extra.length),it(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=o(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=q):(it(n,0),it(n,0),it(n,0),it(n,0),it(n,0),it(n,9===n.level?2:n.strategy>=b||n.level<2?4:0),it(n,Q),n.status=j);else{var g=A+(n.w_bits-8<<4)<<8;g|=(n.strategy>=b||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(g|=F),g+=31-g%31,n.status=j,rt(n,g),0!==n.strstart&&(rt(n,t.adler>>>16),rt(n,65535&t.adler)),t.adler=1}if(n.status===q)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending!==n.pending_buf_size));)it(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=D)}else n.status=D;if(n.status===D)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,it(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.gzindex=0,n.status=H)}else n.status=H;if(n.status===H)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),tt(t),a=n.pending,n.pending===n.pending_buf_size)){h=1;break}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,it(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>a&&(t.adler=o(t.adler,n.pending_buf,n.pending-a,a)),0===h&&(n.status=P)}else n.status=P;if(n.status===P&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&tt(t),n.pending+2<=n.pending_buf_size&&(it(n,255&t.adler),it(n,t.adler>>8&255),t.adler=0,n.status=j)):n.status=j),0!==n.pending){if(tt(t),0===t.avail_out)return n.last_flush=-1,m}else if(0===t.avail_in&&K(e)<=K(i)&&e!==f)return J(t,v);if(n.status===L&&0!==t.avail_in)return J(t,v);if(0!==t.avail_in||0!==n.lookahead||e!==u&&n.status!==L){var x=n.strategy===b?function(t,e){for(var i;;){if(0===t.lookahead&&(at(t),0===t.lookahead)){if(e===u)return G;break}if(t.match_length=0,i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(n,e):n.strategy===w?function(t,e){for(var i,r,n,a,o=t.window;;){if(t.lookahead<=I){if(at(t),t.lookahead<=I&&e===u)return G;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=O&&t.strstart>0&&(r=o[n=t.strstart-1])===o[++n]&&r===o[++n]&&r===o[++n]){a=t.strstart+I;do{}while(r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&r===o[++n]&&n<a);t.match_length=I-(a-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=O?(i=s._tr_tally(t,1,t.match_length-O),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(n,e):r[n.level].func(n,e);if(x!==Y&&x!==X||(n.status=L),x===G||x===Y)return 0===t.avail_out&&(n.last_flush=-1),m;if(x===W&&(e===l?s._tr_align(n):e!==d&&(s._tr_stored_block(n,0,0,!1),e===c&&($(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),tt(t),0===t.avail_out))return n.last_flush=-1,m}return e!==f?m:n.wrap<=0?p:(2===n.wrap?(it(n,255&t.adler),it(n,t.adler>>8&255),it(n,t.adler>>16&255),it(n,t.adler>>24&255),it(n,255&t.total_in),it(n,t.total_in>>8&255),it(n,t.total_in>>16&255),it(n,t.total_in>>24&255)):(rt(n,t.adler>>>16),rt(n,65535&t.adler)),tt(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?m:p)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==Z&&e!==q&&e!==D&&e!==H&&e!==P&&e!==j&&e!==L?J(t,y):(t.state=null,e===j?J(t,g):m):y},e.deflateSetDictionary=function(t,e){var i,r,s,o,h,u,l,c,f=e.length;if(!t||!t.state)return y;if(2===(o=(i=t.state).wrap)||1===o&&i.status!==Z||i.lookahead)return y;for(1===o&&(t.adler=a(t.adler,e,f,0)),i.wrap=0,f>=i.w_size&&(0===o&&($(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new n.Buf8(i.w_size),n.arraySet(c,e,f-i.w_size,i.w_size,0),e=c,f=i.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=f,t.next_in=0,t.input=e,at(i);i.lookahead>=O;){r=i.strstart,s=i.lookahead-(O-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+O-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--s);i.strstart=r,i.lookahead=O-1,at(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=O-1,i.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,i.wrap=o,m},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var r=i(0),n=4,s=0,a=1,o=2;function h(t){for(var e=t.length;--e>=0;)t[e]=0}var u=0,l=1,c=2,f=29,d=256,m=d+1+f,p=30,y=19,g=2*m+1,v=15,x=16,_=7,b=256,w=16,z=17,M=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],N=new Array(2*(m+2));h(N);var B=new Array(2*p);h(B);var U=new Array(512);h(U);var T=new Array(256);h(T);var R=new Array(f);h(R);var C,O,I,V=new Array(p);function F(t,e,i,r,n){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=t&&t.length}function Z(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function q(t){return t<256?U[t]:U[256+(t>>>7)]}function D(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function H(t,e,i){t.bi_valid>x-i?(t.bi_buf|=e<<t.bi_valid&65535,D(t,t.bi_buf),t.bi_buf=e>>x-t.bi_valid,t.bi_valid+=i-x):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function P(t,e,i){H(t,i[2*e],i[2*e+1])}function j(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function L(t,e,i){var r,n,s=new Array(v+1),a=0;for(r=1;r<=v;r++)s[r]=a=a+i[r-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function G(t){var e;for(e=0;e<m;e++)t.dyn_ltree[2*e]=0;for(e=0;e<p;e++)t.dyn_dtree[2*e]=0;for(e=0;e<y;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*b]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){t.bi_valid>8?D(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Y(t,e,i,r){var n=2*e,s=2*i;return t[n]<t[s]||t[n]===t[s]&&r[e]<=r[i]}function X(t,e,i){for(var r=t.heap[i],n=i<<1;n<=t.heap_len&&(n<t.heap_len&&Y(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!Y(e,r,t.heap[n],t.depth));)t.heap[i]=t.heap[n],i=n,n<<=1;t.heap[i]=r}function Q(t,e,i){var r,n,s,a,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===r?P(t,n,e):(P(t,(s=T[n])+d+1,e),0!==(a=k[s])&&H(t,n-=R[s],a),P(t,s=q(--r),i),0!==(a=A[s])&&H(t,r-=V[s],a))}while(o<t.last_lit);P(t,b,e)}function J(t,e){var i,r,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=g,i=0;i<h;i++)0!==s[2*i]?(t.heap[++t.heap_len]=u=i,t.depth[i]=0):s[2*i+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,i=t.heap_len>>1;i>=1;i--)X(t,s,i);n=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],X(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,s[2*n]=s[2*i]+s[2*r],t.depth[n]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,s[2*i+1]=s[2*r+1]=n,t.heap[1]=n++,X(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,r,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(s=0;s<=v;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<g;i++)(s=h[2*h[2*(r=t.heap[i])+1]+1]+1)>m&&(s=m,p++),h[2*r+1]=s,r>u||(t.bl_count[s]++,a=0,r>=d&&(a=f[r-d]),o=h[2*r],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(l[2*r+1]+a)));if(0!==p){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(s=m;0!==s;s--)for(r=t.bl_count[s];0!==r;)(n=t.heap[--i])>u||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),r--)}}(t,e),L(s,u,t.bl_count)}function K(t,e,i){var r,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(i+1)+1]=65535,r=0;r<=i;r++)n=a,a=e[2*(r+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*w]++):o<=10?t.bl_tree[2*z]++:t.bl_tree[2*M]++,o=0,s=n,0===a?(h=138,u=3):n===a?(h=6,u=3):(h=7,u=4))}function $(t,e,i){var r,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),r=0;r<=i;r++)if(n=a,a=e[2*(r+1)+1],!(++o<h&&n===a)){if(o<u)do{P(t,n,t.bl_tree)}while(0!==--o);else 0!==n?(n!==s&&(P(t,n,t.bl_tree),o--),P(t,w,t.bl_tree),H(t,o-3,2)):o<=10?(P(t,z,t.bl_tree),H(t,o-3,3)):(P(t,M,t.bl_tree),H(t,o-11,7));o=0,s=n,0===a?(h=138,u=3):n===a?(h=6,u=3):(h=7,u=4)}}h(V);var tt=!1;function et(t,e,i,n){H(t,(u<<1)+(n?1:0),3),function(t,e,i,n){W(t),n&&(D(t,i),D(t,~i)),r.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){tt||(function(){var t,e,i,r,n,s=new Array(v+1);for(i=0,r=0;r<f-1;r++)for(R[r]=i,t=0;t<1<<k[r];t++)T[i++]=r;for(T[i-1]=r,n=0,r=0;r<16;r++)for(V[r]=n,t=0;t<1<<A[r];t++)U[n++]=r;for(n>>=7;r<p;r++)for(V[r]=n<<7,t=0;t<1<<A[r]-7;t++)U[256+n++]=r;for(e=0;e<=v;e++)s[e]=0;for(t=0;t<=143;)N[2*t+1]=8,t++,s[8]++;for(;t<=255;)N[2*t+1]=9,t++,s[9]++;for(;t<=279;)N[2*t+1]=7,t++,s[7]++;for(;t<=287;)N[2*t+1]=8,t++,s[8]++;for(L(N,m+1,s),t=0;t<p;t++)B[2*t+1]=5,B[2*t]=j(t,5);C=new F(N,k,d+1,m,v),O=new F(B,A,0,p,v),I=new F(new Array(0),S,0,y,_)}(),tt=!0),t.l_desc=new Z(t.dyn_ltree,C),t.d_desc=new Z(t.dyn_dtree,O),t.bl_desc=new Z(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,G(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,i,r){var h,u,f=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return a;return s}(t)),J(t,t.l_desc),J(t,t.d_desc),f=function(t){var e;for(K(t,t.dyn_ltree,t.l_desc.max_code),K(t,t.dyn_dtree,t.d_desc.max_code),J(t,t.bl_desc),e=y-1;e>=3&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),h=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=h&&(h=u)):h=u=i+5,i+4<=h&&-1!==e?et(t,e,i,r):t.strategy===n||u===h?(H(t,(l<<1)+(r?1:0),3),Q(t,N,B)):(H(t,(c<<1)+(r?1:0),3),function(t,e,i,r){var n;for(H(t,e-257,5),H(t,i-1,5),H(t,r-4,4),n=0;n<r;n++)H(t,t.bl_tree[2*E[n]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),Q(t,t.dyn_ltree,t.dyn_dtree)),G(t),r&&W(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(T[i]+d+1)]++,t.dyn_dtree[2*q(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){H(t,l<<1,3),P(t,b,N),function(t){16===t.bi_valid?(D(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var r=i(14),n=i(0),s=i(5),a=i(7),o=i(1),h=i(6),u=i(17),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,e.windowBits);if(i!==a.Z_OK)throw new Error(o[i]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=r.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(o[i])}function f(t,e){var i=new c(e);if(i.push(t,!0),i.err)throw i.msg||o[i.err];return i.result}c.prototype.push=function(t,e){var i,o,h,u,c,f=this.strm,d=this.options.chunkSize,m=this.options.dictionary,p=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"===typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new n.Buf8(d),f.next_out=0,f.avail_out=d),(i=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(i=r.inflateSetDictionary(this.strm,m)),i===a.Z_BUF_ERROR&&!0===p&&(i=a.Z_OK,p=!1),i!==a.Z_STREAM_END&&i!==a.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(f.output,f.next_out),u=f.next_out-h,c=s.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&n.arraySet(f.output,f.output,h,u,0),this.onData(c)):this.onData(n.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==a.Z_STREAM_END);return i===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,i){"use strict";var r=i(0),n=i(3),s=i(4),a=i(15),o=i(16),h=0,u=1,l=2,c=4,f=5,d=6,m=0,p=1,y=2,g=-2,v=-3,x=-4,_=-5,b=8,w=1,z=2,M=3,k=4,A=5,S=6,E=7,N=8,B=9,U=10,T=11,R=12,C=13,O=14,I=15,V=16,F=17,Z=18,q=19,D=20,H=21,P=22,j=23,L=24,G=25,W=26,Y=27,X=28,Q=29,J=30,K=31,$=32,tt=852,et=592,it=15;function rt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function nt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function st(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(tt),e.distcode=e.distdyn=new r.Buf32(et),e.sane=1,e.back=-1,m):g}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,st(t)):g}function ot(t,e){var i,r;return t&&t.state?(r=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?g:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=i,r.wbits=e,at(t))):g}function ht(t,e){var i,r;return t?(r=new nt,t.state=r,r.window=null,(i=ot(t,e))!==m&&(t.state=null),i):g}var ut,lt,ct=!0;function ft(t){if(ct){var e;for(ut=new r.Buf32(512),lt=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(u,t.lens,0,288,ut,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(l,t.lens,0,32,lt,0,t.work,{bits:5}),ct=!1}t.lencode=ut,t.lenbits=9,t.distcode=lt,t.distbits=5}function dt(t,e,i,n){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),n>=a.wsize?(r.arraySet(a.window,e,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>n&&(s=n),r.arraySet(a.window,e,i-n,s,a.wnext),(n-=s)?(r.arraySet(a.window,e,i-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}e.inflateReset=at,e.inflateReset2=ot,e.inflateResetKeep=st,e.inflateInit=function(t){return ht(t,it)},e.inflateInit2=ht,e.inflate=function(t,e){var i,tt,et,it,nt,st,at,ot,ht,ut,lt,ct,mt,pt,yt,gt,vt,xt,_t,bt,wt,zt,Mt,kt,At=0,St=new r.Buf8(4),Et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return g;(i=t.state).mode===R&&(i.mode=C),nt=t.next_out,et=t.output,at=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,ht=i.bits,ut=st,lt=at,zt=m;t:for(;;)switch(i.mode){case w:if(0===i.wrap){i.mode=C;break}for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(2&i.wrap&&35615===ot){i.check=0,St[0]=255&ot,St[1]=ot>>>8&255,i.check=s(i.check,St,2,0),ot=0,ht=0,i.mode=z;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",i.mode=J;break}if((15&ot)!==b){t.msg="unknown compression method",i.mode=J;break}if(ht-=4,wt=8+(15&(ot>>>=4)),0===i.wbits)i.wbits=wt;else if(wt>i.wbits){t.msg="invalid window size",i.mode=J;break}i.dmax=1<<wt,t.adler=i.check=1,i.mode=512&ot?U:R,ot=0,ht=0;break;case z:for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(i.flags=ot,(255&i.flags)!==b){t.msg="unknown compression method",i.mode=J;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=J;break}i.head&&(i.head.text=ot>>8&1),512&i.flags&&(St[0]=255&ot,St[1]=ot>>>8&255,i.check=s(i.check,St,2,0)),ot=0,ht=0,i.mode=M;case M:for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.head&&(i.head.time=ot),512&i.flags&&(St[0]=255&ot,St[1]=ot>>>8&255,St[2]=ot>>>16&255,St[3]=ot>>>24&255,i.check=s(i.check,St,4,0)),ot=0,ht=0,i.mode=k;case k:for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.head&&(i.head.xflags=255&ot,i.head.os=ot>>8),512&i.flags&&(St[0]=255&ot,St[1]=ot>>>8&255,i.check=s(i.check,St,2,0)),ot=0,ht=0,i.mode=A;case A:if(1024&i.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.length=ot,i.head&&(i.head.extra_len=ot),512&i.flags&&(St[0]=255&ot,St[1]=ot>>>8&255,i.check=s(i.check,St,2,0)),ot=0,ht=0}else i.head&&(i.head.extra=null);i.mode=S;case S:if(1024&i.flags&&((ct=i.length)>st&&(ct=st),ct&&(i.head&&(wt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,tt,it,ct,wt)),512&i.flags&&(i.check=s(i.check,tt,ct,it)),st-=ct,it+=ct,i.length-=ct),i.length))break t;i.length=0,i.mode=E;case E:if(2048&i.flags){if(0===st)break t;ct=0;do{wt=tt[it+ct++],i.head&&wt&&i.length<65536&&(i.head.name+=String.fromCharCode(wt))}while(wt&&ct<st);if(512&i.flags&&(i.check=s(i.check,tt,ct,it)),st-=ct,it+=ct,wt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=N;case N:if(4096&i.flags){if(0===st)break t;ct=0;do{wt=tt[it+ct++],i.head&&wt&&i.length<65536&&(i.head.comment+=String.fromCharCode(wt))}while(wt&&ct<st);if(512&i.flags&&(i.check=s(i.check,tt,ct,it)),st-=ct,it+=ct,wt)break t}else i.head&&(i.head.comment=null);i.mode=B;case B:if(512&i.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot!==(65535&i.check)){t.msg="header crc mismatch",i.mode=J;break}ot=0,ht=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=R;break;case U:for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}t.adler=i.check=rt(ot),ot=0,ht=0,i.mode=T;case T:if(0===i.havedict)return t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,y;t.adler=i.check=1,i.mode=R;case R:if(e===f||e===d)break t;case C:if(i.last){ot>>>=7&ht,ht-=7&ht,i.mode=Y;break}for(;ht<3;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}switch(i.last=1&ot,ht-=1,3&(ot>>>=1)){case 0:i.mode=O;break;case 1:if(ft(i),i.mode=D,e===d){ot>>>=2,ht-=2;break t}break;case 2:i.mode=F;break;case 3:t.msg="invalid block type",i.mode=J}ot>>>=2,ht-=2;break;case O:for(ot>>>=7&ht,ht-=7&ht;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if((65535&ot)!==(ot>>>16^65535)){t.msg="invalid stored block lengths",i.mode=J;break}if(i.length=65535&ot,ot=0,ht=0,i.mode=I,e===d)break t;case I:i.mode=V;case V:if(ct=i.length){if(ct>st&&(ct=st),ct>at&&(ct=at),0===ct)break t;r.arraySet(et,tt,it,ct,nt),st-=ct,it+=ct,at-=ct,nt+=ct,i.length-=ct;break}i.mode=R;break;case F:for(;ht<14;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(i.nlen=257+(31&ot),ot>>>=5,ht-=5,i.ndist=1+(31&ot),ot>>>=5,ht-=5,i.ncode=4+(15&ot),ot>>>=4,ht-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=J;break}i.have=0,i.mode=Z;case Z:for(;i.have<i.ncode;){for(;ht<3;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.lens[Et[i.have++]]=7&ot,ot>>>=3,ht-=3}for(;i.have<19;)i.lens[Et[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Mt={bits:i.lenbits},zt=o(h,i.lens,0,19,i.lencode,0,i.work,Mt),i.lenbits=Mt.bits,zt){t.msg="invalid code lengths set",i.mode=J;break}i.have=0,i.mode=q;case q:for(;i.have<i.nlen+i.ndist;){for(;gt=(At=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,vt=65535&At,!((yt=At>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(vt<16)ot>>>=yt,ht-=yt,i.lens[i.have++]=vt;else{if(16===vt){for(kt=yt+2;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot>>>=yt,ht-=yt,0===i.have){t.msg="invalid bit length repeat",i.mode=J;break}wt=i.lens[i.have-1],ct=3+(3&ot),ot>>>=2,ht-=2}else if(17===vt){for(kt=yt+3;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ht-=yt,wt=0,ct=3+(7&(ot>>>=yt)),ot>>>=3,ht-=3}else{for(kt=yt+7;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ht-=yt,wt=0,ct=11+(127&(ot>>>=yt)),ot>>>=7,ht-=7}if(i.have+ct>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=J;break}for(;ct--;)i.lens[i.have++]=wt}}if(i.mode===J)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=J;break}if(i.lenbits=9,Mt={bits:i.lenbits},zt=o(u,i.lens,0,i.nlen,i.lencode,0,i.work,Mt),i.lenbits=Mt.bits,zt){t.msg="invalid literal/lengths set",i.mode=J;break}if(i.distbits=6,i.distcode=i.distdyn,Mt={bits:i.distbits},zt=o(l,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Mt),i.distbits=Mt.bits,zt){t.msg="invalid distances set",i.mode=J;break}if(i.mode=D,e===d)break t;case D:i.mode=H;case H:if(st>=6&&at>=258){t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,a(t,lt),nt=t.next_out,et=t.output,at=t.avail_out,it=t.next_in,tt=t.input,st=t.avail_in,ot=i.hold,ht=i.bits,i.mode===R&&(i.back=-1);break}for(i.back=0;gt=(At=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,vt=65535&At,!((yt=At>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(gt&&0===(240&gt)){for(xt=yt,_t=gt,bt=vt;gt=(At=i.lencode[bt+((ot&(1<<xt+_t)-1)>>xt)])>>>16&255,vt=65535&At,!(xt+(yt=At>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ot>>>=xt,ht-=xt,i.back+=xt}if(ot>>>=yt,ht-=yt,i.back+=yt,i.length=vt,0===gt){i.mode=W;break}if(32&gt){i.back=-1,i.mode=R;break}if(64&gt){t.msg="invalid literal/length code",i.mode=J;break}i.extra=15&gt,i.mode=P;case P:if(i.extra){for(kt=i.extra;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.length+=ot&(1<<i.extra)-1,ot>>>=i.extra,ht-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=j;case j:for(;gt=(At=i.distcode[ot&(1<<i.distbits)-1])>>>16&255,vt=65535&At,!((yt=At>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(0===(240&gt)){for(xt=yt,_t=gt,bt=vt;gt=(At=i.distcode[bt+((ot&(1<<xt+_t)-1)>>xt)])>>>16&255,vt=65535&At,!(xt+(yt=At>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}ot>>>=xt,ht-=xt,i.back+=xt}if(ot>>>=yt,ht-=yt,i.back+=yt,64&gt){t.msg="invalid distance code",i.mode=J;break}i.offset=vt,i.extra=15&gt,i.mode=L;case L:if(i.extra){for(kt=i.extra;ht<kt;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}i.offset+=ot&(1<<i.extra)-1,ot>>>=i.extra,ht-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=J;break}i.mode=G;case G:if(0===at)break t;if(ct=lt-at,i.offset>ct){if((ct=i.offset-ct)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=J;break}ct>i.wnext?(ct-=i.wnext,mt=i.wsize-ct):mt=i.wnext-ct,ct>i.length&&(ct=i.length),pt=i.window}else pt=et,mt=nt-i.offset,ct=i.length;ct>at&&(ct=at),at-=ct,i.length-=ct;do{et[nt++]=pt[mt++]}while(--ct);0===i.length&&(i.mode=H);break;case W:if(0===at)break t;et[nt++]=i.length,at--,i.mode=H;break;case Y:if(i.wrap){for(;ht<32;){if(0===st)break t;st--,ot|=tt[it++]<<ht,ht+=8}if(lt-=at,t.total_out+=lt,i.total+=lt,lt&&(t.adler=i.check=i.flags?s(i.check,et,lt,nt-lt):n(i.check,et,lt,nt-lt)),lt=at,(i.flags?ot:rt(ot))!==i.check){t.msg="incorrect data check",i.mode=J;break}ot=0,ht=0}i.mode=X;case X:if(i.wrap&&i.flags){for(;ht<32;){if(0===st)break t;st--,ot+=tt[it++]<<ht,ht+=8}if(ot!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=J;break}ot=0,ht=0}i.mode=Q;case Q:zt=p;break t;case J:zt=v;break t;case K:return x;case $:default:return g}return t.next_out=nt,t.avail_out=at,t.next_in=it,t.avail_in=st,i.hold=ot,i.bits=ht,(i.wsize||lt!==t.avail_out&&i.mode<J&&(i.mode<Y||e!==c))&&dt(t,t.output,t.next_out,lt-t.avail_out)?(i.mode=K,x):(ut-=t.avail_in,lt-=t.avail_out,t.total_in+=ut,t.total_out+=lt,i.total+=lt,i.wrap&&lt&&(t.adler=i.check=i.flags?s(i.check,et,lt,t.next_out-lt):n(i.check,et,lt,t.next_out-lt)),t.data_type=i.bits+(i.last?64:0)+(i.mode===R?128:0)+(i.mode===D||i.mode===I?256:0),(0===ut&&0===lt||e===c)&&zt===m&&(zt=_),zt)},e.inflateEnd=function(t){if(!t||!t.state)return g;var e=t.state;return e.window&&(e.window=null),t.state=null,m},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0===(2&(i=t.state).wrap)?g:(i.head=e,e.done=!1,m):g},e.inflateSetDictionary=function(t,e){var i,r=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==T?g:i.mode===T&&n(1,e,r,0)!==i.check?v:dt(t,e,r,r)?(i.mode=K,x):(i.havedict=1,m):g},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,r,n,s,a,o,h,u,l,c,f,d,m,p,y,g,v,x,_,b,w,z,M,k,A;i=t.state,r=t.next_in,k=t.input,n=r+(t.avail_in-5),s=t.next_out,A=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=i.dmax,u=i.wsize,l=i.whave,c=i.wnext,f=i.window,d=i.hold,m=i.bits,p=i.lencode,y=i.distcode,g=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{m<15&&(d+=k[r++]<<m,m+=8,d+=k[r++]<<m,m+=8),x=p[d&g];e:for(;;){if(d>>>=_=x>>>24,m-=_,0===(_=x>>>16&255))A[s++]=65535&x;else{if(!(16&_)){if(0===(64&_)){x=p[(65535&x)+(d&(1<<_)-1)];continue e}if(32&_){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}b=65535&x,(_&=15)&&(m<_&&(d+=k[r++]<<m,m+=8),b+=d&(1<<_)-1,d>>>=_,m-=_),m<15&&(d+=k[r++]<<m,m+=8,d+=k[r++]<<m,m+=8),x=y[d&v];i:for(;;){if(d>>>=_=x>>>24,m-=_,!(16&(_=x>>>16&255))){if(0===(64&_)){x=y[(65535&x)+(d&(1<<_)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(w=65535&x,m<(_&=15)&&(d+=k[r++]<<m,(m+=8)<_&&(d+=k[r++]<<m,m+=8)),(w+=d&(1<<_)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(d>>>=_,m-=_,w>(_=s-a)){if((_=w-_)>l&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(z=0,M=f,0===c){if(z+=u-_,_<b){b-=_;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}}else if(c<_){if(z+=u+c-_,(_-=c)<b){b-=_;do{A[s++]=f[z++]}while(--_);if(z=0,c<b){b-=_=c;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}}}else if(z+=c-_,_<b){b-=_;do{A[s++]=f[z++]}while(--_);z=s-w,M=A}for(;b>2;)A[s++]=M[z++],A[s++]=M[z++],A[s++]=M[z++],b-=3;b&&(A[s++]=M[z++],b>1&&(A[s++]=M[z++]))}else{z=s-w;do{A[s++]=A[z++],A[s++]=A[z++],A[s++]=A[z++],b-=3}while(b>2);b&&(A[s++]=A[z++],b>1&&(A[s++]=A[z++]))}break}}break}}while(r<n&&s<o);r-=b=m>>3,d&=(1<<(m-=b<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=s<o?o-s+257:257-(s-o),i.hold=d,i.bits=m}},function(t,e,i){"use strict";var r=i(0),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,h,u,l,c,f){var d,m,p,y,g,v,x,_,b,w=f.bits,z=0,M=0,k=0,A=0,S=0,E=0,N=0,B=0,U=0,T=0,R=null,C=0,O=new r.Buf16(16),I=new r.Buf16(16),V=null,F=0;for(z=0;z<=15;z++)O[z]=0;for(M=0;M<h;M++)O[e[i+M]]++;for(S=w,A=15;A>=1&&0===O[A];A--);if(S>A&&(S=A),0===A)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(k=1;k<A&&0===O[k];k++);for(S<k&&(S=k),B=1,z=1;z<=15;z++)if(B<<=1,(B-=O[z])<0)return-1;if(B>0&&(0===t||1!==A))return-1;for(I[1]=0,z=1;z<15;z++)I[z+1]=I[z]+O[z];for(M=0;M<h;M++)0!==e[i+M]&&(c[I[e[i+M]]++]=M);if(0===t?(R=V=c,v=19):1===t?(R=n,C-=257,V=s,F-=257,v=256):(R=a,V=o,v=-1),T=0,M=0,z=k,g=l,E=S,N=0,p=-1,y=(U=1<<S)-1,1===t&&U>852||2===t&&U>592)return 1;for(;;){x=z-N,c[M]<v?(_=0,b=c[M]):c[M]>v?(_=V[F+c[M]],b=R[C+c[M]]):(_=96,b=0),d=1<<z-N,k=m=1<<E;do{u[g+(T>>N)+(m-=d)]=x<<24|_<<16|b|0}while(0!==m);for(d=1<<z-1;T&d;)d>>=1;if(0!==d?(T&=d-1,T+=d):T=0,M++,0===--O[z]){if(z===A)break;z=e[i+c[M]]}if(z>S&&(T&y)!==p){for(0===N&&(N=S),g+=k,B=1<<(E=z-N);E+N<A&&!((B-=O[E+N])<=0);)E++,B<<=1;if(U+=1<<E,1===t&&U>852||2===t&&U>592)return 1;u[p=T&y]=S<<24|E<<16|g-l|0}}return 0!==T&&(u[g+T]=z-N<<24|64<<16|0),f.bits=S,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,i){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(h){n=!0,s=h}finally{try{r||null==o.return||o.return()}finally{if(n)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(){}i.r(e),Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}});var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&n]+t[n>>8&255]+t[n>>16&255]+t[n>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}},a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function o(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function h(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function u(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function l(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function c(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==r?r:1}function f(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function d(t,e,i,r,n,s){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new f,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new o,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==s?s:0}function m(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function p(t,e){this.min=void 0!==t?t:new f(1/0,1/0,1/0),this.max=void 0!==e?e:new f(-1/0,-1/0,-1/0)}function y(t,e){this.center=void 0!==t?t:new f,this.radius=void 0!==e?e:0}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function v(t,e){this.x=t||0,this.y=e||0}function x(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||x.DefaultOrder}function _(){this.mask=1}Object.assign(o.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(t=s.euclideanModulo(t,1),e=s.clamp(e,0,1),i=s.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+e):i+e-i*e,n=2*i-r;this.r=h(n,r,t+1/3),this.g=h(n,r,t),this.b=h(n,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,n=i[1],s=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var o=parseFloat(r[1])/360,h=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(o,h,u)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=i[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(l=a[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=u(t.r),this.g=u(t.g),this.b=u(t.b),this},copyLinearToSRGB:function(t){return this.r=l(t.r),this.g=l(t.g),this.b=l(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,r=this.r,n=this.g,s=this.b,a=Math.max(r,n,s),o=Math.min(r,n,s),h=(o+a)/2;if(o===a)e=0,i=0;else{var u=a-o;switch(i=h<=.5?u/(a+o):u/(2-a-o),a){case r:e=(n-s)/u+(n<s?6:0);break;case n:e=(s-r)/u+2;break;case s:e=(r-n)/u+4}e/=6}return t.h=e,t.s=i,t.l=h,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,i,r){return this.getHSL(t),t.h+=e,t.s+=i,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(i,r){this.getHSL(t),i.getHSL(e);var n=s.lerp(t.h,e.h,r),a=s.lerp(t.s,e.s,r),o=s.lerp(t.l,e.l,r);return this.setHSL(n,a,o),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(c,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,s,a){var o=i[r+0],h=i[r+1],u=i[r+2],l=i[r+3],c=n[s+0],f=n[s+1],d=n[s+2],m=n[s+3];if(l!==m||o!==c||h!==f||u!==d){var p=1-a,y=o*c+h*f+u*d+l*m,g=y>=0?1:-1,v=1-y*y;if(v>Number.EPSILON){var x=Math.sqrt(v),_=Math.atan2(x,y*g);p=Math.sin(p*_)/x,a=Math.sin(a*_)/x}var b=a*g;if(o=o*p+c*b,h=h*p+f*b,u=u*p+d*b,l=l*p+m*b,p===1-a){var w=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=w,h*=w,u*=w,l*=w}}t[e]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l}}),Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(c.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,r=t._y,n=t._z,s=t.order,a=Math.cos,o=Math.sin,h=a(i/2),u=a(r/2),l=a(n/2),c=o(i/2),f=o(r/2),d=o(n/2);return"XYZ"===s?(this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d):"YXZ"===s?(this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d):"ZXY"===s?(this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d):"ZYX"===s?(this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d):"YZX"===s?(this._x=c*u*l+h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l-c*f*d):"XZY"===s&&(this._x=c*u*l-h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l+c*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,r=i[0],n=i[4],s=i[8],a=i[1],o=i[5],h=i[9],u=i[2],l=i[6],c=i[10],f=r+o+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-h)*e,this._y=(s-u)*e,this._z=(a-n)*e):r>o&&r>c?(e=2*Math.sqrt(1+r-o-c),this._w=(l-h)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(s+u)/e):o>c?(e=2*Math.sqrt(1+o-r-c),this._w=(s-u)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(h+l)/e):(e=2*Math.sqrt(1+c-r-o),this._w=(a-n)/e,this._x=(s+u)/e,this._y=(h+l)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);if(0===i)return this;var r=Math.min(1,e/i);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,n=t._z,s=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=i*u+s*a+r*h-n*o,this._y=r*u+s*o+n*a-i*h,this._z=n*u+s*h+i*o-r*a,this._w=s*u-i*a-r*o-n*h,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,n=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;var o=1-a*a;if(o<=Number.EPSILON){var h=1-e;return this._w=h*s+e*this._w,this._x=h*i+e*this._x,this._y=h*r+e*this._y,this._z=h*n+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),l=Math.atan2(u,a),c=Math.sin((1-e)*l)/u,f=Math.sin(e*l)/u;return this._w=s*c+this._w*f,this._x=i*c+this._x*f,this._y=r*c+this._y*f,this._z=n*c+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(f.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new c;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new c;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*r-a*i,u=o*i+a*e-n*r,l=o*r+n*i-s*e,c=-n*e-s*i-a*r;return this.x=h*o+c*-n+u*-a-l*-s,this.y=u*o+c*-s+l*-n-h*-a,this.z=l*o+c*-a+h*-s-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-n*a,this.y=n*s-i*o,this.z=i*a-r*s,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new f;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new f;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(s.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(d.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),Object.assign(m.prototype,{isMatrix3:!0,set:function(t,e,i,r,n,s,a,o,h){var u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=n,u[5]=o,u[6]=i,u[7]=s,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new f;return function(e){for(var i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[3],o=i[6],h=i[1],u=i[4],l=i[7],c=i[2],f=i[5],d=i[8],m=r[0],p=r[3],y=r[6],g=r[1],v=r[4],x=r[7],_=r[2],b=r[5],w=r[8];return n[0]=s*m+a*g+o*_,n[3]=s*p+a*v+o*b,n[6]=s*y+a*x+o*w,n[1]=h*m+u*g+l*_,n[4]=h*p+u*v+l*b,n[7]=h*y+u*x+l*w,n[2]=c*m+f*g+d*_,n[5]=c*p+f*v+d*b,n[8]=c*y+f*x+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*s*u-e*a*h-i*n*u+i*a*o+r*n*h-r*s*o},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements,r=this.elements,n=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],l=i[6],c=i[7],f=i[8],d=f*h-u*c,m=u*l-f*o,p=c*o-h*l,y=n*d+s*m+a*p;if(0===y){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var v=1/y;return r[0]=d*v,r[1]=(a*c-f*s)*v,r[2]=(u*s-a*h)*v,r[3]=m*v,r[4]=(f*n-a*l)*v,r[5]=(a*o-u*n)*v,r[6]=p*v,r[7]=(s*l-c*n)*v,r[8]=(h*n-s*o)*v,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,n,s,a){var o=Math.cos(n),h=Math.sin(n);this.set(i*o,i*h,-i*(o*s+h*a)+s+t,-r*h,r*o,-r*(-h*s+o*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=this.elements,n=r[0],s=r[3],a=r[6],o=r[1],h=r[4],u=r[7];return r[0]=e*n+i*o,r[3]=e*s+i*h,r[6]=e*a+i*u,r[1]=-i*n+e*o,r[4]=-i*s+e*h,r[7]=-i*a+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}),Object.assign(p.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0,o=0,h=t.length;o<h;o+=3){var u=t[o],l=t[o+1],c=t[o+2];u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>n&&(n=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(n,s,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,s=-1/0,a=-1/0,o=0,h=t.count;o<h;o++){var u=t.getX(o),l=t.getY(o),c=t.getZ(o);u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>n&&(n=u),l>s&&(s=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(n,s,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new f;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new f),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new f),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,i,r=new f;function n(n){var s=n.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(e=0,i=a.length;e<i;e++)r.copy(a[e]),r.applyMatrix4(n.matrixWorld),t.expandByPoint(r)}else if(s.isBufferGeometry){var o=s.attributes.position;if(void 0!==o)for(e=0,i=o.count;e<i;e++)r.fromBufferAttribute(o,e).applyMatrix4(n.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(n),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new f),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new f;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){var t=new f,e=new f,i=new f,r=new f,n=new f,s=new f,a=new f,o=new f,h=new f,u=new f;function l(r){var n,s;for(n=0,s=r.length-3;n<=s;n+=3){a.fromArray(r,n);var o=h.x*Math.abs(a.x)+h.y*Math.abs(a.y)+h.z*Math.abs(a.z),u=t.dot(a),l=e.dot(a),c=i.dot(a);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(o),h.subVectors(this.max,o),t.subVectors(a.a,o),e.subVectors(a.b,o),i.subVectors(a.c,o),r.subVectors(e,t),n.subVectors(i,e),s.subVectors(t,i);var c=[0,-r.z,r.y,0,-n.z,n.y,0,-s.z,s.y,r.z,0,-r.x,n.z,0,-n.x,s.z,0,-s.x,-r.y,r.x,0,-n.y,n.x,0,-s.y,s.x,0];return!!l(c)&&(!!l(c=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,n),l(c=[u.x,u.y,u.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new f),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new f;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new f;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new f,new f,new f,new f,new f,new f,new f,new f];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(y.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new p;return function(e,i){var r=this.center;void 0!==i?r.copy(i):t.setFromPoints(e).getCenter(r);for(var n=0,s=0,a=e.length;s<a;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new f),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new p),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,r,n,s,a,o,h,u,l,c,f,d,m,p){var y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=r,y[1]=n,y[5]=s,y[9]=a,y[13]=o,y[2]=h,y[6]=u,y[10]=l,y[14]=c,y[3]=f,y[7]=d,y[11]=m,y[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new f;return function(e){var i=this.elements,r=e.elements,n=1/t.setFromMatrixColumn(e,0).length(),s=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n,i[3]=0,i[4]=r[4]*s,i[5]=r[5]*s,i[6]=r[6]*s,i[7]=0,i[8]=r[8]*a,i[9]=r[9]*a,i[10]=r[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),u=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){var c=s*u,f=s*l,d=a*u,m=a*l;e[0]=o*u,e[4]=-o*l,e[8]=h,e[1]=f+d*h,e[5]=c-m*h,e[9]=-a*o,e[2]=m-c*h,e[6]=d+f*h,e[10]=s*o}else if("YXZ"===t.order){var p=o*u,y=o*l,g=h*u,v=h*l;e[0]=p+v*a,e[4]=g*a-y,e[8]=s*h,e[1]=s*l,e[5]=s*u,e[9]=-a,e[2]=y*a-g,e[6]=v+p*a,e[10]=s*o}else if("ZXY"===t.order){p=o*u,y=o*l,g=h*u,v=h*l;e[0]=p-v*a,e[4]=-s*l,e[8]=g+y*a,e[1]=y+g*a,e[5]=s*u,e[9]=v-p*a,e[2]=-s*h,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){c=s*u,f=s*l,d=a*u,m=a*l;e[0]=o*u,e[4]=d*h-f,e[8]=c*h+m,e[1]=o*l,e[5]=m*h+c,e[9]=f*h-d,e[2]=-h,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var x=s*o,_=s*h,b=a*o,w=a*h;e[0]=o*u,e[4]=w-x*l,e[8]=b*l+_,e[1]=l,e[5]=s*u,e[9]=-a*u,e[2]=-h*u,e[6]=_*l+b,e[10]=x-w*l}else if("XZY"===t.order){x=s*o,_=s*h,b=a*o,w=a*h;e[0]=o*u,e[4]=-l,e[8]=h*u,e[1]=x*l+w,e[5]=s*u,e[9]=_*l-b,e[2]=b*l-_,e[6]=a*u,e[10]=w*l+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new f(0,0,0),e=new f(1,1,1);return function(i){return this.compose(t,i,e)}}(),lookAt:function(){var t=new f,e=new f,i=new f;return function(r,n,s){var a=this.elements;return i.subVectors(r,n),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(s,i),0===t.lengthSq()&&(1===Math.abs(s.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(s,i)),t.normalize(),e.crossVectors(i,t),a[0]=t.x,a[4]=e.x,a[8]=i.x,a[1]=t.y,a[5]=e.y,a[9]=i.y,a[2]=t.z,a[6]=e.z,a[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,n=this.elements,s=i[0],a=i[4],o=i[8],h=i[12],u=i[1],l=i[5],c=i[9],f=i[13],d=i[2],m=i[6],p=i[10],y=i[14],g=i[3],v=i[7],x=i[11],_=i[15],b=r[0],w=r[4],z=r[8],M=r[12],k=r[1],A=r[5],S=r[9],E=r[13],N=r[2],B=r[6],U=r[10],T=r[14],R=r[3],C=r[7],O=r[11],I=r[15];return n[0]=s*b+a*k+o*N+h*R,n[4]=s*w+a*A+o*B+h*C,n[8]=s*z+a*S+o*U+h*O,n[12]=s*M+a*E+o*T+h*I,n[1]=u*b+l*k+c*N+f*R,n[5]=u*w+l*A+c*B+f*C,n[9]=u*z+l*S+c*U+f*O,n[13]=u*M+l*E+c*T+f*I,n[2]=d*b+m*k+p*N+y*R,n[6]=d*w+m*A+p*B+y*C,n[10]=d*z+m*S+p*U+y*O,n[14]=d*M+m*E+p*T+y*I,n[3]=g*b+v*k+x*N+_*R,n[7]=g*w+v*A+x*B+_*C,n[11]=g*z+v*S+x*U+_*O,n[15]=g*M+v*E+x*T+_*I,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new f;return function(e){for(var i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+n*o*l-r*h*l-n*a*c+i*h*c+r*a*f-i*o*f)+t[7]*(+e*o*f-e*h*c+n*s*c-r*s*f+r*h*u-n*o*u)+t[11]*(+e*h*l-e*a*f-n*s*l+i*s*f+n*a*u-i*h*u)+t[15]*(-r*a*u-e*o*l+e*a*c+r*s*l-i*s*c+i*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){var i=this.elements,r=t.elements,n=r[0],s=r[1],a=r[2],o=r[3],h=r[4],u=r[5],l=r[6],c=r[7],f=r[8],d=r[9],m=r[10],p=r[11],y=r[12],g=r[13],v=r[14],x=r[15],_=d*v*c-g*m*c+g*l*p-u*v*p-d*l*x+u*m*x,b=y*m*c-f*v*c-y*l*p+h*v*p+f*l*x-h*m*x,w=f*g*c-y*d*c+y*u*p-h*g*p-f*u*x+h*d*x,z=y*d*l-f*g*l-y*u*m+h*g*m+f*u*v-h*d*v,M=n*_+s*b+a*w+o*z;if(0===M){var k="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(k);return console.warn(k),this.identity()}var A=1/M;return i[0]=_*A,i[1]=(g*m*o-d*v*o-g*a*p+s*v*p+d*a*x-s*m*x)*A,i[2]=(u*v*o-g*l*o+g*a*c-s*v*c-u*a*x+s*l*x)*A,i[3]=(d*l*o-u*m*o-d*a*c+s*m*c+u*a*p-s*l*p)*A,i[4]=b*A,i[5]=(f*v*o-y*m*o+y*a*p-n*v*p-f*a*x+n*m*x)*A,i[6]=(y*l*o-h*v*o-y*a*c+n*v*c+h*a*x-n*l*x)*A,i[7]=(h*m*o-f*l*o+f*a*c-n*m*c-h*a*p+n*l*p)*A,i[8]=w*A,i[9]=(y*d*o-f*g*o-y*s*p+n*g*p+f*s*x-n*d*x)*A,i[10]=(h*g*o-y*u*o+y*s*c-n*g*c-h*s*x+n*u*x)*A,i[11]=(f*u*o-h*d*o-f*s*c+n*d*c+h*s*p-n*u*p)*A,i[12]=z*A,i[13]=(f*g*a-y*d*a+y*s*m-n*g*m-f*s*v+n*d*v)*A,i[14]=(y*u*a-h*g*a-y*s*l+n*g*l+h*s*v-n*u*v)*A,i[15]=(h*d*a-f*u*a+f*s*l-n*d*l-h*s*m+n*u*m)*A,this},scale:function(t){var e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,a=t.y,o=t.z,h=n*s,u=n*a;return this.set(h*s+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*s,0,h*o-r*a,u*o+r*s,n*o*o+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,h=n+n,u=s+s,l=a+a,c=n*h,f=n*u,d=n*l,m=s*u,p=s*l,y=a*l,g=o*h,v=o*u,x=o*l,_=i.x,b=i.y,w=i.z;return r[0]=(1-(m+y))*_,r[1]=(f+x)*_,r[2]=(d-v)*_,r[3]=0,r[4]=(f-x)*b,r[5]=(1-(c+y))*b,r[6]=(p+g)*b,r[7]=0,r[8]=(d+v)*w,r[9]=(p-g)*w,r[10]=(1-(c+m))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var t=new f,e=new g;return function(i,r,n){var s=this.elements,a=t.set(s[0],s[1],s[2]).length(),o=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),i.x=s[12],i.y=s[13],i.z=s[14],e.copy(this);var u=1/a,l=1/o,c=1/h;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=l,e.elements[5]*=l,e.elements[6]*=l,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,r.setFromRotationMatrix(e),n.x=a,n.y=o,n.z=h,this}}(),makePerspective:function(t,e,i,r,n,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*n/(e-t),h=2*n/(i-r),u=(e+t)/(e-t),l=(i+r)/(i-r),c=-(s+n)/(s-n),f=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,r,n,s){var a=this.elements,o=1/(e-t),h=1/(i-r),u=1/(s-n),l=(e+t)*o,c=(i+r)*h,f=(s+n)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.defineProperties(v.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(v.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*i-s*r+t.x,this.y=n*r+s*i+t.y,this}}),x.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],x.DefaultOrder="XYZ",Object.defineProperties(x.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(x.prototype,{isEuler:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=s.clamp,n=t.elements,a=n[0],o=n[4],h=n[8],u=n[1],l=n[5],c=n[9],f=n[2],d=n[6],m=n[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(h,m),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,m),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(h,m))):"XZY"===e?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-c,m),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(){var t=new g;return function(e,i,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new c;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new f(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var b=0;function w(){Object.defineProperty(this,"id",{value:b++}),this.uuid=s.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=w.DefaultUp.clone();var t=new f,e=new x,i=new c,r=new f(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new g},normalMatrix:{value:new m}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}w.DefaultUp=new f(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype=Object.assign(Object.create(n.prototype),{constructor:w,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new c;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new c;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new f(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new f(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new f(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new f;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new f(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new f(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new f(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new g;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new c,e=new g,i=new f,r=new f;return function(n,s,a){n.isVector3?i.copy(n):i.set(n,s,a);var o=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(r,i,this.up):e.lookAt(i,r,this.up),this.quaternion.setFromRotationMatrix(e),o&&(e.extractRotation(o.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent({type:"removed"})),this},attach:function(){var t=new g;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new f),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new f,e=new f;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldScale:function(){var t=new f,e=new c;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new f),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new f),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,s=r.length;n<s;n++)r[n].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=n(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,h=a.length;o<h;o++){var u=a[o];n(t.shapes,u)}else n(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(o=0,h=this.material.length;o<h;o++)l.push(n(t.materials,this.material[o]));r.material=l}else r.material=n(t.materials,this.material);if(this.children.length>0){r.children=[];for(o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(e){var c=p(t.geometries),f=p(t.materials),d=p(t.textures),m=p(t.images);a=p(t.shapes);c.length>0&&(i.geometries=c),f.length>0&&(i.materials=f),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),a.length>0&&(i.shapes=a)}return i.object=r,i;function p(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var z=0;function M(){Object.defineProperty(this,"id",{value:z+=2}),this.uuid=s.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function k(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1}function A(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function S(t,e,i){A.call(this,new Int8Array(t),e,i)}function E(t,e,i){A.call(this,new Uint8Array(t),e,i)}function N(t,e,i){A.call(this,new Uint8ClampedArray(t),e,i)}function B(t,e,i){A.call(this,new Int16Array(t),e,i)}function U(t,e,i){A.call(this,new Uint16Array(t),e,i)}function T(t,e,i){A.call(this,new Int32Array(t),e,i)}function R(t,e,i){A.call(this,new Uint32Array(t),e,i)}function C(t,e,i){A.call(this,new Float32Array(t),e,i)}function O(t,e,i){A.call(this,new Float64Array(t),e,i)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}M.prototype=Object.assign(Object.create(n.prototype),{constructor:M,isGeometry:!0,applyMatrix:function(t){for(var e=(new m).getNormalMatrix(t),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(t)}for(i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(e).normalize();for(var s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,r){return t.makeTranslation(e,i,r),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,r){return t.makeScale(e,i,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index.array:void 0,r=t.attributes,n=r.position.array,s=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,h=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0;l<n.length;l+=3)e.vertices.push((new f).fromArray(n,l)),void 0!==a&&e.colors.push((new o).fromArray(a,l));function c(t,i,r,n){var o=void 0===a?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()],l=new d(t,i,r,void 0===s?[]:[(new f).fromArray(s,3*t),(new f).fromArray(s,3*i),(new f).fromArray(s,3*r)],o,n);e.faces.push(l),void 0!==h&&e.faceVertexUvs[0].push([(new v).fromArray(h,2*t),(new v).fromArray(h,2*i),(new v).fromArray(h,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new v).fromArray(u,2*t),(new v).fromArray(u,2*i),(new v).fromArray(u,2*r)])}var m=t.groups;if(m.length>0)for(l=0;l<m.length;l++)for(var p=m[l],y=p.start,g=y,x=y+p.count;g<x;g+=3)void 0!==i?c(i[g],i[g+1],i[g+2],p.materialIndex):c(g,g+1,g+2,p.materialIndex);else if(void 0!==i)for(l=0;l<i.length;l+=3)c(i[l],i[l+1],i[l+2]);else for(l=0;l<n.length/3;l+=3)c(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new f;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,r=new g;return r.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new f,e=new f,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];t.subVectors(o,a),e.subVectors(s,a),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){var e,i,r,n,s,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)a[e]=new f;if(t){var o,h,u,l=new f,c=new f;for(r=0,n=this.faces.length;r<n;r++)s=this.faces[r],o=this.vertices[s.a],h=this.vertices[s.b],u=this.vertices[s.c],l.subVectors(u,h),c.subVectors(o,h),l.cross(c),a[s.a].add(l),a[s.b].add(l),a[s.c].add(l)}else for(this.computeFaceNormals(),r=0,n=this.faces.length;r<n;r++)a[(s=this.faces[r]).a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(e=0,i=this.vertices.length;e<i;e++)a[e].normalize();for(r=0,n=this.faces.length;r<n;r++){var d=(s=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(a[s.a]),d[1].copy(a[s.b]),d[2].copy(a[s.c])):(d[0]=a[s.a].clone(),d[1]=a[s.b].clone(),d[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(i=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,r,n;for(i=0,r=this.faces.length;i<r;i++)for((n=this.faces[i]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),t=0,e=n.vertexNormals.length;t<e;t++)n.__originalVertexNormals[t]?n.__originalVertexNormals[t].copy(n.vertexNormals[t]):n.__originalVertexNormals[t]=n.vertexNormals[t].clone();var s=new M;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)h=new f,u={a:new f,b:new f,c:new f},a.push(h),o.push(u)}var h,u,l=this.morphNormals[t];for(s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),i=0,r=this.faces.length;i<r;i++)n=this.faces[i],h=l.faceNormals[i],u=l.vertexNormals[i],h.copy(n.normal),u.a.copy(n.vertexNormals[0]),u.b.copy(n.vertexNormals[1]),u.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new y),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var r,n=this.vertices.length,s=this.vertices,a=t.vertices,o=this.faces,h=t.faces,u=this.faceVertexUvs[0],l=t.faceVertexUvs[0],c=this.colors,f=t.colors;void 0===i&&(i=0),void 0!==e&&(r=(new m).getNormalMatrix(e));for(var p=0,y=a.length;p<y;p++){var g=a[p].clone();void 0!==e&&g.applyMatrix4(e),s.push(g)}for(p=0,y=f.length;p<y;p++)c.push(f[p].clone());for(p=0,y=h.length;p<y;p++){var v,x,_,b=h[p],w=b.vertexNormals,z=b.vertexColors;(v=new d(b.a+n,b.b+n,b.c+n)).normal.copy(b.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var M=0,k=w.length;M<k;M++)x=w[M].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),v.vertexNormals.push(x);v.color.copy(b.color);for(M=0,k=z.length;M<k;M++)_=z[M],v.vertexColors.push(_.clone());v.materialIndex=b.materialIndex+i,o.push(v)}for(p=0,y=l.length;p<y;p++){var A=l[p],S=[];if(void 0!==A){for(M=0,k=A.length;M<k;M++)S.push(A[M].clone());u.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,i,r,n,s,a,o,h={},u=[],l=[],c=Math.pow(10,4);for(i=0,r=this.vertices.length;i<r;i++)t=this.vertices[i],void 0===h[e=Math.round(t.x*c)+"_"+Math.round(t.y*c)+"_"+Math.round(t.z*c)]?(h[e]=i,u.push(this.vertices[i]),l[i]=u.length-1):l[i]=l[h[e]];var f=[];for(i=0,r=this.faces.length;i<r;i++){(n=this.faces[i]).a=l[n.a],n.b=l[n.b],n.c=l[n.c],s=[n.a,n.b,n.c];for(var d=0;d<3;d++)if(s[d]===s[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var m=f[i];for(this.faces.splice(m,1),a=0,o=this.faceVertexUvs.length;a<o;a++)this.faceVertexUvs[a].splice(m,1)}var p=this.vertices.length-u.length;return this.vertices=u,p},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];this.vertices.push(new f(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,n,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===e&&(r=[]),a&&a.length===e&&(n=[]);for(i=0;i<e;i++){var o=t[i]._id;r&&r.push(s[o]),n&&n.push(a[o])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}for(var r=[],n=0;n<this.vertices.length;n++){var s=this.vertices[n];r.push(s.x,s.y,s.z)}var a=[],o=[],h={},u=[],l={},c=[],f={};for(n=0;n<this.faces.length;n++){var d=this.faces[n],m=void 0!==this.faceVertexUvs[0][n],p=d.normal.length()>0,y=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,v=d.vertexColors.length>0,x=0;if(x=z(x,0,0),x=z(x,1,!0),x=z(x,2,!1),x=z(x,3,m),x=z(x,4,p),x=z(x,5,y),x=z(x,6,g),x=z(x,7,v),a.push(x),a.push(d.a,d.b,d.c),a.push(d.materialIndex),m){var _=this.faceVertexUvs[0][n];a.push(A(_[0]),A(_[1]),A(_[2]))}if(p&&a.push(M(d.normal)),y){var b=d.vertexNormals;a.push(M(b[0]),M(b[1]),M(b[2]))}if(g&&a.push(k(d.color)),v){var w=d.vertexColors;a.push(k(w[0]),k(w[1]),k(w[2]))}}function z(t,e,i){return i?t|1<<e:t&~(1<<e)}function M(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]?h[e]:(h[e]=o.length/3,o.push(t.x,t.y,t.z),h[e])}function k(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=u.length,u.push(t.getHex()),l[e])}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=c.length/2,c.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=r,t.data.normals=o,u.length>0&&(t.data.colors=u),c.length>0&&(t.data.uvs=[c]),t.data.faces=a,t},clone:function(){return(new M).copy(this)},copy:function(t){var e,i,r,n,s,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var o=t.vertices;for(e=0,i=o.length;e<i;e++)this.vertices.push(o[e].clone());var h=t.colors;for(e=0,i=h.length;e<i;e++)this.colors.push(h[e].clone());var u=t.faces;for(e=0,i=u.length;e<i;e++)this.faces.push(u[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,n=l.length;r<n;r++){var c=l[r],f=[];for(s=0,a=c.length;s<a;s++){var d=c[s];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var m=t.morphTargets;for(e=0,i=m.length;e<i;e++){var p={};if(p.name=m[e].name,void 0!==m[e].vertices)for(p.vertices=[],r=0,n=m[e].vertices.length;r<n;r++)p.vertices.push(m[e].vertices[r].clone());if(void 0!==m[e].normals)for(p.normals=[],r=0,n=m[e].normals.length;r<n;r++)p.normals.push(m[e].normals[r].clone());this.morphTargets.push(p)}var y=t.morphNormals;for(e=0,i=y.length;e<i;e++){var g={};if(void 0!==y[e].vertexNormals)for(g.vertexNormals=[],r=0,n=y[e].vertexNormals.length;r<n;r++){var v=y[e].vertexNormals[r],x={};x.a=v.a.clone(),x.b=v.b.clone(),x.c=v.c.clone(),g.vertexNormals.push(x)}if(void 0!==y[e].faceNormals)for(g.faceNormals=[],r=0,n=y[e].faceNormals.length;r<n;r++)g.faceNormals.push(y[e].faceNormals[r].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,i=_.length;e<i;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,i=b.length;e<i;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,i=w.length;e<i;e++)this.lineDistances.push(w[e]);var z=t.boundingBox;null!==z&&(this.boundingBox=z.clone());var M=t.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperties(k.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(k.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,n,s=t.elements,a=s[0],o=s[4],h=s[8],u=s[1],l=s[5],c=s[9],f=s[2],d=s[6],m=s[10];if(Math.abs(o-u)<.01&&Math.abs(h-f)<.01&&Math.abs(c-d)<.01){if(Math.abs(o+u)<.1&&Math.abs(h+f)<.1&&Math.abs(c+d)<.1&&Math.abs(a+l+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var p=(a+1)/2,y=(l+1)/2,g=(m+1)/2,v=(o+u)/4,x=(h+f)/4,_=(c+d)/4;return p>y&&p>g?p<.01?(i=0,r=.707106781,n=.707106781):(r=v/(i=Math.sqrt(p)),n=x/i):y>g?y<.01?(i=.707106781,r=0,n=.707106781):(i=v/(r=Math.sqrt(y)),n=_/r):g<.01?(i=.707106781,r=.707106781,n=0):(i=x/(n=Math.sqrt(g)),r=_/n),this.set(i,r,n,e),this}var b=Math.sqrt((d-c)*(d-c)+(h-f)*(h-f)+(u-o)*(u-o));return Math.abs(b)<.001&&(b=1),this.x=(d-c)/b,this.y=(h-f)/b,this.z=(u-o)/b,this.w=Math.acos((a+l+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new k,e=new k),t.set(i,i,i,i),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new o),e[i++]=s.r,e[i++]=s.g,e[i++]=s.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new v),e[i++]=s.x,e[i++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new f),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new k),e[i++]=s.x,e[i++]=s.y,e[i++]=s.z,e[i++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),S.prototype=Object.create(A.prototype),S.prototype.constructor=S,E.prototype=Object.create(A.prototype),E.prototype.constructor=E,N.prototype=Object.create(A.prototype),N.prototype.constructor=N,B.prototype=Object.create(A.prototype),B.prototype.constructor=B,U.prototype=Object.create(A.prototype),U.prototype.constructor=U,T.prototype=Object.create(A.prototype),T.prototype.constructor=T,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,C.prototype=Object.create(A.prototype),C.prototype.constructor=C,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,Object.assign(I.prototype,{computeGroups:function(t){for(var e,i=[],r=void 0,n=t.faces,s=0;s<n.length;s++){var a=n[s];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*s-e.start,i.push(e)),e={start:3*s,materialIndex:r})}void 0!==e&&(e.count=3*s-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,n=t.faceVertexUvs,s=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,o=t.morphTargets,h=o.length;if(h>0){e=[];for(var u=0;u<h;u++)e[u]={name:o[u].name,data:[]};this.morphTargets.position=e}var l,c=t.morphNormals,f=c.length;if(f>0){l=[];for(u=0;u<f;u++)l[u]={name:c[u].name,data:[]};this.morphTargets.normal=l}var d=t.skinIndices,m=t.skinWeights,p=d.length===r.length,y=m.length===r.length;r.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<i.length;u++){var g=i[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var x=g.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var z=g.color;this.colors.push(z,z,z)}if(!0===s)void 0!==(b=n[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new v,new v,new v));if(!0===a)void 0!==(b=n[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new v,new v,new v));for(var M=0;M<h;M++){var k=o[M].vertices;e[M].data.push(k[g.a],k[g.b],k[g.c])}for(M=0;M<f;M++){var A=c[M].vertexNormals[u];l[M].data.push(A.a,A.b,A.c)}p&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),y&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var V=1;function F(){Object.defineProperty(this,"id",{value:V+=2}),this.uuid=s.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Z(t,e,i,r){M.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new q(t,e,i,r)),this.mergeVertices()}function q(t,e,i,r){F.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};var n,s,a=(t=t||1)/2,o=(e=e||1)/2,h=Math.floor(i)||1,u=Math.floor(r)||1,l=h+1,c=u+1,f=t/h,d=e/u,m=[],p=[],y=[],g=[];for(s=0;s<c;s++){var v=s*d-o;for(n=0;n<l;n++){var x=n*f-a;p.push(x,-v,0),y.push(0,0,1),g.push(n/h),g.push(1-s/u)}}for(s=0;s<u;s++)for(n=0;n<h;n++){var _=n+l*s,b=n+l*(s+1),w=n+1+l*(s+1),z=n+1+l*s;m.push(_,b,z),m.push(b,w,z)}this.setIndex(m),this.addAttribute("position",new C(p,3)),this.addAttribute("normal",new C(y,3)),this.addAttribute("uv",new C(g,2))}F.prototype=Object.assign(Object.create(n.prototype),{constructor:F,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)>65535?R:U)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new A(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new m).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new m).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,r){return t.makeTranslation(e,i,r),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,r){return t.makeScale(e,i,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new w;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new f;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new C(3*e.vertices.length,3),r=new C(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var n=new C(e.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.addAttribute("position",new C(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var r=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new I).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new A(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new A(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new A(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var n=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new A(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var s=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new A(s,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var o=[],h=t.morphTargets[a],u=0,l=h.length;u<l;u++){var c=h[u],f=new C(3*c.data.length,3);f.name=c.name,o.push(f.copyVector3sArray(c.data))}this.morphAttributes[a]=o}if(t.skinIndices.length>0){var d=new C(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new C(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new p;return function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position,i=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),i)for(var r=0,n=i.length;r<n;r++){var s=i[r];t.setFromBufferAttribute(s),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new p,e=new p,i=new f;return function(){null===this.boundingSphere&&(this.boundingSphere=new y);var r=this.attributes.position,n=this.morphAttributes.position;if(r){var s=this.boundingSphere.center;if(t.setFromBufferAttribute(r),n)for(var a=0,o=n.length;a<o;a++){var h=n[a];e.setFromBufferAttribute(h),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(s);var u=0;for(a=0,o=r.count;a<o;a++)i.fromBufferAttribute(r,a),u=Math.max(u,s.distanceToSquared(i));if(n)for(a=0,o=n.length;a<o;a++)for(var l=0,c=(h=n[a]).count;l<c;l++)i.fromBufferAttribute(h,l),u=Math.max(u,s.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new A(new Float32Array(i.length),3));else for(var r=e.normal.array,n=0,s=r.length;n<s;n++)r[n]=0;var a,o,h,u=e.normal.array,l=new f,c=new f,d=new f,m=new f,p=new f;if(t){var y=t.array;for(n=0,s=t.count;n<s;n+=3)a=3*y[n+0],o=3*y[n+1],h=3*y[n+2],l.fromArray(i,a),c.fromArray(i,o),d.fromArray(i,h),m.subVectors(d,c),p.subVectors(l,c),m.cross(p),u[a]+=m.x,u[a+1]+=m.y,u[a+2]+=m.z,u[o]+=m.x,u[o+1]+=m.y,u[o+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z}else for(n=0,s=i.length;n<s;n+=9)l.fromArray(i,n),c.fromArray(i,n+3),d.fromArray(i,n+6),m.subVectors(d,c),p.subVectors(l,c),m.cross(p),u[n]=m.x,u[n+1]=m.y,u[n+2]=m.z,u[n+3]=m.x,u[n+4]=m.y,u[n+5]=m.z,u[n+6]=m.x,u[n+7]=m.y,u[n+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var r in i)if(void 0!==t.attributes[r])for(var n=i[r].array,s=t.attributes[r],a=s.array,o=s.itemSize*e,h=Math.min(a.length,n.length-o),u=0,l=o;u<h;u++,l++)n[l]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new f;return function(){for(var e=this.attributes.normal,i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.normalize(),e.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var i=t.array,r=t.itemSize,n=new i.constructor(e.length*r),s=0,a=0,o=0,h=e.length;o<h;o++){s=e[o]*r;for(var u=0;u<r;u++)n[a++]=i[s++]}return new A(n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new F,i=this.index.array,r=this.attributes;for(var n in r){var s=t(r[n],i);e.addAttribute(n,s)}var a=this.morphAttributes;for(n in a){for(var o=[],h=a[n],u=0,l=h.length;u<l;u++){s=t(h[u],i);o.push(s)}e.morphAttributes[n]=o}for(var c=this.groups,f=(u=0,c.length);u<f;u++){var d=c[u];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var n=this.attributes;for(var i in n){var s=(f=n[i]).toJSON();""!==f.name&&(s.name=f.name),t.data.attributes[i]=s}var a={},o=!1;for(var i in this.morphAttributes){for(var h=this.morphAttributes[i],u=[],l=0,c=h.length;l<c;l++){var f;s=(f=h[l]).toJSON();""!==f.name&&(s.name=f.name),u.push(s)}u.length>0&&(a[i]=u,o=!0)}o&&(t.data.morphAttributes=a);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var m=this.boundingSphere;return null!==m&&(t.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),t},clone:function(){return(new F).copy(this)},copy:function(t){var e,i,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone());var s=t.attributes;for(e in s){var a=s[e];this.addAttribute(e,a.clone())}var o=t.morphAttributes;for(e in o){var h=[],u=o[e];for(i=0,r=u.length;i<r;i++)h.push(u[i].clone());this.morphAttributes[e]=h}var l=t.groups;for(i=0,r=l.length;i<r;i++){var c=l[i];this.addGroup(c.start,c.count,c.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Z.prototype=Object.create(M.prototype),Z.prototype.constructor=Z,q.prototype=Object.create(F.prototype),q.prototype.constructor=q;var D,H=i(2),P=i.n(H),j=function(t,e,i){var n=r(function(t,e,i){var r=Math.pow(2,t),n=X(t),s=Math.floor(e+n.x),a=Math.floor(i+n.y);if(e=Math.abs(s%r),i=Math.abs(a%r),isNaN(t)||isNaN(e)||isNaN(i))throw new Error("cannot fetch tile ".concat(t,"/").concat(e,"/").concat(i,".png"));return[t,e,i]}(t,e,i),3);t=n[0],e=n[1],i=n[2];var s="".concat("https://s3.amazonaws.com/elevation-tiles-prod/terrarium","/").concat(t,"/").concat(e,"/").concat(i,".png");return fetch(s).then(function(t){return t.arrayBuffer()}).then(function(t){return new Uint8Array(P.a.toRGBA8(P.a.decode(t))[0])}).then(function(t){return t.heightmap=function(t){for(var e=new Float32Array(65536),i=0;i<256;i++)for(var r=0;r<256;r++){var n=i+256*r,s=4*n;e[n]=256*t[s]+t[s+1]+t[s+2]/256-32768}return e}(t),t})},L=function(t,e,i,r,n){if(t){for(var s,a,o=Math.sqrt(t.attributes.position.count),h=Math.sqrt(e.length),u=h/o,l=o;l<t.attributes.position.count-o;l++)l%o!==0&&l%o!==o-1&&(s=Math.floor(l/o),a=l%o,t.attributes.position.setZ(l,e[Math.round(Math.round(s*u)*h+a*u)]*i+r));var c=t.attributes.position.array[2];t.center();var f=c-t.attributes.position.array[2];t.translate(0,0,f),t.scale(1,1,.75),function(t){var e=t.parameters.widthSegments+1,i=t.parameters.heightSegments+1;if(!(e<4||i<4)){for(var r=.1*Math.sqrt(t.parameters.width*t.parameters.height)*255/Math.sqrt(e*i),n=1;n<e-1;n++)t.attributes.position.setZ(n,t.attributes.position.getZ(e+n));for(var s=1;s<e-1;s++)t.attributes.position.setZ((i-1)*e+s,t.attributes.position.getZ((i-2)*e+s));for(var a=0,o=0;o<i;o++)t.attributes.position.setZ(o*e,t.attributes.position.getZ(1+o*e));a=e;for(var h=0;h<i;h++)t.attributes.position.setZ(h*e+a-1,t.attributes.position.getZ(h*e+a-2));t.computeVertexNormals();for(var u=1;u<e-1;u++)t.attributes.position.setXYZ(u,t.attributes.position.getX(e+u),t.attributes.position.getY(e+u),t.attributes.position.getZ(e+u)-r);for(var l=1;l<e-1;l++)t.attributes.position.setXYZ((i-1)*e+l,t.attributes.position.getX((i-2)*e+l),t.attributes.position.getY((i-2)*e+l),t.attributes.position.getZ((i-2)*e+l)-r);a=0;for(var c=0;c<i;c++)t.attributes.position.setXYZ(c*e,t.attributes.position.getX(1+c*e),t.attributes.position.getY(1+c*e),t.attributes.position.getZ(1+c*e)-r);a=e;for(var f=0;f<i;f++)t.attributes.position.setXYZ(f*e+a-1,t.attributes.position.getX(f*e+a-2),t.attributes.position.getY(f*e+a-2),t.attributes.position.getZ(f*e+a-2)-r);t.scale((e-1)/(e-3),(i-1)/(i-3),1)}}(t);var d=t.attributes.position.array.buffer,m=t.attributes.normal.array.buffer,p=t.index.array.buffer;postMessage({key:n,positions:d,normals:m,indices:p,bpe:{positions:t.attributes.position.array.BYTES_PER_ELEMENT,normals:t.attributes.normal.array.BYTES_PER_ELEMENT,indices:t.index.array.BYTES_PER_ELEMENT}},[d,m,p])}},G=45.8671,W=(D=10,(7.3087+180)/360*Math.pow(2,D)),Y=function(t,e){return(1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,e)}(G,10),X=function(t){return{x:W/Math.pow(2,10-t),y:Y/Math.pow(2,10-t)}};onmessage=function(t){var e=r(t.data,6),i=e[0],n=e[1],s=e[2],a=e[3];e[4];!function(t,e,i,r,n,s,a){var o=new q(s,s,r+2,r+2);j(t,e,i).then(function(t){L(o,t.heightmap,.1,0,a)})}(i,n,s,a,0,e[5],t.data.toString())}}]);
//# sourceMappingURL=terrain.worker.f5d6880c.js.map