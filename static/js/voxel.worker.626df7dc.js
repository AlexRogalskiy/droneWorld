!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=2)}([function(t,e,i){var r;!function(){"use strict";var s=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,a=1/6,o=(Math.sqrt(5)-1)/4,h=(5-Math.sqrt(5))/20;function u(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,i=0,r=1,s=function(){var t=4022871197;return function(e){e=e.toString();for(var i=0;i<e.length;i++){var r=.02519603282416938*(t+=e.charCodeAt(i));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();t=s(" "),e=s(" "),i=s(" ");for(var n=0;n<arguments.length;n++)(t-=s(arguments[n]))<0&&(t+=1),(e-=s(arguments[n]))<0&&(e+=1),(i-=s(arguments[n]))<0&&(i+=1);return s=null,function(){var s=2091639*t+2.3283064365386963e-10*r;return t=e,e=i,i=s-(r=0|s)}}(t):Math.random,this.p=l(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function l(t){var e,i=new Uint8Array(256);for(e=0;e<256;e++)i[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),s=i[e];i[e]=i[r],i[r]=s}return i}u.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var i,r,a=this.permMod12,o=this.perm,h=this.grad3,u=0,l=0,c=0,f=(t+e)*s,d=Math.floor(t+f),p=Math.floor(e+f),m=(d+p)*n,y=t-(d-m),v=e-(p-m);y>v?(i=1,r=0):(i=0,r=1);var x=y-i+n,g=v-r+n,b=y-1+2*n,w=v-1+2*n,M=255&d,z=255&p,_=.5-y*y-v*v;if(_>=0){var A=3*a[M+o[z]];u=(_*=_)*_*(h[A]*y+h[A+1]*v)}var S=.5-x*x-g*g;if(S>=0){var N=3*a[M+i+o[z+r]];l=(S*=S)*S*(h[N]*x+h[N+1]*g)}var E=.5-b*b-w*w;if(E>=0){var U=3*a[M+1+o[z+1]];c=(E*=E)*E*(h[U]*b+h[U+1]*w)}return 70*(u+l+c)},noise3D:function(t,e,i){var r,s,n,o,h,u,l,c,f,d,p=this.permMod12,m=this.perm,y=this.grad3,v=(t+e+i)*(1/3),x=Math.floor(t+v),g=Math.floor(e+v),b=Math.floor(i+v),w=(x+g+b)*a,M=t-(x-w),z=e-(g-w),_=i-(b-w);M>=z?z>=_?(h=1,u=0,l=0,c=1,f=1,d=0):M>=_?(h=1,u=0,l=0,c=1,f=0,d=1):(h=0,u=0,l=1,c=1,f=0,d=1):z<_?(h=0,u=0,l=1,c=0,f=1,d=1):M<_?(h=0,u=1,l=0,c=0,f=1,d=1):(h=0,u=1,l=0,c=1,f=1,d=0);var A=M-h+a,S=z-u+a,N=_-l+a,E=M-c+2*a,U=z-f+2*a,T=_-d+2*a,C=M-1+.5,O=z-1+.5,B=_-1+.5,k=255&x,V=255&g,F=255&b,R=.6-M*M-z*z-_*_;if(R<0)r=0;else{var q=3*p[k+m[V+m[F]]];r=(R*=R)*R*(y[q]*M+y[q+1]*z+y[q+2]*_)}var I=.6-A*A-S*S-N*N;if(I<0)s=0;else{var j=3*p[k+h+m[V+u+m[F+l]]];s=(I*=I)*I*(y[j]*A+y[j+1]*S+y[j+2]*N)}var D=.6-E*E-U*U-T*T;if(D<0)n=0;else{var H=3*p[k+c+m[V+f+m[F+d]]];n=(D*=D)*D*(y[H]*E+y[H+1]*U+y[H+2]*T)}var P=.6-C*C-O*O-B*B;if(P<0)o=0;else{var G=3*p[k+1+m[V+1+m[F+1]]];o=(P*=P)*P*(y[G]*C+y[G+1]*O+y[G+2]*B)}return 32*(r+s+n+o)},noise4D:function(t,e,i,r){var s,n,a,u,l,c,f,d,p,m,y,v,x,g,b,w,M,z=this.perm,_=this.grad4,A=(t+e+i+r)*o,S=Math.floor(t+A),N=Math.floor(e+A),E=Math.floor(i+A),U=Math.floor(r+A),T=(S+N+E+U)*h,C=t-(S-T),O=e-(N-T),B=i-(E-T),k=r-(U-T),V=0,F=0,R=0,q=0;C>O?V++:F++,C>B?V++:R++,C>k?V++:q++,O>B?F++:R++,O>k?F++:q++,B>k?R++:q++;var I=C-(c=V>=3?1:0)+h,j=O-(f=F>=3?1:0)+h,D=B-(d=R>=3?1:0)+h,H=k-(p=q>=3?1:0)+h,P=C-(m=V>=2?1:0)+2*h,G=O-(y=F>=2?1:0)+2*h,W=B-(v=R>=2?1:0)+2*h,L=k-(x=q>=2?1:0)+2*h,X=C-(g=V>=1?1:0)+3*h,Y=O-(b=F>=1?1:0)+3*h,Z=B-(w=R>=1?1:0)+3*h,J=k-(M=q>=1?1:0)+3*h,Q=C-1+4*h,$=O-1+4*h,K=B-1+4*h,tt=k-1+4*h,et=255&S,it=255&N,rt=255&E,st=255&U,nt=.6-C*C-O*O-B*B-k*k;if(nt<0)s=0;else{var at=z[et+z[it+z[rt+z[st]]]]%32*4;s=(nt*=nt)*nt*(_[at]*C+_[at+1]*O+_[at+2]*B+_[at+3]*k)}var ot=.6-I*I-j*j-D*D-H*H;if(ot<0)n=0;else{var ht=z[et+c+z[it+f+z[rt+d+z[st+p]]]]%32*4;n=(ot*=ot)*ot*(_[ht]*I+_[ht+1]*j+_[ht+2]*D+_[ht+3]*H)}var ut=.6-P*P-G*G-W*W-L*L;if(ut<0)a=0;else{var lt=z[et+m+z[it+y+z[rt+v+z[st+x]]]]%32*4;a=(ut*=ut)*ut*(_[lt]*P+_[lt+1]*G+_[lt+2]*W+_[lt+3]*L)}var ct=.6-X*X-Y*Y-Z*Z-J*J;if(ct<0)u=0;else{var ft=z[et+g+z[it+b+z[rt+w+z[st+M]]]]%32*4;u=(ct*=ct)*ct*(_[ft]*X+_[ft+1]*Y+_[ft+2]*Z+_[ft+3]*J)}var dt=.6-Q*Q-$*$-K*K-tt*tt;if(dt<0)l=0;else{var pt=z[et+1+z[it+1+z[rt+1+z[st+1]]]]%32*4;l=(dt*=dt)*dt*(_[pt]*Q+_[pt+1]*$+_[pt+2]*K+_[pt+3]*tt)}return 27*(s+n+a+u+l)}},u._buildPermutationTable=l,void 0===(r=function(){return u}.call(e,i,e,t))||(t.exports=r),e.SimplexNoise=u,t.exports=u}()},,function(t,e,i){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(h){s=!0,n=h}finally{try{r||null==o.return||o.return()}finally{if(s)throw n}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}i.r(e);var s=i(0),n=i.n(s);function a(){}Object.assign(a.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,s=i.length;r<s;r++)i[r].call(this,t)}}}});var o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&s]+t[s>>8&255]+t[s>>16&255]+t[s>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,s){return r+(t-e)*(s-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}},h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function u(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function l(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function c(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function f(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function d(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==r?r:1}function p(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function m(t,e,i,r,s,n){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new p,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new u,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=void 0!==n?n:0}function y(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function v(t,e){this.min=void 0!==t?t:new p(1/0,1/0,1/0),this.max=void 0!==e?e:new p(-1/0,-1/0,-1/0)}function x(t,e){this.center=void 0!==t?t:new p,this.radius=void 0!==e?e:0}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function b(t,e){this.x=t||0,this.y=e||0}function w(t,e,i,r){this._x=t||0,this._y=e||0,this._z=i||0,this._order=r||w.DefaultOrder}function M(){this.mask=1}Object.assign(u.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){if(t=o.euclideanModulo(t,1),e=o.clamp(e,0,1),i=o.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+e):i+e-i*e,s=2*i-r;this.r=l(s,r,t+1/3),this.g=l(s,r,t),this.b=l(s,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,s=i[1],n=i[2];switch(s){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var a=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,o,u)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=i[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(l=h[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=c(t.r),this.g=c(t.g),this.b=c(t.b),this},copyLinearToSRGB:function(t){return this.r=f(t.r),this.g=f(t.g),this.b=f(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i,r=this.r,s=this.g,n=this.b,a=Math.max(r,s,n),o=Math.min(r,s,n),h=(o+a)/2;if(o===a)e=0,i=0;else{var u=a-o;switch(i=h<=.5?u/(a+o):u/(2-a-o),a){case r:e=(s-n)/u+(s<n?6:0);break;case s:e=(n-r)/u+2;break;case n:e=(r-s)/u+4}e/=6}return t.h=e,t.s=i,t.l=h,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,i,r){return this.getHSL(t),t.h+=e,t.s+=i,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(i,r){this.getHSL(t),i.getHSL(e);var s=o.lerp(t.h,e.h,r),n=o.lerp(t.s,e.s,r),a=o.lerp(t.l,e.l,r);return this.setHSL(s,n,a),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Object.assign(d,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,s,n,a){var o=i[r+0],h=i[r+1],u=i[r+2],l=i[r+3],c=s[n+0],f=s[n+1],d=s[n+2],p=s[n+3];if(l!==p||o!==c||h!==f||u!==d){var m=1-a,y=o*c+h*f+u*d+l*p,v=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){var g=Math.sqrt(x),b=Math.atan2(g,y*v);m=Math.sin(m*b)/g,a=Math.sin(a*b)/g}var w=a*v;if(o=o*m+c*w,h=h*m+f*w,u=u*m+d*w,l=l*m+p*w,m===1-a){var M=1/Math.sqrt(o*o+h*h+u*u+l*l);o*=M,h*=M,u*=M,l*=M}}t[e]=o,t[e+1]=h,t[e+2]=u,t[e+3]=l}}),Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(d.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,r=t._y,s=t._z,n=t.order,a=Math.cos,o=Math.sin,h=a(i/2),u=a(r/2),l=a(s/2),c=o(i/2),f=o(r/2),d=o(s/2);return"XYZ"===n?(this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d):"YXZ"===n?(this._x=c*u*l+h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d):"ZXY"===n?(this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l-c*f*d):"ZYX"===n?(this._x=c*u*l-h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l+c*f*d):"YZX"===n?(this._x=c*u*l+h*f*d,this._y=h*f*l+c*u*d,this._z=h*u*d-c*f*l,this._w=h*u*l-c*f*d):"XZY"===n&&(this._x=c*u*l-h*f*d,this._y=h*f*l-c*u*d,this._z=h*u*d+c*f*l,this._w=h*u*l+c*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,r=i[0],s=i[4],n=i[8],a=i[1],o=i[5],h=i[9],u=i[2],l=i[6],c=i[10],f=r+o+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-h)*e,this._y=(n-u)*e,this._z=(a-s)*e):r>o&&r>c?(e=2*Math.sqrt(1+r-o-c),this._w=(l-h)/e,this._x=.25*e,this._y=(s+a)/e,this._z=(n+u)/e):o>c?(e=2*Math.sqrt(1+o-r-c),this._w=(n-u)/e,this._x=(s+a)/e,this._y=.25*e,this._z=(h+l)/e):(e=2*Math.sqrt(1+c-r-o),this._w=(a-s)/e,this._x=(n+u)/e,this._y=(h+l)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(o.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);if(0===i)return this;var r=Math.min(1,e/i);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,r=t._y,s=t._z,n=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=i*u+n*a+r*h-s*o,this._y=r*u+n*o+s*a-i*h,this._z=s*u+n*h+i*o-r*a,this._w=n*u-i*a-r*o-s*h,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,s=this._z,n=this._w,a=n*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=n,this._x=i,this._y=r,this._z=s,this;var o=1-a*a;if(o<=Number.EPSILON){var h=1-e;return this._w=h*n+e*this._w,this._x=h*i+e*this._x,this._y=h*r+e*this._y,this._z=h*s+e*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),l=Math.atan2(u,a),c=Math.sin((1-e)*l)/u,f=Math.sin(e*l)/u;return this._w=n*c+this._w*f,this._x=i*c+this._x*f,this._y=r*c+this._y*f,this._z=s*c+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(p.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new d;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new d;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*r,this.y=s[1]*e+s[4]*i+s[7]*r,this.z=s[2]*e+s[5]*i+s[8]*r,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,s=t.elements,n=1/(s[3]*e+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*r+s[12])*n,this.y=(s[1]*e+s[5]*i+s[9]*r+s[13])*n,this.z=(s[2]*e+s[6]*i+s[10]*r+s[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,s=t.x,n=t.y,a=t.z,o=t.w,h=o*e+n*r-a*i,u=o*i+a*e-s*r,l=o*r+s*i-n*e,c=-s*e-n*i-a*r;return this.x=h*o+c*-s+u*-a-l*-n,this.y=u*o+c*-n+l*-s-h*-a,this.z=l*o+c*-a+h*-n-u*-s,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r,this.y=s[1]*e+s[5]*i+s[9]*r,this.z=s[2]*e+s[6]*i+s[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,s=t.z,n=e.x,a=e.y,o=e.z;return this.x=r*o-s*a,this.y=s*n-i*o,this.z=i*a-r*n,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new p;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new p;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(o.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(m.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),Object.assign(y.prototype,{isMatrix3:!0,set:function(t,e,i,r,s,n,a,o,h){var u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=s,u[5]=o,u[6]=i,u[7]=n,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new p;return function(e){for(var i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[3],o=i[6],h=i[1],u=i[4],l=i[7],c=i[2],f=i[5],d=i[8],p=r[0],m=r[3],y=r[6],v=r[1],x=r[4],g=r[7],b=r[2],w=r[5],M=r[8];return s[0]=n*p+a*v+o*b,s[3]=n*m+a*x+o*w,s[6]=n*y+a*g+o*M,s[1]=h*p+u*v+l*b,s[4]=h*m+u*x+l*w,s[7]=h*y+u*g+l*M,s[2]=c*p+f*v+d*b,s[5]=c*m+f*x+d*w,s[8]=c*y+f*g+d*M,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],s=t[3],n=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*n*u-e*a*h-i*s*u+i*a*o+r*s*h-r*n*o},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements,r=this.elements,s=i[0],n=i[1],a=i[2],o=i[3],h=i[4],u=i[5],l=i[6],c=i[7],f=i[8],d=f*h-u*c,p=u*l-f*o,m=c*o-h*l,y=s*d+n*p+a*m;if(0===y){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var x=1/y;return r[0]=d*x,r[1]=(a*c-f*n)*x,r[2]=(u*n-a*h)*x,r[3]=p*x,r[4]=(f*s-a*l)*x,r[5]=(a*o-u*s)*x,r[6]=m*x,r[7]=(n*l-c*s)*x,r[8]=(h*s-n*o)*x,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,r,s,n,a){var o=Math.cos(s),h=Math.sin(s);this.set(i*o,i*h,-i*(o*n+h*a)+n+t,-r*h,r*o,-r*(-h*n+o*a)+a+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=this.elements,s=r[0],n=r[3],a=r[6],o=r[1],h=r[4],u=r[7];return r[0]=e*s+i*o,r[3]=e*n+i*h,r[6]=e*a+i*u,r[1]=-i*s+e*o,r[4]=-i*n+e*h,r[7]=-i*a+e*u,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}),Object.assign(v.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,r=1/0,s=-1/0,n=-1/0,a=-1/0,o=0,h=t.length;o<h;o+=3){var u=t[o],l=t[o+1],c=t[o+2];u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>s&&(s=u),l>n&&(n=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(s,n,a),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,r=1/0,s=-1/0,n=-1/0,a=-1/0,o=0,h=t.count;o<h;o++){var u=t.getX(o),l=t.getY(o),c=t.getZ(o);u<e&&(e=u),l<i&&(i=l),c<r&&(r=c),u>s&&(s=u),l>n&&(n=l),c>a&&(a=c)}return this.min.set(e,i,r),this.max.set(s,n,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new p;return function(e,i){var r=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new p),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new p),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,i,r=new p;function s(s){var n=s.geometry;if(void 0!==n)if(n.isGeometry){var a=n.vertices;for(e=0,i=a.length;e<i;e++)r.copy(a[e]),r.applyMatrix4(s.matrixWorld),t.expandByPoint(r)}else if(n.isBufferGeometry){var o=n.attributes.position;if(void 0!==o)for(e=0,i=o.count;e<i;e++)r.fromBufferAttribute(o,e).applyMatrix4(s.matrixWorld),t.expandByPoint(r)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(s),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new p),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new p;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){var t=new p,e=new p,i=new p,r=new p,s=new p,n=new p,a=new p,o=new p,h=new p,u=new p;function l(r){var s,n;for(s=0,n=r.length-3;s<=n;s+=3){a.fromArray(r,s);var o=h.x*Math.abs(a.x)+h.y*Math.abs(a.y)+h.z*Math.abs(a.z),u=t.dot(a),l=e.dot(a),c=i.dot(a);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(o),h.subVectors(this.max,o),t.subVectors(a.a,o),e.subVectors(a.b,o),i.subVectors(a.c,o),r.subVectors(e,t),s.subVectors(i,e),n.subVectors(t,i);var c=[0,-r.z,r.y,0,-s.z,s.y,0,-n.z,n.y,r.z,0,-r.x,s.z,0,-s.x,n.z,0,-n.x,-r.y,r.x,0,-s.y,s.x,0,-n.y,n.x,0];return!!l(c)&&(!!l(c=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,s),l(c=[u.x,u.y,u.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new p),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new p;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new p;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new p,new p,new p,new p,new p,new p,new p,new p];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(x.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new v;return function(e,i){var r=this.center;void 0!==i?r.copy(i):t.setFromPoints(e).getCenter(r);for(var s=0,n=0,a=e.length;n<a;n++)s=Math.max(s,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(s),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new p),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new v),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,r,s,n,a,o,h,u,l,c,f,d,p,m){var y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=r,y[1]=s,y[5]=n,y[9]=a,y[13]=o,y[2]=h,y[6]=u,y[10]=l,y[14]=c,y[3]=f,y[7]=d,y[11]=p,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new p;return function(e){var i=this.elements,r=e.elements,s=1/t.setFromMatrixColumn(e,0).length(),n=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return i[0]=r[0]*s,i[1]=r[1]*s,i[2]=r[2]*s,i[3]=0,i[4]=r[4]*n,i[5]=r[5]*n,i[6]=r[6]*n,i[7]=0,i[8]=r[8]*a,i[9]=r[9]*a,i[10]=r[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,r=t.y,s=t.z,n=Math.cos(i),a=Math.sin(i),o=Math.cos(r),h=Math.sin(r),u=Math.cos(s),l=Math.sin(s);if("XYZ"===t.order){var c=n*u,f=n*l,d=a*u,p=a*l;e[0]=o*u,e[4]=-o*l,e[8]=h,e[1]=f+d*h,e[5]=c-p*h,e[9]=-a*o,e[2]=p-c*h,e[6]=d+f*h,e[10]=n*o}else if("YXZ"===t.order){var m=o*u,y=o*l,v=h*u,x=h*l;e[0]=m+x*a,e[4]=v*a-y,e[8]=n*h,e[1]=n*l,e[5]=n*u,e[9]=-a,e[2]=y*a-v,e[6]=x+m*a,e[10]=n*o}else if("ZXY"===t.order){m=o*u,y=o*l,v=h*u,x=h*l;e[0]=m-x*a,e[4]=-n*l,e[8]=v+y*a,e[1]=y+v*a,e[5]=n*u,e[9]=x-m*a,e[2]=-n*h,e[6]=a,e[10]=n*o}else if("ZYX"===t.order){c=n*u,f=n*l,d=a*u,p=a*l;e[0]=o*u,e[4]=d*h-f,e[8]=c*h+p,e[1]=o*l,e[5]=p*h+c,e[9]=f*h-d,e[2]=-h,e[6]=a*o,e[10]=n*o}else if("YZX"===t.order){var g=n*o,b=n*h,w=a*o,M=a*h;e[0]=o*u,e[4]=M-g*l,e[8]=w*l+b,e[1]=l,e[5]=n*u,e[9]=-a*u,e[2]=-h*u,e[6]=b*l+w,e[10]=g-M*l}else if("XZY"===t.order){g=n*o,b=n*h,w=a*o,M=a*h;e[0]=o*u,e[4]=-l,e[8]=h*u,e[1]=g*l+M,e[5]=n*u,e[9]=b*l-w,e[2]=w*l-b,e[6]=a*u,e[10]=M*l+g}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new p(0,0,0),e=new p(1,1,1);return function(i){return this.compose(t,i,e)}}(),lookAt:function(){var t=new p,e=new p,i=new p;return function(r,s,n){var a=this.elements;return i.subVectors(r,s),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(n,i),0===t.lengthSq()&&(1===Math.abs(n.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(n,i)),t.normalize(),e.crossVectors(i,t),a[0]=t.x,a[4]=e.x,a[8]=i.x,a[1]=t.y,a[5]=e.y,a[9]=i.y,a[2]=t.z,a[6]=e.z,a[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,r=e.elements,s=this.elements,n=i[0],a=i[4],o=i[8],h=i[12],u=i[1],l=i[5],c=i[9],f=i[13],d=i[2],p=i[6],m=i[10],y=i[14],v=i[3],x=i[7],g=i[11],b=i[15],w=r[0],M=r[4],z=r[8],_=r[12],A=r[1],S=r[5],N=r[9],E=r[13],U=r[2],T=r[6],C=r[10],O=r[14],B=r[3],k=r[7],V=r[11],F=r[15];return s[0]=n*w+a*A+o*U+h*B,s[4]=n*M+a*S+o*T+h*k,s[8]=n*z+a*N+o*C+h*V,s[12]=n*_+a*E+o*O+h*F,s[1]=u*w+l*A+c*U+f*B,s[5]=u*M+l*S+c*T+f*k,s[9]=u*z+l*N+c*C+f*V,s[13]=u*_+l*E+c*O+f*F,s[2]=d*w+p*A+m*U+y*B,s[6]=d*M+p*S+m*T+y*k,s[10]=d*z+p*N+m*C+y*V,s[14]=d*_+p*E+m*O+y*F,s[3]=v*w+x*A+g*U+b*B,s[7]=v*M+x*S+g*T+b*k,s[11]=v*z+x*N+g*C+b*V,s[15]=v*_+x*E+g*O+b*F,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new p;return function(e){for(var i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],s=t[12],n=t[1],a=t[5],o=t[9],h=t[13],u=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+s*o*l-r*h*l-s*a*c+i*h*c+r*a*f-i*o*f)+t[7]*(+e*o*f-e*h*c+s*n*c-r*n*f+r*h*u-s*o*u)+t[11]*(+e*h*l-e*a*f-s*n*l+i*n*f+s*a*u-i*h*u)+t[15]*(-r*a*u-e*o*l+e*a*c+r*n*l-i*n*c+i*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this},getInverse:function(t,e){var i=this.elements,r=t.elements,s=r[0],n=r[1],a=r[2],o=r[3],h=r[4],u=r[5],l=r[6],c=r[7],f=r[8],d=r[9],p=r[10],m=r[11],y=r[12],v=r[13],x=r[14],g=r[15],b=d*x*c-v*p*c+v*l*m-u*x*m-d*l*g+u*p*g,w=y*p*c-f*x*c-y*l*m+h*x*m+f*l*g-h*p*g,M=f*v*c-y*d*c+y*u*m-h*v*m-f*u*g+h*d*g,z=y*d*l-f*v*l-y*u*p+h*v*p+f*u*x-h*d*x,_=s*b+n*w+a*M+o*z;if(0===_){var A="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(A);return console.warn(A),this.identity()}var S=1/_;return i[0]=b*S,i[1]=(v*p*o-d*x*o-v*a*m+n*x*m+d*a*g-n*p*g)*S,i[2]=(u*x*o-v*l*o+v*a*c-n*x*c-u*a*g+n*l*g)*S,i[3]=(d*l*o-u*p*o-d*a*c+n*p*c+u*a*m-n*l*m)*S,i[4]=w*S,i[5]=(f*x*o-y*p*o+y*a*m-s*x*m-f*a*g+s*p*g)*S,i[6]=(y*l*o-h*x*o-y*a*c+s*x*c+h*a*g-s*l*g)*S,i[7]=(h*p*o-f*l*o+f*a*c-s*p*c-h*a*m+s*l*m)*S,i[8]=M*S,i[9]=(y*d*o-f*v*o-y*n*m+s*v*m+f*n*g-s*d*g)*S,i[10]=(h*v*o-y*u*o+y*n*c-s*v*c-h*n*g+s*u*g)*S,i[11]=(f*u*o-h*d*o-f*n*c+s*d*c+h*n*m-s*u*m)*S,i[12]=z*S,i[13]=(f*v*a-y*d*a+y*n*p-s*v*p-f*n*x+s*d*x)*S,i[14]=(y*u*a-h*v*a-y*n*l+s*v*l+h*n*x-s*u*x)*S,i[15]=(h*d*a-f*u*a+f*n*l-s*d*l-h*n*p+s*u*p)*S,this},scale:function(t){var e=this.elements,i=t.x,r=t.y,s=t.z;return e[0]*=i,e[4]*=r,e[8]*=s,e[1]*=i,e[5]*=r,e[9]*=s,e[2]*=i,e[6]*=r,e[10]*=s,e[3]*=i,e[7]*=r,e[11]*=s,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),r=Math.sin(e),s=1-i,n=t.x,a=t.y,o=t.z,h=s*n,u=s*a;return this.set(h*n+i,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+i,u*o-r*n,0,h*o-r*a,u*o+r*n,s*o*o+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var r=this.elements,s=e._x,n=e._y,a=e._z,o=e._w,h=s+s,u=n+n,l=a+a,c=s*h,f=s*u,d=s*l,p=n*u,m=n*l,y=a*l,v=o*h,x=o*u,g=o*l,b=i.x,w=i.y,M=i.z;return r[0]=(1-(p+y))*b,r[1]=(f+g)*b,r[2]=(d-x)*b,r[3]=0,r[4]=(f-g)*w,r[5]=(1-(c+y))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(d+x)*M,r[9]=(m-v)*M,r[10]=(1-(c+p))*M,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var t=new p,e=new g;return function(i,r,s){var n=this.elements,a=t.set(n[0],n[1],n[2]).length(),o=t.set(n[4],n[5],n[6]).length(),h=t.set(n[8],n[9],n[10]).length();this.determinant()<0&&(a=-a),i.x=n[12],i.y=n[13],i.z=n[14],e.copy(this);var u=1/a,l=1/o,c=1/h;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=l,e.elements[5]*=l,e.elements[6]*=l,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,r.setFromRotationMatrix(e),s.x=a,s.y=o,s.z=h,this}}(),makePerspective:function(t,e,i,r,s,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*s/(e-t),h=2*s/(i-r),u=(e+t)/(e-t),l=(i+r)/(i-r),c=-(n+s)/(n-s),f=-2*n*s/(n-s);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,i,r,s,n){var a=this.elements,o=1/(e-t),h=1/(i-r),u=1/(n-s),l=(e+t)*o,c=(i+r)*h,f=(n+s)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}),Object.defineProperties(b.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(b.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),r=Math.sin(e),s=this.x-t.x,n=this.y-t.y;return this.x=s*i-n*r+t.x,this.y=s*r+n*i+t.y,this}}),w.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],w.DefaultOrder="XYZ",Object.defineProperties(w.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(w.prototype,{isEuler:!0,set:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var r=o.clamp,s=t.elements,n=s[0],a=s[4],h=s[8],u=s[1],l=s[5],c=s[9],f=s[2],d=s[6],p=s[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(h,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,n),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,n))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,n)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,n)):(this._x=0,this._y=Math.atan2(h,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(h,n)):(this._x=Math.atan2(-c,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(){var t=new g;return function(e,i,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new d;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new p(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(M.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var z=0,_=0,A=1,S=100,N=204,E=205,U=3,T=0,C=0;function O(){Object.defineProperty(this,"id",{value:C++}),this.uuid=o.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=O.DefaultUp.clone();var t=new p,e=new w,i=new d,r=new p(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new g},normalMatrix:{value:new y}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=O.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new M,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}O.DefaultUp=new p(0,1,0),O.DefaultMatrixAutoUpdate=!0,O.prototype=Object.assign(Object.create(a.prototype),{constructor:O,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new d;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new d;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new p(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new p(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new p(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new p;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new p(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new p(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new p(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new g;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new d,e=new g,i=new p,r=new p;return function(s,n,a){s.isVector3?i.copy(s):i.set(s,n,a);var o=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(r,i,this.up):e.lookAt(i,r,this.up),this.quaternion.setFromRotationMatrix(e),o&&(e.extractRotation(o.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent({type:"removed"})),this},attach:function(){var t=new g;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var s=this.children[i].getObjectByProperty(t,e);if(void 0!==s)return s}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new p),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new p,e=new p;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new d),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldScale:function(){var t=new p,e=new d;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new p),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new p),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,s=0,n=r.length;s<n;s++)r[s].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function s(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=s(t.geometries,this.geometry);var n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){var a=n.shapes;if(Array.isArray(a))for(var o=0,h=a.length;o<h;o++){var u=a[o];s(t.shapes,u)}else s(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(o=0,h=this.material.length;o<h;o++)l.push(s(t.materials,this.material[o]));r.material=l}else r.material=s(t.materials,this.material);if(this.children.length>0){r.children=[];for(o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(t).object)}if(e){var c=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);a=m(t.shapes);c.length>0&&(i.geometries=c),f.length>0&&(i.materials=f),d.length>0&&(i.textures=d),p.length>0&&(i.images=p),a.length>0&&(i.shapes=a)}return i.object=r,i;function m(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var B=0;function k(){Object.defineProperty(this,"id",{value:B+=2}),this.uuid=o.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}k.prototype=Object.assign(Object.create(a.prototype),{constructor:k,isGeometry:!0,applyMatrix:function(t){for(var e=(new y).getNormalMatrix(t),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(t)}for(i=0,r=this.faces.length;i<r;i++){var s=this.faces[i];s.normal.applyMatrix3(e).normalize();for(var n=0,a=s.vertexNormals.length;n<a;n++)s.vertexNormals[n].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,r){return t.makeTranslation(e,i,r),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,r){return t.makeScale(e,i,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new O;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,i=null!==t.index?t.index.array:void 0,r=t.attributes,s=r.position.array,n=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,o=void 0!==r.uv?r.uv.array:void 0,h=void 0!==r.uv2?r.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var l=0;l<s.length;l+=3)e.vertices.push((new p).fromArray(s,l)),void 0!==a&&e.colors.push((new u).fromArray(a,l));function c(t,i,r,s){var u=void 0===a?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[r].clone()],l=new m(t,i,r,void 0===n?[]:[(new p).fromArray(n,3*t),(new p).fromArray(n,3*i),(new p).fromArray(n,3*r)],u,s);e.faces.push(l),void 0!==o&&e.faceVertexUvs[0].push([(new b).fromArray(o,2*t),(new b).fromArray(o,2*i),(new b).fromArray(o,2*r)]),void 0!==h&&e.faceVertexUvs[1].push([(new b).fromArray(h,2*t),(new b).fromArray(h,2*i),(new b).fromArray(h,2*r)])}var f=t.groups;if(f.length>0)for(l=0;l<f.length;l++)for(var d=f[l],y=d.start,v=y,x=y+d.count;v<x;v+=3)void 0!==i?c(i[v],i[v+1],i[v+2],d.materialIndex):c(v,v+1,v+2,d.materialIndex);else if(void 0!==i)for(l=0;l<i.length;l+=3)c(i[l],i[l+1],i[l+2]);else for(l=0;l<s.length/3;l+=3)c(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new p;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,r=new g;return r.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new p,e=new p,i=0,r=this.faces.length;i<r;i++){var s=this.faces[i],n=this.vertices[s.a],a=this.vertices[s.b],o=this.vertices[s.c];t.subVectors(o,a),e.subVectors(n,a),t.cross(e),t.normalize(),s.normal.copy(t)}},computeVertexNormals:function(t){var e,i,r,s,n,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)a[e]=new p;if(t){var o,h,u,l=new p,c=new p;for(r=0,s=this.faces.length;r<s;r++)n=this.faces[r],o=this.vertices[n.a],h=this.vertices[n.b],u=this.vertices[n.c],l.subVectors(u,h),c.subVectors(o,h),l.cross(c),a[n.a].add(l),a[n.b].add(l),a[n.c].add(l)}else for(this.computeFaceNormals(),r=0,s=this.faces.length;r<s;r++)a[(n=this.faces[r]).a].add(n.normal),a[n.b].add(n.normal),a[n.c].add(n.normal);for(e=0,i=this.vertices.length;e<i;e++)a[e].normalize();for(r=0,s=this.faces.length;r<s;r++){var f=(n=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[n.a]),f[1].copy(a[n.b]),f[2].copy(a[n.c])):(f[0]=a[n.a].clone(),f[1]=a[n.b].clone(),f[2]=a[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(i=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,r,s;for(i=0,r=this.faces.length;i<r;i++)for((s=this.faces[i]).__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]),t=0,e=s.vertexNormals.length;t<e;t++)s.__originalVertexNormals[t]?s.__originalVertexNormals[t].copy(s.vertexNormals[t]):s.__originalVertexNormals[t]=s.vertexNormals[t].clone();var n=new k;for(n.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)h=new p,u={a:new p,b:new p,c:new p},a.push(h),o.push(u)}var h,u,l=this.morphNormals[t];for(n.vertices=this.morphTargets[t].vertices,n.computeFaceNormals(),n.computeVertexNormals(),i=0,r=this.faces.length;i<r;i++)s=this.faces[i],h=l.faceNormals[i],u=l.vertexNormals[i],h.copy(s.normal),u.a.copy(s.vertexNormals[0]),u.b.copy(s.vertexNormals[1]),u.c.copy(s.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)(s=this.faces[i]).normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new v),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new x),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var r,s=this.vertices.length,n=this.vertices,a=t.vertices,o=this.faces,h=t.faces,u=this.faceVertexUvs[0],l=t.faceVertexUvs[0],c=this.colors,f=t.colors;void 0===i&&(i=0),void 0!==e&&(r=(new y).getNormalMatrix(e));for(var d=0,p=a.length;d<p;d++){var v=a[d].clone();void 0!==e&&v.applyMatrix4(e),n.push(v)}for(d=0,p=f.length;d<p;d++)c.push(f[d].clone());for(d=0,p=h.length;d<p;d++){var x,g,b,w=h[d],M=w.vertexNormals,z=w.vertexColors;(x=new m(w.a+s,w.b+s,w.c+s)).normal.copy(w.normal),void 0!==r&&x.normal.applyMatrix3(r).normalize();for(var _=0,A=M.length;_<A;_++)g=M[_].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),x.vertexNormals.push(g);x.color.copy(w.color);for(_=0,A=z.length;_<A;_++)b=z[_],x.vertexColors.push(b.clone());x.materialIndex=w.materialIndex+i,o.push(x)}for(d=0,p=l.length;d<p;d++){var S=l[d],N=[];if(void 0!==S){for(_=0,A=S.length;_<A;_++)N.push(S[_].clone());u.push(N)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,i,r,s,n,a,o,h={},u=[],l=[],c=Math.pow(10,4);for(i=0,r=this.vertices.length;i<r;i++)t=this.vertices[i],void 0===h[e=Math.round(t.x*c)+"_"+Math.round(t.y*c)+"_"+Math.round(t.z*c)]?(h[e]=i,u.push(this.vertices[i]),l[i]=u.length-1):l[i]=l[h[e]];var f=[];for(i=0,r=this.faces.length;i<r;i++){(s=this.faces[i]).a=l[s.a],s.b=l[s.b],s.c=l[s.c],n=[s.a,s.b,s.c];for(var d=0;d<3;d++)if(n[d]===n[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var p=f[i];for(this.faces.splice(p,1),a=0,o=this.faceVertexUvs.length;a<o;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];this.vertices.push(new p(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,s,n=this.faceVertexUvs[0],a=this.faceVertexUvs[1];n&&n.length===e&&(r=[]),a&&a.length===e&&(s=[]);for(i=0;i<e;i++){var o=t[i]._id;r&&r.push(n[o]),s&&s.push(a[o])}r&&(this.faceVertexUvs[0]=r),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}for(var r=[],s=0;s<this.vertices.length;s++){var n=this.vertices[s];r.push(n.x,n.y,n.z)}var a=[],o=[],h={},u=[],l={},c=[],f={};for(s=0;s<this.faces.length;s++){var d=this.faces[s],p=void 0!==this.faceVertexUvs[0][s],m=d.normal.length()>0,y=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,x=d.vertexColors.length>0,g=0;if(g=z(g,0,0),g=z(g,1,!0),g=z(g,2,!1),g=z(g,3,p),g=z(g,4,m),g=z(g,5,y),g=z(g,6,v),g=z(g,7,x),a.push(g),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var b=this.faceVertexUvs[0][s];a.push(S(b[0]),S(b[1]),S(b[2]))}if(m&&a.push(_(d.normal)),y){var w=d.vertexNormals;a.push(_(w[0]),_(w[1]),_(w[2]))}if(v&&a.push(A(d.color)),x){var M=d.vertexColors;a.push(A(M[0]),A(M[1]),A(M[2]))}}function z(t,e,i){return i?t|1<<e:t&~(1<<e)}function _(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==h[e]?h[e]:(h[e]=o.length/3,o.push(t.x,t.y,t.z),h[e])}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=u.length,u.push(t.getHex()),l[e])}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=c.length/2,c.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=r,t.data.normals=o,u.length>0&&(t.data.colors=u),c.length>0&&(t.data.uvs=[c]),t.data.faces=a,t},clone:function(){return(new k).copy(this)},copy:function(t){var e,i,r,s,n,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var o=t.vertices;for(e=0,i=o.length;e<i;e++)this.vertices.push(o[e].clone());var h=t.colors;for(e=0,i=h.length;e<i;e++)this.colors.push(h[e].clone());var u=t.faces;for(e=0,i=u.length;e<i;e++)this.faces.push(u[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,s=l.length;r<s;r++){var c=l[r],f=[];for(n=0,a=c.length;n<a;n++){var d=c[n];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,i=p.length;e<i;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],r=0,s=p[e].vertices.length;r<s;r++)m.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(m.normals=[],r=0,s=p[e].normals.length;r<s;r++)m.normals.push(p[e].normals[r].clone());this.morphTargets.push(m)}var y=t.morphNormals;for(e=0,i=y.length;e<i;e++){var v={};if(void 0!==y[e].vertexNormals)for(v.vertexNormals=[],r=0,s=y[e].vertexNormals.length;r<s;r++){var x=y[e].vertexNormals[r],g={};g.a=x.a.clone(),g.b=x.b.clone(),g.c=x.c.clone(),v.vertexNormals.push(g)}if(void 0!==y[e].faceNormals)for(v.faceNormals=[],r=0,s=y[e].faceNormals.length;r<s;r++)v.faceNormals.push(y[e].faceNormals[r].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,i=b.length;e<i;e++)this.skinWeights.push(b[e].clone());var w=t.skinIndices;for(e=0,i=w.length;e<i;e++)this.skinIndices.push(w[e].clone());var M=t.lineDistances;for(e=0,i=M.length;e<i;e++)this.lineDistances.push(M[e]);var z=t.boundingBox;null!==z&&(this.boundingBox=z.clone());var _=t.boundingSphere;return null!==_&&(this.boundingSphere=_.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var V=0;function F(){Object.defineProperty(this,"id",{value:V++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=A,this.side=z,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=_,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=E,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=U,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function R(t){F.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=T,this.normalScale=new b(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function q(t){O.call(this),this.material=t,this.render=function(){}}function I(t,e,i,r){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==r?r:1}function j(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function D(t,e,i){j.call(this,new Int8Array(t),e,i)}function H(t,e,i){j.call(this,new Uint8Array(t),e,i)}function P(t,e,i){j.call(this,new Uint8ClampedArray(t),e,i)}function G(t,e,i){j.call(this,new Int16Array(t),e,i)}function W(t,e,i){j.call(this,new Uint16Array(t),e,i)}function L(t,e,i){j.call(this,new Int32Array(t),e,i)}function X(t,e,i){j.call(this,new Uint32Array(t),e,i)}function Y(t,e,i){j.call(this,new Float32Array(t),e,i)}function Z(t,e,i){j.call(this,new Float64Array(t),e,i)}function J(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}F.prototype=Object.assign(Object.create(a.prototype),{constructor:F,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var i in t){var r=t[i];delete r.metadata,e.push(r)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==z&&(i.side=this.side),this.vertexColors!==_&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){var s=r(t.textures),n=r(t.images);s.length>0&&(i.textures=s),n.length>0&&(i.images=n)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var r=e.length;i=new Array(r);for(var s=0;s!==r;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),R.prototype=Object.create(F.prototype),R.prototype.constructor=R,R.prototype.isMeshNormalMaterial=!0,R.prototype.copy=function(t){return F.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},q.prototype=Object.create(O.prototype),q.prototype.constructor=q,q.prototype.isImmediateRenderObject=!0,Object.defineProperties(I.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(I.prototype,{isVector4:!0,set:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,s=this.w,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r+n[12]*s,this.y=n[1]*e+n[5]*i+n[9]*r+n[13]*s,this.z=n[2]*e+n[6]*i+n[10]*r+n[14]*s,this.w=n[3]*e+n[7]*i+n[11]*r+n[15]*s,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,r,s,n=t.elements,a=n[0],o=n[4],h=n[8],u=n[1],l=n[5],c=n[9],f=n[2],d=n[6],p=n[10];if(Math.abs(o-u)<.01&&Math.abs(h-f)<.01&&Math.abs(c-d)<.01){if(Math.abs(o+u)<.1&&Math.abs(h+f)<.1&&Math.abs(c+d)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,y=(l+1)/2,v=(p+1)/2,x=(o+u)/4,g=(h+f)/4,b=(c+d)/4;return m>y&&m>v?m<.01?(i=0,r=.707106781,s=.707106781):(r=x/(i=Math.sqrt(m)),s=g/i):y>v?y<.01?(i=.707106781,r=0,s=.707106781):(i=x/(r=Math.sqrt(y)),s=b/r):v<.01?(i=.707106781,r=.707106781,s=0):(i=g/(s=Math.sqrt(v)),r=b/s),this.set(i,r,s,e),this}var w=Math.sqrt((d-c)*(d-c)+(h-f)*(h-f)+(u-o)*(u-o));return Math.abs(w)<.001&&(w=1),this.x=(d-c)/w,this.y=(h-f)/w,this.z=(u-o)/w,this.w=Math.acos((a+l+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new I,e=new I),t.set(i,i,i,i),e.set(r,r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Object.defineProperty(j.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(j.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,s=t.length;r<s;r++){var n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),n=new u),e[i++]=n.r,e[i++]=n.g,e[i++]=n.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,s=t.length;r<s;r++){var n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),n=new b),e[i++]=n.x,e[i++]=n.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,s=t.length;r<s;r++){var n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),n=new p),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,s=t.length;r<s;r++){var n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),n=new I),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z,e[i++]=n.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=s,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),D.prototype=Object.create(j.prototype),D.prototype.constructor=D,H.prototype=Object.create(j.prototype),H.prototype.constructor=H,P.prototype=Object.create(j.prototype),P.prototype.constructor=P,G.prototype=Object.create(j.prototype),G.prototype.constructor=G,W.prototype=Object.create(j.prototype),W.prototype.constructor=W,L.prototype=Object.create(j.prototype),L.prototype.constructor=L,X.prototype=Object.create(j.prototype),X.prototype.constructor=X,Y.prototype=Object.create(j.prototype),Y.prototype.constructor=Y,Z.prototype=Object.create(j.prototype),Z.prototype.constructor=Z,Object.assign(J.prototype,{computeGroups:function(t){for(var e,i=[],r=void 0,s=t.faces,n=0;n<s.length;n++){var a=s[n];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*n-e.start,i.push(e)),e={start:3*n,materialIndex:r})}void 0!==e&&(e.count=3*n-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,s=t.faceVertexUvs,n=s[0]&&s[0].length>0,a=s[1]&&s[1].length>0,o=t.morphTargets,h=o.length;if(h>0){e=[];for(var u=0;u<h;u++)e[u]={name:o[u].name,data:[]};this.morphTargets.position=e}var l,c=t.morphNormals,f=c.length;if(f>0){l=[];for(u=0;u<f;u++)l[u]={name:c[u].name,data:[]};this.morphTargets.normal=l}var d=t.skinIndices,p=t.skinWeights,m=d.length===r.length,y=p.length===r.length;r.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<i.length;u++){var v=i[u];this.vertices.push(r[v.a],r[v.b],r[v.c]);var x=v.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var g=v.normal;this.normals.push(g,g,g)}var w,M=v.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var z=v.color;this.colors.push(z,z,z)}if(!0===n)void 0!==(w=s[0][u])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new b,new b,new b));if(!0===a)void 0!==(w=s[1][u])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new b,new b,new b));for(var _=0;_<h;_++){var A=o[_].vertices;e[_].data.push(A[v.a],A[v.b],A[v.c])}for(_=0;_<f;_++){var S=c[_].vertexNormals[u];l[_].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),y&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Q=1;function $(){Object.defineProperty(this,"id",{value:Q+=2}),this.uuid=o.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}$.prototype=Object.assign(Object.create(a.prototype),{constructor:$,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(function(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}(t)>65535?X:W)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new j(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new y).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new y).getNormalMatrix(t).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,r){return t.makeTranslation(e,i,r),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,r){return t.makeScale(e,i,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new O;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new p;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new Y(3*e.vertices.length,3),r=new Y(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var s=new Y(e.lineDistances.length,1);this.addAttribute("lineDistance",s.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var s=t[i];e.push(s.x,s.y,s.z||0)}return this.addAttribute("position",new Y(e,3)),this},updateFromObject:function(t){var e,i=t.geometry;if(t.isMesh){var r=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(i.vertices),e.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(i.normals),e.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(i.colors),e.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(i.uvs),e.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(i.lineDistances),e.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(t.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new J).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new j(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new j(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new j(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var s=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new j(s,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var n=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new j(n,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var o=[],h=t.morphTargets[a],u=0,l=h.length;u<l;u++){var c=h[u],f=new Y(3*c.data.length,3);f.name=c.name,o.push(f.copyVector3sArray(c.data))}this.morphAttributes[a]=o}if(t.skinIndices.length>0){var d=new Y(4*t.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var p=new Y(4*t.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new v;return function(){null===this.boundingBox&&(this.boundingBox=new v);var e=this.attributes.position,i=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),i)for(var r=0,s=i.length;r<s;r++){var n=i[r];t.setFromBufferAttribute(n),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new v,e=new v,i=new p;return function(){null===this.boundingSphere&&(this.boundingSphere=new x);var r=this.attributes.position,s=this.morphAttributes.position;if(r){var n=this.boundingSphere.center;if(t.setFromBufferAttribute(r),s)for(var a=0,o=s.length;a<o;a++){var h=s[a];e.setFromBufferAttribute(h),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(n);var u=0;for(a=0,o=r.count;a<o;a++)i.fromBufferAttribute(r,a),u=Math.max(u,n.distanceToSquared(i));if(s)for(a=0,o=s.length;a<o;a++)for(var l=0,c=(h=s[a]).count;l<c;l++)i.fromBufferAttribute(h,l),u=Math.max(u,n.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new j(new Float32Array(i.length),3));else for(var r=e.normal.array,s=0,n=r.length;s<n;s++)r[s]=0;var a,o,h,u=e.normal.array,l=new p,c=new p,f=new p,d=new p,m=new p;if(t){var y=t.array;for(s=0,n=t.count;s<n;s+=3)a=3*y[s+0],o=3*y[s+1],h=3*y[s+2],l.fromArray(i,a),c.fromArray(i,o),f.fromArray(i,h),d.subVectors(f,c),m.subVectors(l,c),d.cross(m),u[a]+=d.x,u[a+1]+=d.y,u[a+2]+=d.z,u[o]+=d.x,u[o+1]+=d.y,u[o+2]+=d.z,u[h]+=d.x,u[h+1]+=d.y,u[h+2]+=d.z}else for(s=0,n=i.length;s<n;s+=9)l.fromArray(i,s),c.fromArray(i,s+3),f.fromArray(i,s+6),d.subVectors(f,c),m.subVectors(l,c),d.cross(m),u[s]=d.x,u[s+1]=d.y,u[s+2]=d.z,u[s+3]=d.x,u[s+4]=d.y,u[s+5]=d.z,u[s+6]=d.x,u[s+7]=d.y,u[s+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var r in i)if(void 0!==t.attributes[r])for(var s=i[r].array,n=t.attributes[r],a=n.array,o=n.itemSize*e,h=Math.min(a.length,s.length-o),u=0,l=o;u<h;u++,l++)s[l]=a[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new p;return function(){for(var e=this.attributes.normal,i=0,r=e.count;i<r;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.normalize(),e.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var i=t.array,r=t.itemSize,s=new i.constructor(e.length*r),n=0,a=0,o=0,h=e.length;o<h;o++){n=e[o]*r;for(var u=0;u<r;u++)s[a++]=i[n++]}return new j(s,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new $,i=this.index.array,r=this.attributes;for(var s in r){var n=t(r[s],i);e.addAttribute(s,n)}var a=this.morphAttributes;for(s in a){for(var o=[],h=a[s],u=0,l=h.length;u<l;u++){n=t(h[u],i);o.push(n)}e.morphAttributes[s]=o}for(var c=this.groups,f=(u=0,c.length);u<f;u++){var d=c[u];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var s=this.attributes;for(var i in s){var n=(f=s[i]).toJSON();""!==f.name&&(n.name=f.name),t.data.attributes[i]=n}var a={},o=!1;for(var i in this.morphAttributes){for(var h=this.morphAttributes[i],u=[],l=0,c=h.length;l<c;l++){var f;n=(f=h[l]).toJSON();""!==f.name&&(n.name=f.name),u.push(n)}u.length>0&&(a[i]=u,o=!0)}o&&(t.data.morphAttributes=a);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(t.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),t},clone:function(){return(new $).copy(this)},copy:function(t){var e,i,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.index;null!==s&&this.setIndex(s.clone());var n=t.attributes;for(e in n){var a=n[e];this.addAttribute(e,a.clone())}var o=t.morphAttributes;for(e in o){var h=[],u=o[e];for(i=0,r=u.length;i<r;i++)h.push(u[i].clone());this.morphAttributes[e]=h}var l=t.groups;for(i=0,r=l.length;i<r;i++){var c=l[i];this.addGroup(c.start,c.count,c.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var K=function(t,e,i,r){q.call(this,e);var s=this,n=new Float32Array(36),a=new Float32Array(36),o=new Float32Array(36);function h(t,e,i){return t+(e-t)*i}function l(t,e,i,r,u,l,c,f,d,p){var m=(i-c)/(f-c),y=s.normal_cache;n[e+0]=r+m*s.delta,n[e+1]=u,n[e+2]=l,a[e+0]=h(y[t+0],y[t+3],m),a[e+1]=h(y[t+1],y[t+4],m),a[e+2]=h(y[t+2],y[t+5],m),o[e+0]=h(s.palette[3*d+0],s.palette[3*p+0],m),o[e+1]=h(s.palette[3*d+1],s.palette[3*p+1],m),o[e+2]=h(s.palette[3*d+2],s.palette[3*p+2],m)}function c(t,e,i,r,u,l,c,f,d,p){var m=(i-c)/(f-c),y=s.normal_cache;n[e+0]=r,n[e+1]=u+m*s.delta,n[e+2]=l;var v=t+3*s.yd;a[e+0]=h(y[t+0],y[v+0],m),a[e+1]=h(y[t+1],y[v+1],m),a[e+2]=h(y[t+2],y[v+2],m),o[e+0]=h(s.palette[3*d+0],s.palette[3*p+0],m),o[e+1]=h(s.palette[3*d+1],s.palette[3*p+1],m),o[e+2]=h(s.palette[3*d+2],s.palette[3*p+2],m)}function f(t,e,i,r,u,l,c,f,d,p){var m=(i-c)/(f-c),y=s.normal_cache;n[e+0]=r,n[e+1]=u,n[e+2]=l+m*s.delta;var v=t+3*s.zd;a[e+0]=h(y[t+0],y[v+0],m),a[e+1]=h(y[t+1],y[v+1],m),a[e+2]=h(y[t+2],y[v+2],m),o[e+0]=h(s.palette[3*d+0],s.palette[3*p+0],m),o[e+1]=h(s.palette[3*d+1],s.palette[3*p+1],m),o[e+2]=h(s.palette[3*d+2],s.palette[3*p+2],m)}function d(t){var e=3*t;0===s.normal_cache[e]&&(s.normal_cache[e+0]=s.field[t-1]-s.field[t+1],s.normal_cache[e+1]=s.field[t-s.yd]-s.field[t+s.yd],s.normal_cache[e+2]=s.field[t-s.zd]-s.field[t+s.zd])}function p(t,e,i,r,h,u){var p=r+1,y=r+s.yd,v=r+s.zd,x=p+s.yd,g=p+s.zd,b=r+s.yd+s.zd,w=p+s.yd+s.zd,M=0,z=s.field[r],_=s.field[p],A=s.field[y],S=s.field[x],N=s.field[v],E=s.field[g],U=s.field[b],T=s.field[w];z<h&&(M|=1),_<h&&(M|=2),A<h&&(M|=8),S<h&&(M|=4),N<h&&(M|=16),E<h&&(M|=32),U<h&&(M|=128),T<h&&(M|=64);var C=tt[M];if(0===C)return 0;var O=s.delta,B=t+O,k=e+O,V=i+O;1&C&&(d(r),d(p),l(3*r,0,h,t,e,i,z,_,r,p)),2&C&&(d(p),d(x),c(3*p,3,h,B,e,i,_,S,p,x)),4&C&&(d(y),d(x),l(3*y,6,h,t,k,i,A,S,y,x)),8&C&&(d(r),d(y),c(3*r,9,h,t,e,i,z,A,r,y)),16&C&&(d(v),d(g),l(3*v,12,h,t,e,V,N,E,v,g)),32&C&&(d(g),d(w),c(3*g,15,h,B,e,V,E,T,g,w)),64&C&&(d(b),d(w),l(3*b,18,h,t,k,V,U,T,b,w)),128&C&&(d(v),d(b),c(3*v,21,h,t,e,V,N,U,v,b)),256&C&&(d(r),d(v),f(3*r,24,h,t,e,i,z,N,r,v)),512&C&&(d(p),d(g),f(3*p,27,h,B,e,i,_,E,p,g)),1024&C&&(d(x),d(w),f(3*x,30,h,B,k,i,S,T,x,w)),2048&C&&(d(y),d(b),f(3*y,33,h,t,k,i,A,U,y,b)),M<<=4;for(var F,R,q,I=0,j=0;-1!=et[M+j];)R=(F=M+j)+1,q=F+2,m(n,a,o,3*et[F],3*et[R],3*et[q],u),j+=3,I++;return I}function m(t,e,i,r,n,a,o){var h=3*s.count;if(s.positionArray[h+0]=t[r],s.positionArray[h+1]=t[r+1],s.positionArray[h+2]=t[r+2],s.positionArray[h+3]=t[n],s.positionArray[h+4]=t[n+1],s.positionArray[h+5]=t[n+2],s.positionArray[h+6]=t[a],s.positionArray[h+7]=t[a+1],s.positionArray[h+8]=t[a+2],!0===s.material.flatShading){var u=(e[r+0]+e[n+0]+e[a+0])/3,l=(e[r+1]+e[n+1]+e[a+1])/3,c=(e[r+2]+e[n+2]+e[a+2])/3;s.normalArray[h+0]=u,s.normalArray[h+1]=l,s.normalArray[h+2]=c,s.normalArray[h+3]=u,s.normalArray[h+4]=l,s.normalArray[h+5]=c,s.normalArray[h+6]=u,s.normalArray[h+7]=l,s.normalArray[h+8]=c}else s.normalArray[h+0]=e[r+0],s.normalArray[h+1]=e[r+1],s.normalArray[h+2]=e[r+2],s.normalArray[h+3]=e[n+0],s.normalArray[h+4]=e[n+1],s.normalArray[h+5]=e[n+2],s.normalArray[h+6]=e[a+0],s.normalArray[h+7]=e[a+1],s.normalArray[h+8]=e[a+2];if(s.enableUvs){var f=2*s.count;s.uvArray[f+0]=t[r+0],s.uvArray[f+1]=t[r+2],s.uvArray[f+2]=t[n+0],s.uvArray[f+3]=t[n+2],s.uvArray[f+4]=t[a+0],s.uvArray[f+5]=t[a+2]}s.enableColors&&(s.colorArray[h+0]=i[r+0],s.colorArray[h+1]=i[r+1],s.colorArray[h+2]=i[r+2],s.colorArray[h+3]=i[n+0],s.colorArray[h+4]=i[n+1],s.colorArray[h+5]=i[n+2],s.colorArray[h+6]=i[a+0],s.colorArray[h+7]=i[a+1],s.colorArray[h+8]=i[a+2]),s.count+=3,s.count>=s.maxCount-3&&(s.hasPositions=!0,s.hasNormals=!0,s.enableUvs&&(s.hasUvs=!0),s.enableColors&&(s.hasColors=!0),o(s))}function y(t,e,i){var r=new Float32Array(t.length+i);return r.set(t,0),r.set(e.slice(0,i),t.length),r}this.enableUvs=void 0!==i&&i,this.enableColors=void 0!==r&&r,this.init=function(t){this.resolution=t,this.isolation=80,this.size=t,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.palette=new Float32Array(3*this.size3),this.maxCount=4096,this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=new Float32Array(3*this.maxCount),this.normalArray=new Float32Array(3*this.maxCount),this.enableUvs&&(this.uvArray=new Float32Array(2*this.maxCount)),this.enableColors&&(this.colorArray=new Float32Array(3*this.maxCount))},this.begin=function(){this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasUvs=!1,this.hasColors=!1},this.end=function(t){if(0!==this.count){for(var e=3*this.count;e<this.positionArray.length;e++)this.positionArray[e]=0;this.hasPositions=!0,this.hasNormals=!0,this.enableUvs&&this.material.map&&(this.hasUvs=!0),this.enableColors&&this.material.vertexColors!==_&&(this.hasColors=!0),t(this)}},this.addBall=function(t,e,i,r,s,n){var a=Math.sign(r);r=Math.abs(r);var o=!(void 0===n||null===n),h=new u(t,e,i);if(o)try{h=n instanceof u?n:Array.isArray(n)?new u(Math.min(Math.abs(n[0]),1),Math.min(Math.abs(n[1]),1),Math.min(Math.abs(n[2]),1)):new u(n)}catch(B){h=new u(t,e,i)}var l=this.size*Math.sqrt(r/s),c=i*this.size,f=e*this.size,d=t*this.size,p=Math.floor(c-l);p<1&&(p=1);var m=Math.floor(c+l);m>this.size-1&&(m=this.size-1);var y=Math.floor(f-l);y<1&&(y=1);var v=Math.floor(f+l);v>this.size-1&&(v=this.size-1);var x=Math.floor(d-l);x<1&&(x=1);var g,b,w,M,z,_,A,S,N,E,U,T=Math.floor(d+l);for(T>this.size-1&&(T=this.size-1),w=p;w<m;w++)for(z=this.size2*w,N=(S=w/this.size-i)*S,b=y;b<v;b++)for(M=z+this.size*b,E=(A=b/this.size-e)*A,g=x;g<T;g++)if((U=r/(1e-6+(_=g/this.size-t)*_+E+N)-s)>0){this.field[M+g]+=U*a;var C=Math.sqrt((g-d)*(g-d)+(b-f)*(b-f)+(w-c)*(w-c))/l,O=1-C*C*C*(C*(6*C-15)+10);this.palette[3*(M+g)+0]+=h.r*O,this.palette[3*(M+g)+1]+=h.g*O,this.palette[3*(M+g)+2]+=h.b*O}},this.addPlaneX=function(t,e){var i,r,s,n,a,o,h=this.size,u=this.yd,l=this.zd,c=this.field,f=h*Math.sqrt(t/e);for(f>h&&(f=h),i=0;i<f;i++)if((n=t/(1e-4+(a=i/h)*a)-e)>0)for(r=0;r<h;r++)for(o=i+r*u,s=0;s<h;s++)c[l*s+o]+=n},this.addPlaneY=function(t,e){var i,r,s,n,a,o,h,u=this.size,l=this.yd,c=this.zd,f=this.field,d=u*Math.sqrt(t/e);for(d>u&&(d=u),r=0;r<d;r++)if((n=t/(1e-4+(a=r/u)*a)-e)>0)for(o=r*l,i=0;i<u;i++)for(h=o+i,s=0;s<u;s++)f[c*s+h]+=n},this.addPlaneZ=function(t,e){var i,r,s,n,a,o,h,u=this.size,l=this.yd,c=this.zd,f=this.field,d=u*Math.sqrt(t/e);for(d>u&&(d=u),s=0;s<d;s++)if((n=t/(1e-4+(a=s/u)*a)-e)>0)for(o=c*s,r=0;r<u;r++)for(h=o+r*l,i=0;i<u;i++)f[h+i]+=n},this.setCell=function(t,e,i,r){var s=this.size2*i+this.size*e+t;this.field[s]=r},this.getCell=function(t,e,i){var r=this.size2*i+this.size*e+t;return this.field[r]},this.blur=function(t){void 0===t&&(t=1);for(var e=this.field,i=e.slice(),r=this.size,s=this.size2,n=0;n<r;n++)for(var a=0;a<r;a++)for(var o=0;o<r;o++){for(var h=s*o+r*a+n,u=i[h],l=1,c=-1;c<=1;c+=2){var f=c+n;if(!(f<0||f>=r))for(var d=-1;d<=1;d+=2){var p=d+a;if(!(p<0||p>=r))for(var m=-1;m<=1;m+=2){var y=m+o;if(!(y<0||y>=r))u+=t*(i[s*y+r*p+f]-u)/++l}}}e[h]=u}},this.reset=function(){var t;for(t=0;t<this.size3;t++)this.normal_cache[3*t]=0,this.field[t]=0,this.palette[3*t]=this.palette[3*t+1]=this.palette[3*t+2]=0},this.render=function(t){this.begin();for(var e=this.size-2,i=1;i<e;i++)for(var r=this.size2*i,s=(i-this.halfsize)/this.halfsize,n=1;n<e;n++)for(var a=r+this.size*n,o=(n-this.halfsize)/this.halfsize,h=1;h<e;h++){p((h-this.halfsize)/this.halfsize,o,s,a+h,this.isolation,t)}this.end(t)},this.generateGeometry=function(){return console.warn("MarchingCubes: generateGeometry() now returns BufferGeometry"),this.generateBufferGeometry()},this.generateBufferGeometry=function(){var t=new $,e=new Float32Array,i=new Float32Array,r=new Float32Array,s=new Float32Array,n=this;return this.render(function(t){n.hasPositions&&(e=y(e,t.positionArray,3*t.count)),n.hasNormals&&(i=y(i,t.normalArray,3*t.count)),n.hasColors&&(r=y(r,t.colorArray,3*t.count)),n.hasUvs&&(s=y(s,t.uvArray,2*t.count)),t.count=0}),this.hasPositions&&t.addAttribute("position",new j(e,3)),this.hasNormals&&t.addAttribute("normal",new j(i,3)),this.hasColors&&t.addAttribute("color",new j(r,3)),this.hasUvs&&t.addAttribute("uv",new j(s,2)),t},this.init(t)};(K.prototype=Object.create(q.prototype)).constructor=K;var tt=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),et=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),it=function(){};!function(){var t=new p,e=new p;function i(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}function r(t,e){var i,r,s,n=e.position.distanceTo(t.position),a=0,o=[],h=t.faces.length;for(i=0;i<h;i++)(r=t.faces[i]).hasVertex(e)&&o.push(r);for(i=0;i<h;i++){var u=1;r=t.faces[i];for(var l=0;l<o.length;l++){s=o[l];var c=r.normal.dot(s.normal);u=Math.min(u,(1.001-c)/2)}a=Math.max(a,u)}return o.length<2&&(a=1),n*a+0}function s(t){if(0===t.neighbors.length)return t.collapseNeighbor=null,void(t.collapseCost=-.01);t.collapseCost=1e5,t.collapseNeighbor=null;for(var e=0;e<t.neighbors.length;e++){var i=r(t,t.neighbors[e]);t.collapseNeighbor||(t.collapseNeighbor=t.neighbors[e],t.collapseCost=i,t.minCost=i,t.totalCost=0,t.costCount=0),t.costCount++,t.totalCost+=i,i<t.minCost&&(t.collapseNeighbor=t.neighbors[e],t.minCost=i)}t.collapseCost=t.totalCost/t.costCount}function n(t,e){for(console.assert(0===t.faces.length);t.neighbors.length;){i(t.neighbors.pop().neighbors,t)}i(e,t)}function a(t,e){i(e,t),t.v1&&i(t.v1.faces,t),t.v2&&i(t.v2.faces,t),t.v3&&i(t.v3.faces,t);for(var r,s,n=[t.v1,t.v2,t.v3],a=0;a<3;a++)s=n[(a+1)%3],(r=n[a])&&s&&(r.removeIfNonNeighbor(s),s.removeIfNonNeighbor(r))}function o(t,e,i,r){if(r){var o,h=[];for(o=0;o<i.neighbors.length;o++)h.push(i.neighbors[o]);for(o=i.faces.length-1;o>=0;o--)i.faces[o].hasVertex(r)&&a(i.faces[o],e);for(o=i.faces.length-1;o>=0;o--)i.faces[o].replaceVertex(i,r);for(n(i,t),o=0;o<h.length;o++)s(h[o])}else n(i,t)}function h(t){for(var e=t[0],i=0;i<t.length;i++)t[i].collapseCost<e.collapseCost&&(e=t[i]);return e}function u(t,e,i,r,s,n){this.a=r,this.b=s,this.c=n,this.v1=t,this.v2=e,this.v3=i,this.normal=new p,this.computeNormal(),t.faces.push(this),t.addUniqueNeighbor(e),t.addUniqueNeighbor(i),e.faces.push(this),e.addUniqueNeighbor(t),e.addUniqueNeighbor(i),i.faces.push(this),i.addUniqueNeighbor(t),i.addUniqueNeighbor(e)}function l(t,e){this.position=t,this.id=e,this.faces=[],this.neighbors=[],this.collapseCost=0,this.collapseNeighbor=null}u.prototype.computeNormal=function(){var i=this.v1.position,r=this.v2.position,s=this.v3.position;t.subVectors(s,r),e.subVectors(i,r),t.cross(e).normalize(),this.normal.copy(t)},u.prototype.hasVertex=function(t){return t===this.v1||t===this.v2||t===this.v3},u.prototype.replaceVertex=function(t,e){t===this.v1?this.v1=e:t===this.v2?this.v2=e:t===this.v3&&(this.v3=e),i(t.faces,this),e.faces.push(this),t.removeIfNonNeighbor(this.v1),this.v1.removeIfNonNeighbor(t),t.removeIfNonNeighbor(this.v2),this.v2.removeIfNonNeighbor(t),t.removeIfNonNeighbor(this.v3),this.v3.removeIfNonNeighbor(t),this.v1.addUniqueNeighbor(this.v2),this.v1.addUniqueNeighbor(this.v3),this.v2.addUniqueNeighbor(this.v1),this.v2.addUniqueNeighbor(this.v3),this.v3.addUniqueNeighbor(this.v1),this.v3.addUniqueNeighbor(this.v2),this.computeNormal()},l.prototype.addUniqueNeighbor=function(t){var e,i;e=this.neighbors,i=t,-1===e.indexOf(i)&&e.push(i)},l.prototype.removeIfNonNeighbor=function(t){var e=this.neighbors,i=this.faces,r=e.indexOf(t);if(-1!==r){for(var s=0;s<i.length;s++)if(i[s].hasVertex(t))return;e.splice(r,1)}},it.prototype.modify=function(t,e){t.isBufferGeometry&&(t=(new k).fromBufferGeometry(t)),t.mergeVertices();var i,r,n,a=t.vertices,c=t.faces,f=[],d=[];for(i=0,r=a.length;i<r;i++){var p=new l(a[i],i);f.push(p)}for(i=0,r=c.length;i<r;i++){var m=(z=c[i]).a,y=z.b,v=z.c,x=new u(f[m],f[y],f[v],m,y,v);d.push(x)}for(i=0,r=f.length;i<r;i++)s(f[i]);for(var g=e;g--;){if(!(n=h(f))){console.log("THREE.SimplifyModifier: No next vertex");break}o(f,d,n,n.collapseNeighbor)}var b=new $,w=[],M=[];for(i=0;i<f.length;i++){p=f[i].position;w.push(p.x,p.y,p.z)}for(i=0;i<d.length;i++){var z=d[i];m=f.indexOf(z.v1),y=f.indexOf(z.v2),v=f.indexOf(z.v3);M.push(m,y,v)}return b.addAttribute("position",new Y(w,3)),b.setIndex(M),b}}();var rt=new it,st=new n.a("123");onmessage=function(t){var e=r(t.data,4);!function(t,e,i,r){console.time([t,e,i].toString());var s,n,a,o,h,u,l,c=0,f=!0,d=new Float32Array(32768),p=new K(32,new R,!1,!1);p.isolation=0;for(var m,y,v,x,g,b,w=function(t,e,i){n=st.noise3D(t/128,e/128,i/128),a=st.noise3D(t/64,e/64,i/64),o=st.noise3D(t/32,e/32,i/32),h=st.noise3D(t/16,e/16,i/16),u=st.noise3D(t/8,e/8,i/8),l=st.noise3D(t/4,e/4,i/4);var r=2*(.5-Math.abs(n))*.5;return r+=2*(.5-Math.abs(a))*.25,r+=2*(.5-Math.abs(o))*.125,r+=2*(.5-Math.abs(h))*.0625*n,r+=2*(.5-Math.abs(u))*.03125*a,r+=2*(.5-Math.abs(l))*.015625*o},M=29*i;M<29*i+32;M++)for(var z=29*e;z<29*e+32;z++)for(var _=29*t;_<29*t+32;_++,c++){m=_+16*w(_,z,M),y=z+16*w(_+333.33,z+333.33,M+333.33),v=M+16*w(_+666.66,z+666.66,M+666.66),x=_+16*w(m,y,v),g=z+16*w(m+111.11,y+111.11,v+111.11),b=M+16*w(m+222.22,y+222.22,v+222.22);var A=0;A+=.5*w(x,g,b),A+=.5-M/(29*r),d[c]=A,0!==c&&(f=!!f&&Math.sign(d[c])===Math.sign(d[c-1]))}if(f)postMessage({hasGeometry:!1,i:t,j:e,k:i});else if(p.field=d,(s=p.generateBufferGeometry()).attributes.position){s.computeBoundingBox(),s.scale(500/1.8125,500/1.8125,500/1.8125),(s=(new k).fromBufferGeometry(s)).mergeVertices();var S=rt.modify(s,Math.floor(s.vertices.length*(s.vertices.length>200?.4:.1)));S.computeVertexNormals();var N=S.attributes.position.array.buffer,E=S.attributes.normal.array.buffer,U=S.index.array.buffer;console.timeEnd([t,e,i].toString()),postMessage({hasGeometry:!0,i:t,j:e,k:i,pos1:N,normals1:E,index1:U},[N,E,U])}else postMessage({hasGeometry:!1,i:t,j:e,k:i})}(e[0],e[1],e[2],e[3])}}]);
//# sourceMappingURL=voxel.worker.626df7dc.js.map